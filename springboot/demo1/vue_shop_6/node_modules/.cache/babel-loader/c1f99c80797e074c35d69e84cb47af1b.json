{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, withKeys as _withKeys, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '../assets/logo.png';\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-ef68022e\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"login_container\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"link\", {\n  href: \"../assets/icons/font_2cf2621a7by/iconfont.css\"\n}, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_3 = {\n  class: \"login_container\"\n};\nconst _hoisted_4 = {\n  class: \"login_box\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"avator_box\"\n}, [/*#__PURE__*/_createCommentVNode(\"头像区域\"), /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"\"\n})], -1\n/* HOISTED */\n));\n\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"iconfont icon-yonghu_user\"\n}, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"iconfont icon-mima_password\"\n}, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\"登陆\");\n\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\"清除\");\n\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\"注册账户\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_form = _resolveComponent(\"el-form\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createCommentVNode(\" 这里link引入icon的css文件时就不用ref了，有些浏览器用ref=\\\"stylesheet\\\"会报错\"), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _createVNode(_component_el_form, {\n    model: $setup.loginForm,\n    rules: $setup.loginFormRule,\n    ref: \"loginFormRef\",\n    \"label-width\": \"0px\",\n    class: \"login_form\",\n    onKeyup: _withKeys($setup.login, [\"enter\"])\n  }, {\n    default: _withCtx(() => [_createCommentVNode(\"用户名\"), _createVNode(_component_el_form_item, {\n      prop: \"username\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.loginForm.username,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.loginForm.username = $event),\n        placeholder: \"User Name\",\n        id: \"customerName\"\n      }, {\n        prefix: _withCtx(() => [_hoisted_6]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"modelValue\"]), _createCommentVNode(\"注意icon图标的引用格式\")]),\n      _: 1\n      /* STABLE */\n\n    }), _createCommentVNode(\"密码\"), _createVNode(_component_el_form_item, {\n      prop: \"password\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.loginForm.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.loginForm.password = $event),\n        placeholder: \"Password\",\n        \"show-password\": \"\",\n        type: \"password\",\n        id: \"loginPwd\"\n      }, {\n        prefix: _withCtx(() => [_hoisted_7]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createCommentVNode(\"按钮区域\"), _createVNode(_component_el_form_item, {\n      class: \"bots\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        plain: \"\",\n        onClick: $setup.login,\n        disabled: !$setup.canSubmit\n      }, {\n        default: _withCtx(() => [_hoisted_8]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"disabled\"]), _createVNode(_component_el_button, {\n        type: \"info\",\n        plain: \"\",\n        onClick: $setup.resetLoginForm\n      }, {\n        default: _withCtx(() => [_hoisted_9]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_button, {\n        text: \"\",\n        type: \"primary\",\n        plain: \"\",\n        onClick: $setup.goRegister\n      }, {\n        default: _withCtx(() => [_hoisted_10]),\n        _: 1\n        /* STABLE */\n\n      })]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"model\", \"rules\", \"onKeyup\"])])])]);\n}","map":{"version":3,"mappings":"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","names":["_imports_0","class","_createElementVNode","href","_createCommentVNode","src","alt","_createElementBlock","_hoisted_2","_hoisted_5","_createVNode","_component_el_form","model","$setup","rules","ref","onKeyup","_component_el_form_item","prop","_component_el_input","username","$event","placeholder","id","prefix","_hoisted_6","password","type","_hoisted_7","_component_el_button","plain","onClick","disabled","text"],"sourceRoot":"","sources":["F:\\BUAA-DataBase\\db-main\\springboot\\demo1\\vue_shop_6\\src\\components\\Login.vue"],"sourcesContent":["\r\n<template>\r\n\t<div class=\"login_container\">\r\n\t\t<link href=\"../assets/icons/font_2cf2621a7by/iconfont.css\"> \r\n\t\t<!-- 这里link引入icon的css文件时就不用ref了，有些浏览器用ref=\"stylesheet\"会报错-->\r\n\t\t<div class=\"login_container\">\r\n\t\t<div class=\"login_box\">\r\n\t\t\t<div class=\"avator_box\">\r\n\t\t\t\t<!--头像区域--> \r\n\t\t\t\t<img src=\"../assets/logo.png\" alt=\"\"> \r\n\t\t\t</div>\r\n\r\n\t\t\t<el-form \r\n\t\t\t:model=\"loginForm\" :rules=\"loginFormRule\" ref=\"loginFormRef\" \r\n\t\t\tlabel-width=\"0px\" class=\"login_form\" @keyup.enter=\"login\">\r\n\t\t\t\t<!--用户名-->\r\n\t\t\t\t<el-form-item prop=\"username\">\r\n\t\t\t\t\t<el-input \r\n\t\t\t\t\tv-model=\"loginForm.username\" \r\n\t\t\t\t\tplaceholder=\"User Name\"\r\n          id=\"customerName\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t<template #prefix>\r\n            <i class=\"iconfont icon-yonghu_user\"></i>\r\n          </template>\r\n\t\t\t\t\t</el-input>\r\n\t\t\t\t\t<!--注意icon图标的引用格式-->\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<!--密码-->\r\n\t\t\t\t<el-form-item prop=\"password\">\r\n\t\t\t\t\t<el-input \r\n\t\t\t\t\tv-model=\"loginForm.password\" \r\n\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\tshow-password\r\n\t\t\t\t\ttype=\"password\"\r\n          id=\"loginPwd\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t<template #prefix>\r\n            <i class=\"iconfont icon-mima_password\"></i>\r\n          </template>\r\n\t\t\t\t\t</el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<!--按钮区域-->\r\n\t\t\t\t<el-form-item class=\"bots\">\r\n\t\t\t\t\t<el-button type=\"primary\" plain @click=\"login\" :disabled=\"!canSubmit\">登陆</el-button>\r\n\t\t\t\t\t<el-button type=\"info\" plain @click=\"resetLoginForm\">清除</el-button>\r\n\t\t\t\t\t<el-button text type=\"primary\" plain @click=\"goRegister\">注册账户</el-button>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t</div>\r\n\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ElIcon } from 'element-plus';\r\n\timport { ElMessage, ElMessageBox } from 'element-plus';\r\n  import {computed, reactive} from 'vue';\r\n\timport { ref, unref } from \"vue\"; // 引入组件\r\n  import axios from \"axios\";\r\n\timport { useRouter } from 'vue-router';\r\n\r\n\t// 这是登陆表单的数据绑定对象\r\n\tconst a = '123'\r\n\r\n\tconst loginForm = reactive({\r\n\t\tusername: '',\r\n\t\tpassword: '',\r\n\t})\r\n\r\n\t// 这是表单的验证规则对象\r\n\tconst loginFormRule = reactive({\r\n\t\t// 验证用户名\r\n\t\tusername: [\r\n\t\t\t{ min: 3, max: 12, message: '长度在 3 到 12 个字符之间', trigger: 'blur' },\r\n\t\t\t{ required: true, message: '请输入登陆名称', trigger: 'blur' }\r\n\t\t],\r\n\t\t// 验证密码\r\n\t\tpassword: [\r\n\t\t\t{ min: 6, max: 20, message: '长度在 6 到 20 个字符之间', trigger: 'blur' },\r\n\t\t\t{ required: true, message: '请输入登陆密码', trigger: 'blur' }\r\n\t\t]\r\n\t})\r\n\r\n\t// 组合式api中没有this概念，使用ref和unref获取对象的引用\r\n\tlet loginFormRef = ref()\r\n\t// 登陆\r\n  const canSubmit = computed(()=> {\r\n    const {username, password} = loginForm;\r\n    return Boolean(username && password);\r\n  })\r\n  function login(){\r\n    console.log(\"begin login\")\r\n    const form = unref(loginFormRef)\r\n    let formValid\r\n    form.validate(\r\n        valid => {\r\n          console.log(valid)\r\n          if (!valid) formValid = \"no\";\r\n          else formValid = \"yes\";\r\n        }\r\n    );\r\n    if (formValid === \"no\") ElMessageBox.alert('用户或密码格式错误', 'ERROR');\r\n    else {\r\n      //定义了一个函数来执行\r\n      //根据input框的id来获取相关的文本值\r\n      let login_msg = \"\";\r\n      let data = {\r\n        \"customerName\": document.getElementById(\"customerName\").value,\r\n        \"loginPwd\": document.getElementById(\"loginPwd\").value\r\n      }\r\n      console.log(data)\r\n      axios.post('http://localhost:9090/customer/login', data).then((res) => {\r\n        //判断登录情况\r\n        console.log(res)\r\n        if (res.data !== \"\") {\r\n          login_msg = \"success login,token=\" + res.data;\r\n          //this.$router.push('/mainIndex')\r\n          localStorage.setItem('token', res.data);\r\n          router.push({path: '/home'});\r\n        } else {\r\n          login_msg = \"fail\"\r\n        }\r\n        console.log(login_msg)\r\n        if (login_msg === \"fail\") ElMessageBox.alert('用户或密码错误', 'ERROR');\r\n        else {\r\n          ElMessageBox.alert('登陆成功', 'SUCCESS');\r\n        }\r\n        //回调函数 跳转到正常的页面\r\n      })\r\n      //axios发送一个post请求到指定的url\r\n    }\r\n  }\r\n\t// 重置\r\n\tfunction resetLoginForm() {\r\n\t\tconst form = unref(loginFormRef)\r\n\t\tconsole.log(loginFormRef.value);\r\n\t\tform.resetFields();\r\n\t}\r\n\r\n\tconst router = useRouter()\r\n\tfunction goRegister() {\r\n\t\trouter.push({\r\n\t\t\tpath: '/register'\r\n\t\t})\r\n\t}\r\n</script>\r\n\r\n<style lang=\"less\" scoped> \r\n// scoped:样式只在当前组件内生效\r\n\r\n.login_container{\r\n\theight: 100%;\r\n\tbackground-image: url('../assets/pictures/background1.jpg');\r\n\tbackground-position: center;\r\n\r\n\tbackground-color: rgb(33, 177, 203);\r\n}\r\n.login_box{\r\n\twidth: 450px;\r\n\theight: 300px;\r\n\tbackground-color: #fff;\r\n\tborder-radius: 10px;\r\n\tposition: absolute;\r\n\tleft: 50%;\r\n\ttop: 50%;\r\n\ttransform: translate(-50%,-50%);\r\n\r\n\t.avator_box{ // 嵌套定义样式\r\n\t\twidth: 130px;\r\n\t\theight: 130px;\r\n\t\tborder: 1px solid #eee;\r\n\t\tborder-radius: 50%;\r\n\t\tpadding: 10px;\r\n\t\tbox-shadow: 0 0 10px #ddd;\r\n\t\t// 定义位置\r\n\t\tposition: absolute;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t\t\r\n\t\tbackground-color: #fff;\r\n\t\timg{\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tbackground-color: #eee;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.login_form{\r\n\tposition: absolute;\r\n\tbottom: 10%;\r\n\twidth: 100%;\r\n\tpadding: 0 20px;\r\n\tbox-sizing: border-box; \r\n\t// 默认的box-sizing: content-box(边框和内边距宽度会增加到内容区的宽度上)\r\n\t.el-form-item {\r\n\t\tmargin: 5% 0;\r\n\t}\r\n}\r\n\r\n.bots{\r\n\tjustify-content: flex-end;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}