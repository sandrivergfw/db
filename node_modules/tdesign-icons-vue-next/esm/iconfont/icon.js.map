{"version":3,"file":"icon.js","sources":["../../src/iconfont/icon.tsx"],"sourcesContent":["import {\n  computed, defineComponent, h, onMounted,\n} from 'vue';\n\nimport props from './props/props';\nimport useSizeProps from '../utils/use-size-props';\nimport ConfigContext from '../utils/config-context';\nimport { checkLinkAndLoad } from '../utils/check-url-and-load';\n\nimport '../style/css';\n\nconst { classPrefix } = ConfigContext;\n\nconst CDN_ICONFONT_URL = 'https://tdesign.gtimg.com/icon/0.1.2/fonts/index.css';\n\nexport const IconFont = defineComponent({\n  name: 'IconFont',\n  props,\n  setup(props, { attrs }) {\n    const propsSize = computed(() => props.size);\n\n    const { className: sizeClassName, style: sizeStyle } = useSizeProps(propsSize);\n\n    const name = computed(() => props.name || '');\n\n    const isBuiltinIcon = computed(() => props.url && /^t-icon-(\\w|-)+$/.test(props.name)); // 判断是否是渲染内置图标\n\n    const finalUrl = computed(() => {\n      let url = [];\n      url = props.url instanceof Array ? props.url.concat() : [props.url];\n      if (props.loadDefaultIcons) url.push(CDN_ICONFONT_URL);\n      return url;\n    });\n\n    const classNames = computed(() => [\n      {\n        [name.value]: props.url,\n        [`${classPrefix}-icon`]: !props.url || isBuiltinIcon.value,\n        [`${classPrefix}-icon-${name.value}`]: !props.url,\n      },\n      sizeClassName.value,\n    ]);\n\n    const finalStyle = computed(() => ({ ...sizeStyle.value, ...(attrs.style as Styles) }));\n\n    onMounted(() => {\n      Array.from(new Set(finalUrl.value as string[])).forEach((url: string) => {\n        checkLinkAndLoad(url, `${classPrefix}-iconfont-stylesheet--unique-class`);\n      });\n    });\n\n    const finalProps = computed(() => ({\n      class: classNames.value,\n      style: finalStyle.value,\n      onClick: (e:MouseEvent) => props.onClick?.({ e }),\n    }));\n\n    return () => h(props.tag || 'i', finalProps.value);\n  },\n});\n\nexport default IconFont;\n"],"names":["classPrefix","ConfigContext","CDN_ICONFONT_URL","IconFont","defineComponent","name","props","setup","props2","attrs","propsSize","computed","size","className","sizeClassName","style","sizeStyle","useSizeProps","isBuiltinIcon","url","test","finalUrl","Array","concat","loadDefaultIcons","push","classNames","value","finalStyle","from","Set","forEach","finalProps","class","onClick","e","h","tag"],"mappings":";;;;;;;;;;;;AAWA,IAAM;AAAEA,EAAAA;AAAF,IAAkBC,aAAxB;AAEA,IAAMC,mBAAmB,sDAAzB;IAEaC,WAAWC,gBAAgB;AACtCC,EAAAA,MAAM,UADgC;AAEtCC,EAAAA,KAFsC;;AAGtCC,EAAAA,MAAMC,cAAkB;AAAA,QAAX;AAAEC,MAAAA;AAAF,KAAW;QAChBC,YAAYC,SAAS,MAAMH,OAAMI;QAEjC;AAAEC,MAAAA,WAAWC,aAAb;AAA4BC,MAAAA,OAAOC;AAAnC,QAAiDC,aAAaP;QAE9DL,OAAOM,SAAS,MAAMH,OAAMH,IAAN,IAAc;QAEpCa,gBAAgBP,SAAS,MAAMH,OAAMW,GAAN,IAAa,mBAAmBC,IAAnB,CAAwBZ,OAAMH,IAA9B;QAE5CgB,WAAWV,SAAS,MAAM;UAC1BQ,MAAM;YACJX,OAAMW,GAAN,YAAqBG,KAArB,GAA6Bd,OAAMW,GAAN,CAAUI,MAAV,EAA7B,GAAkD,CAACf,OAAMW,GAAP;UACpDX,OAAMgB,sBAAsBC,KAAKvB;aAC9BiB;;QAGHO,aAAaf,SAAS,MAAM,CAChC;OACGN,KAAKsB,QAAQnB,OAAMW,GADtB;iBAEMnB,wBAAqB,CAACQ,OAAMW,GAAP,IAAcD,cAAcS,KAFvD;iBAGM3B,8BAAoBK,KAAKsB,SAAU,CAACnB,OAAMW;AAHhD,KADgC,EAMhCL,cAAca,KANkB;QAS5BC,aAAajB,SAAS,sCAAYK,UAAUW,KAAtB,GAAiClB,MAAMM,KAAvC;cAElB,MAAM;YACRc,KAAK,IAAIC,GAAJ,CAAQT,SAASM,KAAjB,GAAqCI,QAASZ,GAAD,IAAiB;yBACtDA,eAAQnB;;;QAIvBgC,aAAarB,SAAS;AAC1BsB,MAAAA,OAAOP,WAAWC;AAClBZ,MAAAA,OAAOa,WAAWD;AAClBO,MAAAA,SAAUC,CAAD;AAAA;;AAAA,kCAAkB3B,OAAM0B,OAAxB,oDAAkB,qBAAA1B,QAAgB;AAAE2B,UAAAA;AAAF,UAAlC;AAAA;KAHiB;WAMrB,MAAMC,EAAE5B,OAAM6B,GAAN,IAAa,KAAKL,WAAWL;;;AA1CR;;;;"}