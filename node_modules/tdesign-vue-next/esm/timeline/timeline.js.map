{"version":3,"file":"timeline.js","sources":["../../src/timeline/timeline.tsx"],"sourcesContent":["import { defineComponent, provide, computed } from 'vue';\nimport TimeLineProps from './props';\nimport { TimelineInjectKey, DefaultAlign } from './hooks';\nimport { usePrefixClass } from '../hooks/useConfig';\nimport { useChildComponentSlots } from '../hooks/slot';\nimport TimelineItem from './TimelineItem';\nimport log from '../_common/js/log';\n\nexport default defineComponent({\n  name: 'TTimeline',\n  props: TimeLineProps,\n\n  setup(props) {\n    const COMPONENT_NAME = usePrefixClass('timeline');\n    const renderAlign = computed(() => {\n      const { labelAlign, layout } = props;\n      let res = layout === 'vertical' ? 'left' : 'top';\n      if (layout === 'vertical' && labelAlign) {\n        const index = DefaultAlign.horizontal.indexOf(labelAlign);\n        const isError = index !== -1;\n        isError && log.warn('Timeline', 'If layout is vertical, align should be \"left\",\"alternate\" or \"right\" ');\n        res = isError ? DefaultAlign.vertical[index] : labelAlign;\n      }\n      if (layout === 'horizontal' && labelAlign) {\n        const index = DefaultAlign.vertical.indexOf(labelAlign);\n        const isError = index !== -1;\n        isError && log.warn('Timeline', 'If layout is horizontal, align should be \"top\",\"alternate\" or \"bottom\" ');\n        res = isError ? DefaultAlign.horizontal[index] : labelAlign;\n      }\n      return res;\n    });\n\n    const getChildComponentSlots = useChildComponentSlots();\n\n    const timelineItems = computed(() => {\n      const items = getChildComponentSlots('TTimelineItem');\n      if (props.reverse) {\n        items.reverse();\n      }\n      return items;\n    });\n\n    const TimeLineProvide = computed(() => {\n      const { theme, reverse, layout, labelAlign, mode } = props;\n      return {\n        theme,\n        reverse,\n        itemsStatus: [''],\n        layout,\n        globalAlign: labelAlign,\n        mode,\n        renderAlign: renderAlign.value,\n      };\n    });\n\n    const hasLabelItem = 1;\n    provide(TimelineInjectKey, TimeLineProvide);\n\n    return () => (\n      <ul\n        class={[\n          `${COMPONENT_NAME.value}`,\n          {\n            [`${COMPONENT_NAME.value}-${renderAlign.value}`]: true,\n            [`${COMPONENT_NAME.value}-reverse`]: props.reverse,\n            [`${COMPONENT_NAME.value}-${props.layout}`]: true,\n            [`${COMPONENT_NAME.value}-label`]: hasLabelItem,\n            [`${COMPONENT_NAME.value}-label--${props.mode}`]: true,\n          },\n        ]}\n      >\n        {timelineItems.value.map((item, index) => (\n          <TimelineItem\n            {...item.props}\n            index={index}\n            class={{ [`${COMPONENT_NAME.value}-item--last`]: index === timelineItems.value.length - 1 }}\n            v-slots={item.children}\n          ></TimelineItem>\n        ))}\n      </ul>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","TimeLineProps","setup","COMPONENT_NAME","usePrefixClass","renderAlign","computed","labelAlign","layout","res","index","DefaultAlign","horizontal","indexOf","isError","log","warn","vertical","getChildComponentSlots","useChildComponentSlots","timelineItems","items","reverse","TimeLineProvide","theme","mode","itemsStatus","globalAlign","value","hasLabelItem","provide","TimelineInjectKey","_createVNode","map","item","length","children"],"mappings":"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"}