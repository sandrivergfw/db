{"version":3,"file":"trigger.js","sources":["../../src/color-picker/trigger.tsx"],"sourcesContent":["import { defineComponent, PropType, ref, watch } from 'vue';\nimport TInput from '../input';\nimport { Color } from './utils';\nimport { TdColorPickerProps } from './type';\nimport { useBaseClassName } from './hooks';\n\nexport default defineComponent({\n  name: 'DefaultTrigger',\n  inheritAttrs: false,\n  props: {\n    color: {\n      type: String,\n      default: '',\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    inputProps: {\n      type: Object as PropType<TdColorPickerProps['inputProps']>,\n      default: () => {\n        return {\n          autoWidth: true,\n        };\n      },\n    },\n    onTriggerChange: {\n      type: Function,\n      default: () => {\n        return () => {};\n      },\n    },\n  },\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const value = ref(props.color);\n\n    watch(\n      () => [props.color],\n      () => (value.value = props.color),\n    );\n\n    const handleChange = (input: string) => {\n      if (input === props.color) {\n        return;\n      }\n      if (!Color.isValid(input)) {\n        value.value = props.color;\n      } else {\n        value.value = input;\n      }\n      props.onTriggerChange(value.value);\n    };\n\n    return {\n      baseClassName,\n      value,\n      handleChange,\n    };\n  },\n\n  render() {\n    const { baseClassName } = this;\n    const inputSlots = {\n      label: () => {\n        return (\n          <div class={[`${baseClassName}__trigger--default__color`, `${baseClassName}--bg-alpha`]}>\n            <span\n              class={['color-inner']}\n              style={{\n                background: this.value,\n              }}\n            ></span>\n          </div>\n        );\n      },\n    };\n    return (\n      <div class={`${baseClassName}__trigger--default`}>\n        <TInput\n          {...this.inputProps}\n          v-slots={inputSlots}\n          v-model={this.value}\n          disabled={this.disabled}\n          onBlur={this.handleChange}\n        />\n      </div>\n    );\n  },\n});\n"],"names":["defineComponent","name","inheritAttrs","props","color","type","String","disabled","Boolean","inputProps","Object","autoWidth","onTriggerChange","Function","setup","baseClassName","useBaseClassName","value","ref","watch","handleChange","input","Color","isValid","render","inputSlots","label","_createVNode","background","TInput","_mergeProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMA,qBAAeA,eAAgB,CAAA;AAC7BC,EAAAA,IAAM,EAAA,gBAAA;AACNC,EAAAA,YAAc,EAAA,KAAA;AACdC,EAAAA,KAAO,EAAA;AACLC,IAAAA,KAAO,EAAA;AACLC,MAAAA,IAAM,EAAAC,MAAA;MACN,SAAS,EAAA,EAAA;KACX;AACAC,IAAAA,QAAU,EAAA;AACRF,MAAAA,IAAM,EAAAG,OAAA;MACN,SAAS,EAAA,KAAA;KACX;AACAC,IAAAA,UAAY,EAAA;AACVJ,MAAAA,IAAM,EAAAK,MAAA;AACN,MAAA,SAAA,EAAS,SAAM,QAAA,GAAA;QACN,OAAA;AACLC,UAAAA,SAAW,EAAA,IAAA;SACb,CAAA;AACF,OAAA;KACF;AACAC,IAAAA,eAAiB,EAAA;AACfP,MAAAA,IAAM,EAAAQ,QAAA;AACN,MAAA,SAAA,EAAS,SAAM,QAAA,GAAA;QACb,OAAO,YAAM,EAAC,CAAA;AAChB,OAAA;AACF,KAAA;GACF;EACAC,sBAAMX,KAAO,EAAA;IACX,IAAMY,gBAAgBC,gBAAiB,EAAA,CAAA;AACjC,IAAA,IAAAC,KAAA,GAAQC,GAAI,CAAAf,KAAA,CAAMC,KAAK,CAAA,CAAA;AAE7Be,IAAAA,KAAA,CACE,YAAA;AAAA,MAAA,OAAM,CAAChB,KAAA,CAAMC,KAAK,CAAA,CAAA;KAClB,EAAA,YAAA;AAAA,MAAA,OAAOa,KAAM,CAAAA,KAAA,GAAQd,KAAM,CAAAC,KAAA,CAAA;KAC7B,CAAA,CAAA;AAEM,IAAA,IAAAgB,YAAA,GAAe,SAAfA,YAAA,CAAgBC,KAAkB,EAAA;AAClC,MAAA,IAAAA,KAAA,KAAUlB,MAAMC,KAAO,EAAA;AACzB,QAAA,OAAA;AACF,OAAA;AACA,MAAA,IAAI,CAACkB,KAAA,CAAMC,OAAQ,CAAAF,KAAK,CAAG,EAAA;AACzBJ,QAAAA,KAAA,CAAMA,QAAQd,KAAM,CAAAC,KAAA,CAAA;AACtB,OAAO,MAAA;QACLa,KAAA,CAAMA,KAAQ,GAAAI,KAAA,CAAA;AAChB,OAAA;AACMlB,MAAAA,KAAA,CAAAS,eAAA,CAAgBK,MAAMA,KAAK,CAAA,CAAA;KACnC,CAAA;IAEO,OAAA;AACLF,MAAAA,aAAA,EAAAA,aAAA;AACAE,MAAAA,KAAA,EAAAA,KAAA;AACAG,MAAAA,YAAA,EAAAA,YAAAA;KACF,CAAA;GACF;AAEAI,EAAAA,MAAS,EAAA,SAAA,MAAA,GAAA;AAAA,IAAA,IAAA,KAAA,GAAA,IAAA,CAAA;AACD,IAAA,IAAET,gBAAkB,IAAA,CAAlBA;AACR,IAAA,IAAMU,UAAa,GAAA;AACjBC,MAAAA,OAAO,SAAM,KAAA,GAAA;AACX,QAAA,OAAAC,WAAA,CAAA,KAAA,EAAA;UAAA,OACc,EAAA,CAAA,EAAA,CAAA,MAAA,CAAIZ,aAA0C,EAAA,2BAAA,CAAA,EAAA,EAAA,CAAA,MAAA,CAAGA,aAAyB,EAAA,YAAA,CAAA,CAAA;AAAA,SAAA,EAAA,CAAAY,WAAA,CAAA,MAAA,EAAA;UAAA,OAE3E,EAAA,CAAC,aAAa;iBACd,EAAA;YACLC,YAAY,KAAK,CAAAX,KAAAA;AACnB,WAAA;AAAA,SAAA,EAAA,IAAA,CAAA,CAAA,CAAA,CAAA;AAIR,OAAA;KACF,CAAA;AAEE,IAAA,OAAAU,WAAA,CAAA,KAAA,EAAA;AAAA,MAAA,OAAA,EAAA,EAAA,CAAA,MAAA,CAAeZ;KAEP,EAAA,CAAAY,WAAA,CAAAE,KAAA,EAAAC,UAAA,CAAA,KAAKrB,UACT,EAAA;MAAA,YACS,EAAA,KAAA,CAAKQ;;eAAL,KAAA,CAAKA;;gBACJ,EAAA,IAAA,CAAKV;gBACP,IAAA,CAAKa,YAAAA;AACf,KAAA,CAAA,EAJWK;AAOjB,GAAA;AACF,CAAC,CAAA;;;;"}