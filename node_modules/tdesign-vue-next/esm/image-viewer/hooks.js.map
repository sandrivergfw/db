{"version":3,"file":"hooks.js","sources":["../../src/image-viewer/hooks.ts"],"sourcesContent":["import { ref } from 'vue';\nimport { ImageScale } from './type';\n\ninterface InitTransform {\n  translateX: number;\n  translateY: number;\n}\n\nexport function useDrag(initTransform: InitTransform) {\n  const transform = ref(initTransform);\n\n  const mouseDownHandler = (e: MouseEvent) => {\n    const { pageX: startX, pageY: startY } = e;\n    const { translateX, translateY } = transform.value;\n    const mouseMoveHandler = (e: MouseEvent) => {\n      const { pageX, pageY } = e;\n      transform.value = {\n        translateX: translateX + pageX - startX,\n        translateY: translateY + pageY - startY,\n      };\n    };\n    const mouseUpHandler = () => {\n      document.removeEventListener('mousemove', mouseMoveHandler);\n      document.removeEventListener('mouseup', mouseUpHandler);\n    };\n\n    document.addEventListener('mousemove', mouseMoveHandler);\n    document.addEventListener('mouseup', mouseUpHandler);\n  };\n\n  const resetTransform = () => {\n    transform.value = { ...initTransform };\n  };\n\n  return { transform, mouseDownHandler, resetTransform };\n}\n\nexport function useMirror() {\n  const mirror = ref(1);\n  const onMirror = () => {\n    mirror.value *= -1;\n  };\n  const resetMirror = () => {\n    mirror.value = 1;\n  };\n\n  return { mirror, onMirror, resetMirror };\n}\n\nexport function useScale(imageScale: ImageScale = { max: 2, min: 0.5, step: 0.5 }) {\n  const { max, min, step } = imageScale;\n  const scale = ref(1);\n  const onZoomIn = () => {\n    setScale(scale.value + step);\n  };\n  const onZoomOut = () => {\n    setScale(scale.value - step);\n  };\n  const resetScale = () => {\n    scale.value = 1;\n  };\n\n  const setScale = (newScale: number) => {\n    let value = newScale;\n    if (newScale < min) {\n      value = min;\n    }\n    if (newScale > max) {\n      value = max;\n    }\n    scale.value = value;\n  };\n\n  return { scale, onZoomIn, onZoomOut, resetScale };\n}\n\nexport function useRotate() {\n  const rotate = ref(0);\n  const ROTATE_DEG = 90;\n\n  const onRotate = () => {\n    rotate.value += ROTATE_DEG;\n  };\n  const resetRotate = () => {\n    rotate.value = 0;\n  };\n\n  return { rotate, onRotate, resetRotate };\n}\n"],"names":["useDrag","initTransform","transform","ref","mouseDownHandler","e","startX","pageX","startY","pageY","value","translateX","translateY","mouseMoveHandler","mouseUpHandler","document","removeEventListener","addEventListener","resetTransform","useMirror","mirror","onMirror","resetMirror","useScale","imageScale","max","min","step","scale","onZoomIn","setScale","onZoomOut","resetScale","newScale","useRotate","rotate","ROTATE_DEG","onRotate","resetRotate"],"mappings":"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"}