{"version":3,"file":"useVModel.js","sources":["../../src/hooks/useVModel.ts"],"sourcesContent":["import { ref, Ref, getCurrentInstance } from 'vue';\nimport kebabCase from 'lodash/kebabCase';\n\nexport type ChangeHandler<T> = (value: T, ...args: any) => void;\n\nexport default function useVModel<T, P extends (...args: any) => void>(\n  value: Ref<T>,\n  modelValue: Ref<T>,\n  defaultValue: T,\n  onChange: P,\n  propName = 'value',\n): [Ref<T>, ChangeHandler<T>] {\n  const { emit, vnode } = getCurrentInstance();\n  const internalValue: Ref<T> = ref();\n\n  const vProps = vnode.props || {};\n  const isVM =\n    Object.prototype.hasOwnProperty.call(vProps, 'modelValue') ||\n    Object.prototype.hasOwnProperty.call(vProps, 'model-value');\n  const isVMP =\n    Object.prototype.hasOwnProperty.call(vProps, propName) ||\n    Object.prototype.hasOwnProperty.call(vProps, kebabCase(propName));\n\n  if (isVM) {\n    return [\n      modelValue,\n      (newValue, ...args) => {\n        emit('update:modelValue', newValue);\n        onChange?.(newValue, ...args);\n      },\n    ];\n  }\n\n  if (isVMP) {\n    return [\n      value,\n      (newValue, ...args) => {\n        emit(`update:${propName}`, newValue);\n        onChange?.(newValue, ...args);\n      },\n    ];\n  }\n\n  internalValue.value = defaultValue;\n  return [\n    internalValue,\n    (newValue, ...args) => {\n      internalValue.value = newValue;\n      onChange?.(newValue, ...args);\n    },\n  ];\n}\n"],"names":["useVModel","value","modelValue","defaultValue","onChange","propName","getCurrentInstance","emit","vnode","internalValue","ref","vProps","props","isVM","Object","prototype","hasOwnProperty","call","isVMP","kebabCase","newValue","args"],"mappings":"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"}