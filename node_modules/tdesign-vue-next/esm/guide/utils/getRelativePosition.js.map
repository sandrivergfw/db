{"version":3,"file":"getRelativePosition.js","sources":["../../../src/guide/utils/getRelativePosition.ts"],"sourcesContent":["import { getElmCssPropValue, isFixed, getWindowScroll } from '../../utils/dom';\n\n/**\n * 获取元素相对于另一个元素的位置（或者说相对于 body）\n * 感谢 `meouw`: http://stackoverflow.com/a/442474/375966\n */\nexport default function getRelativePosition(elm: HTMLElement, relativeElm: HTMLElement = document.body) {\n  const { scrollTop, scrollLeft } = getWindowScroll();\n  const { top: elmTop, left: elmLeft } = elm.getBoundingClientRect();\n  const { top: relElmTop, left: relElmLeft } = relativeElm.getBoundingClientRect();\n  const relativeElmPosition = getElmCssPropValue(relativeElm, 'position');\n\n  if (\n    (relativeElm.tagName.toLowerCase() !== 'body' && relativeElmPosition === 'relative') ||\n    relativeElmPosition === 'sticky'\n  ) {\n    return {\n      top: elmTop - relElmTop,\n      left: elmLeft - relElmLeft,\n    };\n  }\n\n  if (isFixed(elm)) {\n    return {\n      top: elmTop,\n      left: elmLeft,\n    };\n  }\n\n  return {\n    top: elmTop + scrollTop,\n    left: elmLeft + scrollLeft,\n  };\n}\n"],"names":["getRelativePosition","elm","relativeElm","document","body","getWindowScroll","scrollTop","scrollLeft","getBoundingClientRect","elmTop","top","elmLeft","left","relElmTop","relElmLeft","relativeElmPosition","getElmCssPropValue","tagName","toLowerCase","isFixed"],"mappings":";;;;;;;;;;;AAMA,SAAwBA,mBAAoB,CAAAC,GAAA,EAA4D;AAAA,EAAA,IAA1CC,WAA2B,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAAC,QAAA,CAASC,IAAM,CAAA;AACtG,EAAA,IAAA,gBAAA,GAAkCC,eAAgB,EAAA;AAA1CC,IAAAA,SAAA,oBAAAA,SAAA;AAAWC,IAAAA,UAAW,oBAAXA,UAAW,CAAA;EAC9B,IAAuCN,qBAAAA,GAAAA,IAAIO,qBAAsB,EAAA;AAApDC,IAAAA,MAAA,yBAALC,GAAK;AAAcC,IAAAA,OAAQ,yBAAdC;EACrB,IAA6CV,qBAAAA,GAAAA,YAAYM,qBAAsB,EAAA;AAAlEK,IAAAA,SAAA,yBAALH,GAAK;AAAiBI,IAAAA,UAAW,yBAAjBF;AAClB,EAAA,IAAAG,mBAAA,GAAsBC,kBAAmB,CAAAd,WAAA,EAAa,UAAU,CAAA,CAAA;AAGnE,EAAA,IAAAA,WAAA,CAAYe,QAAQC,WAAY,EAAA,KAAM,UAAUH,mBAAwB,KAAA,UAAA,IACzEA,wBAAwB,QACxB,EAAA;IACO,OAAA;MACLL,KAAKD,MAAS,GAAAI,SAAA;MACdD,MAAMD,OAAU,GAAAG,UAAAA;KAClB,CAAA;AACF,GAAA;AAEI,EAAA,IAAAK,OAAA,CAAQlB,GAAG,CAAG,EAAA;IACT,OAAA;AACLS,MAAAA,GAAK,EAAAD,MAAA;AACLG,MAAAA,IAAM,EAAAD,OAAAA;KACR,CAAA;AACF,GAAA;EAEO,OAAA;IACLD,KAAKD,MAAS,GAAAH,SAAA;IACdM,MAAMD,OAAU,GAAAJ,UAAAA;GAClB,CAAA;AACF;;;;"}