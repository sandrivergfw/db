{"version":3,"file":"useUpload.js","sources":["../../../src/upload/hooks/useUpload.ts"],"sourcesContent":["import { ref, computed, toRefs } from 'vue';\nimport merge from 'lodash/merge';\nimport { SizeLimitObj, TdUploadProps, UploadChangeContext, UploadFile, UploadRemoveContext } from '../type';\nimport {\n  getFilesAndErrors,\n  validateFile,\n  upload,\n  getTriggerTextField,\n  getDisplayFiles,\n} from '../../_common/js/upload/main';\nimport { getFileUrlByFileRaw } from '../../_common/js/upload/utils';\nimport useVModel from '../../hooks/useVModel';\nimport { InnerProgressContext, OnResponseErrorContext, SuccessContext } from '../../_common/js/upload/types';\nimport { useConfig } from '../../hooks/useConfig';\n\n/**\n * 上传组件全部逻辑，方便脱离 UI，自定义 UI 组件\n */\nexport default function useUpload(props: TdUploadProps) {\n  const inputRef = ref<HTMLInputElement>();\n  // TODO: Form 表单控制上传组件是否禁用\n  const { disabled, autoUpload, isBatchUpload, multiple, files, modelValue, defaultFiles } = toRefs(props);\n  const { globalConfig, t, classPrefix } = useConfig('upload');\n  const [uploadValue, setUploadValue] = useVModel(files, modelValue, defaultFiles.value, props.onChange, 'files');\n  const xhrReq = ref<{ files: UploadFile[]; xhrReq: XMLHttpRequest }[]>([]);\n  const toUploadFiles = ref<UploadFile[]>([]);\n  const sizeOverLimitMessage = ref('');\n\n  const locale = computed(() => merge({}, globalConfig.value, props.locale));\n\n  const tipsClasses = `${classPrefix.value}-upload__tips ${classPrefix.value}-size-s`;\n  const errorClasses = [tipsClasses].concat(`${classPrefix.value}-upload__tips-error`);\n\n  // 单文件场景：触发元素文本\n  const triggerUploadText = computed(() => {\n    const field = getTriggerTextField({\n      isBatchUpload: isBatchUpload.value,\n      multiple: multiple.value,\n      status: uploadValue.value?.[0]?.status,\n      autoUpload: autoUpload.value,\n    });\n    return locale.value.triggerUploadText[field];\n  });\n\n  const uploading = ref(false);\n\n  // 文件列表显示的内容（自动上传和非自动上传有所不同）\n  const displayFiles = computed(() => {\n    return getDisplayFiles({\n      multiple: props.multiple,\n      toUploadFiles: toUploadFiles.value,\n      uploadValue: uploadValue.value,\n      autoUpload: autoUpload.value,\n      isBatchUpload: isBatchUpload.value,\n    });\n  });\n\n  const updateFilesProgress = () => {\n    if (props.autoUpload) {\n      toUploadFiles.value = [...toUploadFiles.value];\n    }\n  };\n\n  const onResponseError = (p: OnResponseErrorContext) => {\n    if (!p || !p.files || !p.files[0]) return;\n    const { response, event, files } = p;\n    updateFilesProgress();\n    props.onOneFileFail?.({\n      e: event,\n      file: files?.[0],\n      currentFiles: files,\n      failedFiles: files,\n      response,\n    });\n    // 单选或多文件替换，需要清空上一次上传成功的文件\n    if (!props.multiple || props.isBatchUpload) {\n      setUploadValue([], {\n        trigger: 'progress-fail',\n        e: p.event,\n        file: p.files[0],\n      });\n    }\n  };\n\n  // 多文件上传场景，单个文件进度\n  const onResponseProgress = (p: InnerProgressContext) => {\n    updateFilesProgress();\n    props.onProgress?.({\n      e: p.event,\n      file: p.file,\n      currentFiles: p.files,\n      percent: p.percent,\n      type: p.type,\n    });\n  };\n\n  // 多文件上传场景，单个文件上传成功后\n  const onResponseSuccess = (p: SuccessContext) => {\n    // 只有多个上传请求同时触发时才需 onOneFileSuccess\n    if (props.multiple && !props.uploadAllFilesInOneRequest) {\n      updateFilesProgress();\n      props.onOneFileSuccess?.({\n        e: p.event,\n        file: p.files[0],\n        response: p.response,\n      });\n    }\n  };\n\n  function getSizeLimitError(sizeLimitObj: SizeLimitObj) {\n    const limit = sizeLimitObj;\n    return limit.message\n      ? t(limit.message, { sizeLimit: limit.size })\n      : `${t(locale.value.sizeLimitMessage, { sizeLimit: limit.size })} ${limit.unit}`;\n  }\n\n  const handleNonAutoUpload = (toFiles: UploadFile[]) => {\n    // isBatchUpload 场景下，只要没有上传过，就不需要整体替换。只有上传过的文件才需要整体替换\n    const tmpFiles =\n      props.multiple && !(isBatchUpload.value && uploadValue.value[0]?.status === 'success')\n        ? uploadValue.value.concat(toFiles)\n        : toFiles;\n    // 图片需要本地预览\n    if (['image', 'image-flow'].includes(props.theme)) {\n      const list = tmpFiles.map(\n        (file) =>\n          new Promise((resolve) => {\n            getFileUrlByFileRaw(file.raw).then((url) => {\n              resolve({ ...file, url });\n            });\n          }),\n      );\n      Promise.all(list).then((files) => {\n        setUploadValue(files, {\n          trigger: 'add',\n          index: uploadValue.value.length,\n          file: files[0],\n        });\n      });\n    } else {\n      setUploadValue(tmpFiles, {\n        trigger: 'add',\n        index: uploadValue.value.length,\n        file: tmpFiles[0],\n      });\n    }\n    toUploadFiles.value = [];\n  };\n\n  const onFileChange = (files: FileList) => {\n    if (disabled.value) return;\n    // @ts-ignore\n    props.onSelectChange?.([...files], { currentSelectedFiles: toUploadFiles });\n    validateFile({\n      uploadValue: uploadValue.value,\n      // @ts-ignore\n      files: [...files],\n      allowUploadDuplicateFile: props.allowUploadDuplicateFile,\n      max: props.max,\n      sizeLimit: props.sizeLimit,\n      isBatchUpload: isBatchUpload.value,\n      autoUpload: autoUpload.value,\n      format: props.format,\n      beforeUpload: props.beforeUpload,\n      beforeAllFilesUpload: props.beforeAllFilesUpload,\n    }).then((args) => {\n      // 自定义全文件校验不通过\n      if (args.validateResult?.type === 'BEFORE_ALL_FILES_UPLOAD') return;\n      // 文件数量校验不通过\n      if (args.lengthOverLimit) {\n        props.onValidate?.({ type: 'FILES_OVER_LENGTH_LIMIT', files: args.files });\n      }\n      // 过滤相同的文件名\n      if (args.hasSameNameFile) {\n        props.onValidate?.({ type: 'FILTER_FILE_SAME_NAME', files: args.files });\n      }\n      // 文件大小校验结果处理\n      if (args.fileValidateList instanceof Array) {\n        const { sizeLimitErrors, toFiles } = getFilesAndErrors(args.fileValidateList, getSizeLimitError);\n        const tmpWaitingFiles = autoUpload.value ? toFiles : toUploadFiles.value.concat(toFiles);\n        toUploadFiles.value = tmpWaitingFiles;\n        props.onWaitingUploadFilesChange?.({ files: tmpWaitingFiles, trigger: 'validate' });\n        // 错误信息处理\n        if (sizeLimitErrors[0]) {\n          sizeOverLimitMessage.value = sizeLimitErrors[0].file.response.error;\n          props.onValidate?.({ type: 'FILE_OVER_SIZE_LIMIT', files: sizeLimitErrors.map((t) => t.file) });\n        } else {\n          sizeOverLimitMessage.value = '';\n        }\n        // 如果是自动上传\n        if (autoUpload.value) {\n          uploadFiles(tmpWaitingFiles);\n        } else {\n          handleNonAutoUpload(tmpWaitingFiles);\n        }\n      }\n    });\n\n    // 清空 <input type=\"file\"> 元素的文件，避免出现重复文件无法选择的情况\n    inputRef.value.value = null;\n  };\n\n  const onNormalFileChange = (e: Event) => {\n    onFileChange?.((e.target as HTMLInputElement).files);\n  };\n\n  function onDragFileChange(e: DragEvent) {\n    onFileChange?.(e.dataTransfer.files);\n  }\n\n  /**\n   * 上传文件\n   * 对外暴露方法，修改时需谨慎\n   */\n  function uploadFiles(toFiles?: UploadFile[]) {\n    const notUploadedFiles = uploadValue.value.filter((t) => t.status !== 'success');\n    const files = autoUpload.value ? toFiles || toUploadFiles.value : notUploadedFiles;\n    if (!files || !files.length) return;\n    uploading.value = true;\n    xhrReq.value = [];\n    upload({\n      action: props.action,\n      headers: props.headers,\n      name: props.name,\n      withCredentials: props.withCredentials,\n      uploadedFiles: uploadValue.value,\n      toUploadFiles: files,\n      multiple: props.multiple,\n      isBatchUpload: isBatchUpload.value,\n      autoUpload: props.autoUpload,\n      uploadAllFilesInOneRequest: props.uploadAllFilesInOneRequest,\n      useMockProgress: props.useMockProgress,\n      data: props.data,\n      requestMethod: props.requestMethod,\n      formatRequest: props.formatRequest,\n      formatResponse: props.formatResponse,\n      onResponseProgress,\n      onResponseSuccess,\n      onResponseError,\n      setXhrObject: (xhr) => {\n        if (xhr.files[0]?.raw && xhrReq.value.find((item) => item.files[0]?.raw === xhr.files[0].raw)) return;\n        xhrReq.value = xhrReq.value.concat(xhr);\n      },\n    }).then(\n      // 多文件场景时，全量文件完成后\n      ({ status, data, list, failedFiles }) => {\n        uploading.value = false;\n        if (status === 'success') {\n          if (props.autoUpload) {\n            setUploadValue([...data.files], {\n              trigger: 'add',\n              file: data.files[0],\n            });\n          }\n          props.onSuccess?.({\n            fileList: data.files,\n            currentFiles: files,\n            file: files[0],\n            // 只有全部请求完成后，才会存在该字段\n            results: list?.map((t) => t.data),\n            // 单文件单请求有一个 response，多文件多请求有多个 response\n            response: data.response || list.map((t) => t.data.response),\n          });\n          xhrReq.value = [];\n        } else if (failedFiles?.[0]) {\n          props.onFail?.({\n            e: data.event,\n            file: failedFiles[0],\n            failedFiles,\n            currentFiles: files,\n            response: data.response,\n          });\n        }\n\n        // 非自动上传，文件都在 uploadValue，不涉及 toUploadFiles\n        if (autoUpload.value) {\n          toUploadFiles.value = failedFiles;\n          props.onWaitingUploadFilesChange?.({ files: failedFiles, trigger: 'uploaded' });\n        }\n      },\n      (p) => {\n        onResponseError(p);\n        uploading.value = false;\n      },\n    );\n  }\n\n  function onInnerRemove(p: UploadRemoveContext) {\n    sizeOverLimitMessage.value = '';\n    p.e.stopPropagation?.();\n    const changePrams: UploadChangeContext = {\n      e: p.e,\n      trigger: 'remove',\n      index: p.index,\n      file: p.file,\n    };\n    // remove all files for batchUpload\n    if (props.isBatchUpload || !props.multiple) {\n      toUploadFiles.value = [];\n      props.onWaitingUploadFilesChange?.({ files: [], trigger: 'remove' });\n      setUploadValue([], changePrams);\n    } else if (!props.autoUpload) {\n      uploadValue.value.splice(p.index, 1);\n      setUploadValue([...uploadValue.value], changePrams);\n    } else {\n      // eslint-disable-next-line\n      if (p.index < uploadValue.value.length) {\n        uploadValue.value.splice(p.index, 1);\n        setUploadValue([...uploadValue.value], changePrams);\n      } else {\n        toUploadFiles.value.splice(p.index - uploadValue.value.length, 1);\n        toUploadFiles.value = [...toUploadFiles.value];\n        props.onWaitingUploadFilesChange?.({ files: [...toUploadFiles.value], trigger: 'remove' });\n      }\n    }\n    props.onRemove?.(p);\n  }\n\n  const triggerUpload = (e?: MouseEvent) => {\n    if (disabled.value) return;\n    e?.stopPropagation?.();\n    (inputRef.value as HTMLInputElement).click();\n  };\n\n  const cancelUpload = (context?: { file?: UploadFile; e?: MouseEvent }) => {\n    xhrReq.value?.forEach((item) => {\n      item.xhrReq?.abort();\n    });\n    uploading.value = false;\n\n    if (autoUpload.value) {\n      toUploadFiles.value = toUploadFiles.value.map((item) => ({ ...item, status: 'waiting' }));\n    } else {\n      setUploadValue(\n        uploadValue.value.map((item) => {\n          if (item.status !== 'success') {\n            return { ...item, status: 'waiting' };\n          }\n          return item;\n        }),\n        { trigger: 'abort' },\n      );\n    }\n\n    if (context?.file) {\n      onInnerRemove?.({ file: context.file, e: context.e, index: 0 });\n    }\n  };\n\n  return {\n    t,\n    locale,\n    classPrefix,\n    triggerUploadText,\n    toUploadFiles,\n    uploadValue,\n    displayFiles,\n    sizeOverLimitMessage,\n    uploading,\n    tipsClasses,\n    errorClasses,\n    inputRef,\n    disabled,\n    xhrReq,\n    uploadFiles,\n    onFileChange,\n    onNormalFileChange,\n    onDragFileChange,\n    onInnerRemove,\n    triggerUpload,\n    cancelUpload,\n  };\n}\n"],"names":["useUpload","props","inputRef","ref","toRefs","disabled","autoUpload","isBatchUpload","multiple","files","modelValue","defaultFiles","useConfig","globalConfig","t","classPrefix","useVModel","value","onChange","uploadValue","setUploadValue","xhrReq","toUploadFiles","sizeOverLimitMessage","locale","computed","merge","tipsClasses","errorClasses","concat","triggerUploadText","field","getTriggerTextField","status","uploading","displayFiles","getDisplayFiles","updateFilesProgress","onResponseError","p","response","event","onOneFileFail","e","file","currentFiles","failedFiles","trigger","onResponseProgress","onProgress","percent","type","onResponseSuccess","uploadAllFilesInOneRequest","onOneFileSuccess","getSizeLimitError","sizeLimitObj","limit","message","sizeLimit","size","sizeLimitMessage","unit","handleNonAutoUpload","toFiles","tmpFiles","includes","theme","list","map","Promise","resolve","getFileUrlByFileRaw","raw","then","url","all","index","length","onFileChange","onSelectChange","currentSelectedFiles","validateFile","allowUploadDuplicateFile","max","format","beforeUpload","beforeAllFilesUpload","args","validateResult","lengthOverLimit","onValidate","hasSameNameFile","fileValidateList","Array","getFilesAndErrors","sizeLimitErrors","tmpWaitingFiles","onWaitingUploadFilesChange","error","uploadFiles","onNormalFileChange","target","onDragFileChange","dataTransfer","notUploadedFiles","filter","upload","action","headers","name","withCredentials","uploadedFiles","useMockProgress","data","requestMethod","formatRequest","formatResponse","setXhrObject","xhr","find","item","onSuccess","fileList","results","onFail","onInnerRemove","stopPropagation","changePrams","splice","onRemove","triggerUpload","click","cancelUpload","context","forEach","abort"],"mappings":"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"}