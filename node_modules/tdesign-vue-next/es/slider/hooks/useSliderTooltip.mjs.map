{"version":3,"file":"useSliderTooltip.mjs","sources":["../../../src/slider/hooks/useSliderTooltip.tsx"],"sourcesContent":["import { TooltipProps } from '@src/tooltip';\nimport { ref, computed, ComputedRef, Ref } from 'vue';\nimport { TdSliderProps } from '../type';\nimport { formatLabel } from '../util/common';\n\nconst initialProps: TooltipProps & { overlayClassName: string } = {\n  visible: false,\n  trigger: 'hover',\n  showArrow: true,\n  overlayInnerStyle: undefined,\n  overlayClassName: undefined,\n  attach: 'body',\n  theme: 'default',\n};\n\nexport interface TooltipConfig {\n  tooltipProps: boolean | TooltipProps;\n  vertical: boolean;\n  value: number;\n  label: TdSliderProps['label'];\n}\n\n/**\n * 聚合管理滑块tooltip内容hook\n * @param tooltipProps tooltip属性配置\n * @param vertical 是否垂直展示\n * @returns\n */\nexport const useSliderTooltip = (tooltipConfig: Ref<TooltipConfig>) => {\n  const tooltipRef = ref();\n  const showTooltip = computed({\n    get() {\n      return !tooltipConfig.value.tooltipProps === false;\n    },\n    set(val) {\n      return val;\n    },\n  });\n  const normalizeProps = ref<TooltipProps & { overlayClassName: string }>({ ...initialProps });\n  /** 开关显示tooltip */\n  const toggleTooltip = (toState: boolean) => {\n    if (!showTooltip.value) return;\n    normalizeProps.value.visible = toState;\n  };\n\n  /** 合并最终tooltip属性，以外部同名属性覆盖初始化属性 */\n  const validProps = computed(() => {\n    const { vertical, tooltipProps, label, value } = tooltipConfig.value;\n    const placement = vertical ? 'right' : 'top';\n    const content = formatLabel(label, value);\n    if (tooltipProps instanceof Object) {\n      if (!tooltipProps?.placement) {\n        normalizeProps.value.placement = placement;\n      }\n      // @ts-ignore\n      return { ...normalizeProps.value, ...tooltipProps, content };\n    }\n    return { ...normalizeProps.value, placement, content };\n  });\n\n  return {\n    tooltipRef,\n    tooltipProps: validProps as ComputedRef<TdSliderProps['tooltipProps']>,\n    toggleTooltip,\n    showTooltip,\n  };\n};\n"],"names":["initialProps","visible","trigger","showArrow","overlayInnerStyle","overlayClassName","attach","theme","useSliderTooltip","tooltipConfig","tooltipRef","ref","showTooltip","computed","get","value","tooltipProps","set","val","normalizeProps","toggleTooltip","toState","validProps","vertical","label","placement","content","formatLabel","Object"],"mappings":";;;;;;;;;;;;AAKA,IAAMA,YAA4D,GAAA;AAChEC,EAAAA,OAAS,EAAA,KAAA;AACTC,EAAAA,OAAS,EAAA,OAAA;AACTC,EAAAA,SAAW,EAAA,IAAA;EACXC,iBAAmB,EAAA,KAAA,CAAA;EACnBC,gBAAkB,EAAA,KAAA,CAAA;AAClBC,EAAAA,MAAQ,EAAA,MAAA;AACRC,EAAAA,KAAO,EAAA,SAAA;AACT,CAAA,CAAA;IAeaC,gBAAA,GAAmB,SAAnBA,gBAAA,CAAoBC,aAAsC,EAAA;EACrE,IAAMC,aAAaC,GAAI,EAAA,CAAA;EACvB,IAAMC,cAAcC,QAAS,CAAA;AAC3BC,IAAAA,GAAM,EAAA,SAAA,GAAA,GAAA;AACG,MAAA,OAAA,CAACL,aAAc,CAAAM,KAAA,CAAMC,YAAiB,KAAA,KAAA,CAAA;KAC/C;IACAC,kBAAIC,GAAK,EAAA;AACA,MAAA,OAAAA,GAAA,CAAA;AACT,KAAA;AACF,GAAC,CAAA,CAAA;AACD,EAAA,IAAMC,cAAiB,GAAAR,GAAA,CAAA,aAAA,CAAA,EAAA,EAAsDX,aAAc,CAAA,CAAA;AAErF,EAAA,IAAAoB,aAAA,GAAgB,SAAhBA,aAAA,CAAiBC,OAAqB,EAAA;AAC1C,IAAA,IAAI,CAACT,WAAY,CAAAG,KAAA,EAAO,OAAA;AACxBI,IAAAA,cAAA,CAAeJ,MAAMd,OAAU,GAAAoB,OAAA,CAAA;GACjC,CAAA;AAGM,EAAA,IAAAC,UAAA,GAAaT,SAAS,YAAM;IAChC,IAAiDJ,oBAAAA,GAAAA,aAAc,CAAAM,KAAA;AAAvDQ,MAAAA,QAAU,wBAAVA,QAAU;AAAAP,MAAAA,YAAA,wBAAAA,YAAA;AAAcQ,MAAAA,KAAO,wBAAPA,KAAO;AAAAT,MAAAA,KAAA,wBAAAA,KAAA,CAAA;AACjC,IAAA,IAAAU,SAAA,GAAYF,WAAW,OAAU,GAAA,KAAA,CAAA;AACjC,IAAA,IAAAG,OAAA,GAAUC,WAAY,CAAAH,KAAA,EAAOT,KAAK,CAAA,CAAA;IACxC,IAAIC,wBAAwBY,MAAQ,EAAA;MAC9B,IAAA,EAACZ,iBAAAA,IAAAA,IAAAA,2BAAAA,aAAcS,SAAW,CAAA,EAAA;AAC5BN,QAAAA,cAAA,CAAeJ,MAAMU,SAAY,GAAAA,SAAA,CAAA;AACnC,OAAA;AAEA,MAAA,OAAA,aAAA,CAAA,aAAA,CAAA,aAAA,CAAA,EAAA,EAAYN,cAAA,CAAeJ,KAAO,CAAA,EAAGC;AAAcU,QAAAA,OAAQ,EAARA,OAAAA;AAAQ,OAAA,CAAA,CAAA;AAC7D,KAAA;IACA,OAAYP,aAAAA,CAAAA,aAAAA,CAAAA,EAAAA,EAAAA,cAAe,CAAAJ,KAAA,CAAA,EAAA,EAAA,EAAA;AAAOU,MAAAA,WAAAA;AAAWC,MAAAA,OAAQ,EAARA,OAAAA;AAAQ,KAAA,CAAA,CAAA;AACvD,GAAC,CAAA,CAAA;EAEM,OAAA;AACLhB,IAAAA,UAAA,EAAAA,UAAA;AACAM,IAAAA,YAAc,EAAAM,UAAA;AACdF,IAAAA,aAAA,EAAAA,aAAA;AACAR,IAAAA,WAAA,EAAAA,WAAAA;GACF,CAAA;AACF;;;;"}