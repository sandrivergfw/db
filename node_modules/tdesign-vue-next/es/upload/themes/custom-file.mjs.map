{"version":3,"file":"custom-file.mjs","sources":["../../../src/upload/themes/custom-file.tsx"],"sourcesContent":["import { defineComponent, PropType, h, toRefs } from 'vue';\nimport useDrag, { UploadDragEvents } from '../hooks/useDrag';\nimport { CommonDisplayFileProps } from '../interface';\nimport { commonProps } from '../constants';\nimport { useContent } from '../../hooks/tnode';\nimport { TdUploadProps } from '../type';\n\nexport interface CustomFileProps extends CommonDisplayFileProps {\n  dragEvents: UploadDragEvents;\n  draggable?: boolean;\n  // 拖拽区域\n  dragContent?: TdUploadProps['dragContent'];\n  trigger?: TdUploadProps['trigger'];\n  triggerUpload?: (e: MouseEvent) => void;\n  childrenNode?: any;\n}\n\nexport default defineComponent({\n  name: 'UploadCustomFile',\n\n  props: {\n    ...commonProps,\n    dragEvents: Object as PropType<CustomFileProps['dragEvents']>,\n    draggable: Boolean,\n    // 拖拽区域\n    dragContent: Function as PropType<CustomFileProps['dragContent']>,\n    trigger: Function as PropType<CustomFileProps['trigger']>,\n    triggerUpload: Function as PropType<CustomFileProps['triggerUpload']>,\n    childrenNode: [String, Function] as PropType<CustomFileProps['childrenNode']>,\n  },\n\n  setup(props: CustomFileProps, { slots }) {\n    const { classPrefix, displayFiles } = toRefs(props);\n    const drag = useDrag(props.dragEvents);\n    const { dragActive } = drag;\n\n    const renderContent = useContent();\n\n    const renderDragContent = () => {\n      const params = { dragActive: dragActive.value, files: displayFiles.value };\n      return (\n        <div\n          class={`${classPrefix.value}-upload__dragger ${classPrefix.value}-upload__dragger-center`}\n          onDrop={drag.handleDrop}\n          onDragenter={drag.handleDragenter}\n          onDragover={drag.handleDragover}\n          onDragleave={drag.handleDragleave}\n          onClick={props.triggerUpload}\n        >\n          <div class={`${classPrefix.value}-upload__trigger`}>\n            {renderContent('dragContent', 'trigger', { params }) || props.childrenNode?.(params)}\n          </div>\n        </div>\n      );\n    };\n\n    return () => (\n      <>\n        {props.draggable ? (\n          renderDragContent()\n        ) : (\n          <div class={`${classPrefix.value}-upload__trigger`} onClick={props.triggerUpload}>\n            {props.childrenNode?.({ files: displayFiles.value }) || slots.default?.()}\n          </div>\n        )}\n      </>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","commonProps","dragEvents","Object","draggable","Boolean","dragContent","Function","trigger","triggerUpload","childrenNode","String","setup","slots","toRefs","classPrefix","displayFiles","drag","useDrag","dragActive","renderContent","useContent","renderDragContent","params","value","files","_createVNode","handleDrop","handleDragenter","handleDragover","handleDragleave","_Fragment"],"mappings":"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"}