{"version":3,"file":"tree-select.mjs","sources":["../../src/tree-select/tree-select.tsx"],"sourcesContent":["import { defineComponent, ref, reactive, computed, watch, onMounted, toRefs } from 'vue';\nimport isArray from 'lodash/isArray';\nimport isEmpty from 'lodash/isEmpty';\nimport isBoolean from 'lodash/isBoolean';\nimport isFunction from 'lodash/isFunction';\nimport isNil from 'lodash/isNil';\n\nimport Tree, { TreeProps, TreeNodeModel, TreeNodeValue } from '../tree';\nimport SelectInput from '../select-input';\nimport { TagInputChangeContext } from '../tag-input';\nimport { InputValue } from '../input';\nimport FakeArrow from '../common-components/fake-arrow';\n\nimport { INodeOptions } from './interface';\nimport { TreeSelectValue, TdTreeSelectProps, TreeSelectValueChangeTrigger } from './type';\nimport { TreeOptionData } from '../common';\nimport props from './props';\n\n// hooks\nimport { usePrefixClass, useConfig } from '../hooks/useConfig';\nimport { useFormDisabled } from '../form/hooks';\nimport { useTNodeJSX, useTNodeDefault } from '../hooks/tnode';\nimport useVModel from '../hooks/useVModel';\nimport useDefaultValue from '../hooks/useDefaultValue';\n\nexport default defineComponent({\n  name: 'TTreeSelect',\n  props,\n  setup(props: TdTreeSelectProps, { slots }) {\n    const renderTNodeJSX = useTNodeJSX();\n    const renderDefaultTNode = useTNodeDefault();\n    const classPrefix = usePrefixClass();\n    const { globalConfig } = useConfig('treeSelect');\n    const formDisabled = useFormDisabled();\n\n    // ref\n    const treeRef = ref(null);\n\n    // data\n    const filterByText = ref(null);\n    const actived = ref([]);\n    const expanded = ref([]);\n    const nodeInfo = ref(null);\n    const treeKey = ref(0);\n\n    // model\n    const { value, modelValue, popupVisible, inputValue } = toRefs(props);\n    const [treeSelectValue, setTreeSelectValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n    const [innerVisible, setInnerVisible] = useDefaultValue(\n      popupVisible,\n      false,\n      props.onPopupVisibleChange,\n      'popupVisible',\n    );\n    const [innerInputValue, setInnerInputValue] = useDefaultValue(\n      inputValue,\n      props.defaultInputValue,\n      props.onInputChange,\n      'inputValue',\n    );\n\n    // watch\n    watch(treeSelectValue, async () => {\n      await changeNodeInfo();\n      if (!props.multiple) {\n        actived.value = nodeInfo.value ? [nodeInfo.value.value] : [];\n      }\n    });\n    watch(\n      () => props.data,\n      async () => {\n        await changeNodeInfo();\n        treeRerender();\n      },\n    );\n\n    // computed\n    const tDisabled = computed(() => {\n      return formDisabled.value || props.disabled;\n    });\n\n    const inputPlaceholder = computed(\n      () => (innerVisible.value && nodeInfo.value?.label) || props.placeholder || globalConfig.value.placeholder,\n    );\n\n    const popupClass = computed(() => {\n      return [`${classPrefix.value}-select__dropdown`, 'narrow-scrollbar'];\n    });\n\n    const dropdownInnerSize = computed(() => {\n      return {\n        small: 's',\n        medium: 'm',\n        large: 'l',\n      }[props.size];\n    });\n\n    const isObjectValue = computed(() => props.valueType === 'object');\n\n    const checked = computed((): Array<TreeNodeValue> => {\n      if (props.multiple) {\n        if (isObjectValue.value) {\n          return isArray(treeSelectValue.value)\n            ? (treeSelectValue.value as Array<TreeSelectValue>).map((item) => (item as INodeOptions).value)\n            : [];\n        }\n        return isArray(treeSelectValue.value)\n          ? (treeSelectValue.value as Array<TreeSelectValue>).map((item) => item as TreeNodeValue)\n          : [];\n      }\n      return [];\n    });\n\n    const multiLimitDisabled = computed(() => {\n      return (\n        props.multiple &&\n        !!props.max &&\n        isArray(treeSelectValue.value) &&\n        props.max <= (treeSelectValue.value as Array<TreeSelectValue>).length\n      );\n    });\n\n    const realLabel = computed(() => {\n      if (!isEmpty(props.treeProps) && !isEmpty((props.treeProps as TreeProps).keys)) {\n        return (props.treeProps as TreeProps).keys.label || 'label';\n      }\n      return 'label';\n    });\n\n    const realValue = computed(() => {\n      if (!isEmpty(props.treeProps) && !isEmpty((props.treeProps as TreeProps).keys)) {\n        return (props.treeProps as TreeProps).keys.value || 'value';\n      }\n      return 'value';\n    });\n\n    const realChildren = computed(() => {\n      if (!isEmpty(props.treeProps) && !isEmpty((props.treeProps as TreeProps).keys)) {\n        return (props.treeProps as TreeProps).keys.children || 'children';\n      }\n      return 'children';\n    });\n\n    // timelifes\n    onMounted(async () => {\n      if (!treeSelectValue.value && props.defaultValue) {\n        await change(props.defaultValue, null, 'uncheck');\n      }\n      if (isObjectValue.value) {\n        actived.value = isArray(treeSelectValue.value)\n          ? (treeSelectValue.value as Array<TreeSelectValue>).map((item) => (item as INodeOptions).value)\n          : [(treeSelectValue.value as INodeOptions).value];\n      } else {\n        (actived.value as TreeSelectValue) = isArray(treeSelectValue.value)\n          ? treeSelectValue.value\n          : [treeSelectValue.value];\n      }\n      changeNodeInfo();\n    });\n\n    // methods\n\n    const change = (\n      valueParam: TreeSelectValue,\n      node: TreeNodeModel<TreeOptionData>,\n      trigger: TreeSelectValueChangeTrigger,\n    ) => {\n      setTreeSelectValue(valueParam, { node, trigger });\n      changeNodeInfo();\n    };\n\n    const clear = (content: { e: MouseEvent }) => {\n      const defaultValue: TreeSelectValue = props.multiple ? [] : '';\n      actived.value = [];\n      change(defaultValue, null, 'clear');\n      props.onClear?.({ e: content.e });\n    };\n\n    const treeNodeChange = (\n      valueParam: Array<TreeNodeValue>,\n      context: { node: TreeNodeModel<TreeOptionData>; e: MouseEvent },\n    ) => {\n      let current: TreeSelectValue = valueParam;\n      if (isObjectValue.value) {\n        current = valueParam.map((nodeValue) => getTreeNode(props.data, nodeValue));\n      }\n      change(current, context.node, 'check');\n    };\n\n    const treeNodeActive = (\n      valueParam: Array<TreeNodeValue>,\n      context: { node: TreeNodeModel<TreeOptionData>; e: MouseEvent },\n    ) => {\n      if (!props.multiple) {\n        setInnerVisible(false);\n      }\n      // 多选模式屏蔽 Active 事件\n      if (props.multiple) {\n        return;\n      }\n      // 单选模式重复选择不清空\n      if (treeSelectValue.value === context.node.data[realValue.value]) {\n        return;\n      }\n      let current: TreeSelectValue = valueParam;\n      if (isObjectValue.value) {\n        const nodeValue = isEmpty(valueParam) ? '' : valueParam[0];\n        current = getTreeNode(props.data, nodeValue);\n      } else {\n        current = isEmpty(valueParam) ? '' : valueParam[0];\n      }\n      change(current, context.node, 'check');\n      actived.value = valueParam;\n    };\n\n    const treeNodeExpand = (valueParam: Array<TreeNodeValue>) => {\n      expanded.value = valueParam;\n    };\n\n    const treeNodeLoad = () => {\n      changeNodeInfo();\n    };\n\n    const inputChange = (value: InputValue): boolean => {\n      // 未打开状态不处理输入框输入\n      if (!innerVisible.value) {\n        props.onSearch?.(String(value));\n        return;\n      }\n      setInnerInputValue(value);\n      if (!value) {\n        filterByText.value = null;\n        return null;\n      }\n      filterByText.value = (node: TreeNodeModel<TreeOptionData>) => {\n        if (isFunction(props.filter)) {\n          const filter: boolean | Promise<boolean> = props.filter(String(value), node);\n          if (isBoolean(filter)) {\n            return filter;\n          }\n        }\n        return node.data[realLabel.value].indexOf(value) >= 0;\n      };\n      props.onSearch?.(String(value));\n    };\n\n    const tagChange = (value: string | number, context: TagInputChangeContext) => {\n      const { trigger, index } = context;\n      if (['tag-remove', 'backspace'].includes(trigger)) {\n        isArray(treeSelectValue.value) && (treeSelectValue.value as Array<TreeSelectValue>).splice(index, 1);\n      }\n      props.onRemove?.({ value, data: null, e: context && (context.e as MouseEvent) });\n      change(treeSelectValue.value, null, trigger as 'tag-remove' | 'backspace');\n    };\n\n    const changeNodeInfo = async () => {\n      await treeSelectValue.value;\n\n      if (!props.multiple) {\n        if (treeSelectValue.value || treeSelectValue.value === 0) {\n          nodeInfo.value = getSingleNodeInfo();\n        } else {\n          nodeInfo.value = '';\n        }\n      } else if (props.multiple) {\n        if (isArray(treeSelectValue.value)) {\n          nodeInfo.value = getMultipleNodeInfo();\n        } else {\n          nodeInfo.value = [];\n        }\n      } else {\n        nodeInfo.value = null;\n      }\n    };\n\n    const getSingleNodeInfo = () => {\n      const nodeValue = isObjectValue.value ? (treeSelectValue.value as INodeOptions).value : treeSelectValue.value;\n      if (treeRef.value && (props.treeProps as TreeProps)?.load) {\n        if (!isEmpty(props.data)) {\n          const node = treeRef.value.getItem(nodeValue);\n          if (node) {\n            return { label: node.data[realLabel.value], value: node.data[realValue.value] };\n          }\n        }\n        return { label: nodeValue, value: nodeValue };\n      }\n      const node = getTreeNode(props.data, nodeValue);\n      if (!node) {\n        return { label: nodeValue, value: nodeValue };\n      }\n      return node;\n    };\n\n    const getMultipleNodeInfo = () => {\n      return (treeSelectValue.value as Array<TreeSelectValue>).map((value) => {\n        const nodeValue = isObjectValue.value ? (value as INodeOptions).value : value;\n        if (treeRef.value && (props.treeProps as TreeProps)?.load) {\n          if (!isEmpty(props.data)) {\n            const node = treeRef.value.getItem(nodeValue);\n            if (node) {\n              return { label: node.data[realLabel.value], value: node.data[realValue.value] };\n            }\n          }\n          return { label: nodeValue, value: nodeValue };\n        }\n        const node = getTreeNode(props.data, nodeValue);\n        if (!node) {\n          return { label: nodeValue, value: nodeValue };\n        }\n        return node;\n      });\n    };\n    const getTreeNode = (data: Array<TreeOptionData>, targetValue: TreeSelectValue): TreeSelectValue | null => {\n      for (let i = 0, len = data.length; i < len; i++) {\n        if (data[i][realValue.value] === targetValue) {\n          return { label: data[i][realLabel.value], value: data[i][realValue.value] };\n        }\n        if (data[i]?.[realChildren.value]) {\n          const result = getTreeNode(data[i]?.[realChildren.value], targetValue);\n          if (!isNil(result)) {\n            return result;\n          }\n        }\n      }\n      return null;\n    };\n\n    const treeRerender = () => {\n      treeKey.value += 1;\n    };\n\n    const renderTree = () => (\n      <Tree\n        ref={treeRef}\n        v-show={!props.loading}\n        key={treeKey.value}\n        value={[...checked.value]}\n        hover\n        data={props.data}\n        activable={!props.multiple}\n        checkable={props.multiple}\n        disabled={tDisabled.value || multiLimitDisabled.value}\n        size={props.size}\n        filter={filterByText.value}\n        icon={!filterByText.value}\n        actived={actived.value}\n        expanded={expanded.value}\n        activeMultiple={props.multiple}\n        onChange={treeNodeChange}\n        onActive={treeNodeActive}\n        onExpand={treeNodeExpand}\n        onLoad={treeNodeLoad}\n        expandOnClickNode\n        v-slots={{\n          empty: () =>\n            renderDefaultTNode('empty', {\n              defaultNode: <div class={`${classPrefix.value}-select__empty`}>{globalConfig.value.empty}</div>,\n            }),\n        }}\n        {...(props.treeProps as TdTreeSelectProps['treeProps'])}\n      />\n    );\n\n    const renderSuffixIcon = () => (\n      <FakeArrow\n        isActive={innerVisible.value}\n        disabled={props.disabled}\n        overlayClassName={{\n          [`${classPrefix.value}-fake-arrow--highlight`]: innerVisible.value,\n          [`${classPrefix.value}-fake-arrow--disable`]: props.disabled,\n        }}\n      />\n    );\n\n    return () => (\n      <SelectInput\n        class={`${classPrefix.value}-tree-select`}\n        value={nodeInfo.value}\n        inputValue={innerVisible.value ? innerInputValue.value : ''}\n        popupVisible={innerVisible.value}\n        disabled={tDisabled.value}\n        multiple={props.multiple}\n        loading={props.loading}\n        clearable={props.clearable}\n        autoWidth={props.autoWidth}\n        borderless={props.borderless}\n        readonly={props.readonly}\n        placeholder={inputPlaceholder.value}\n        allowInput={props.filterable || isFunction(props.filter)}\n        minCollapsedNum={props.minCollapsedNum}\n        collapsed-items={props.collapsedItems}\n        popupProps={{\n          overlayClassName: popupClass.value,\n          ...(props.popupProps as TdTreeSelectProps['popupProps']),\n        }}\n        inputProps={{\n          size: props.size,\n          ...(props.inputProps as TdTreeSelectProps['inputProps']),\n        }}\n        tagInputProps={{\n          size: props.size,\n        }}\n        tagProps={{\n          maxWidth: 300,\n          ...(props.tagProps as TdTreeSelectProps['tagProps']),\n        }}\n        label={() => renderTNodeJSX('prefixIcon')}\n        suffixIcon={() => renderSuffixIcon()}\n        onClear={clear}\n        onBlur={(value: InputValue, context: { e: FocusEvent }) => {\n          props.onBlur?.({ value, e: context.e });\n        }}\n        onFocus={(value: InputValue, context: { e: FocusEvent }) => {\n          props.onFocus?.({ value, e: context.e });\n        }}\n        valueDisplay={() =>\n          renderTNodeJSX('valueDisplay', {\n            params: props.multiple\n              ? {\n                  value: nodeInfo.value,\n                  onClose: (value: string | number, context: TagInputChangeContext) => {\n                    tagChange(value, context);\n                  },\n                }\n              : {\n                  value: nodeInfo.value || { [realLabel.value]: '', [realValue.value]: undefined },\n                },\n          })\n        }\n        v-slots={{\n          panel: () => (\n            <div\n              class={[\n                `${classPrefix.value}-select__dropdown-inner`,\n                `${classPrefix.value}-select__dropdown-inner--size-${dropdownInnerSize.value}`,\n              ]}\n            >\n              <p\n                v-show={props.loading && !tDisabled.value}\n                class={[`${classPrefix.value}-select-loading-tips`, `${classPrefix.value}-select__right-icon-polyfill`]}\n              >\n                {renderDefaultTNode('loadingText', {\n                  defaultNode: <div class={`${classPrefix.value}-select__empty`}>{globalConfig.value.loadingText}</div>,\n                })}\n              </p>\n              {renderTree()}\n            </div>\n          ),\n          collapsedItems: slots.collapsedItems,\n        }}\n        onInputChange={inputChange}\n        onTagChange={tagChange}\n        onPopupVisibleChange={(state: boolean) => setInnerVisible(state)}\n        {...(props.selectInputProps as TdTreeSelectProps['selectInputProps'])}\n      />\n    );\n  },\n});\n"],"names":["defineComponent","name","props","setup","slots","renderTNodeJSX","useTNodeJSX","renderDefaultTNode","useTNodeDefault","classPrefix","usePrefixClass","useConfig","globalConfig","formDisabled","useFormDisabled","treeRef","ref","filterByText","actived","expanded","nodeInfo","treeKey","toRefs","value","modelValue","popupVisible","inputValue","useVModel","defaultValue","onChange","treeSelectValue","setTreeSelectValue","useDefaultValue","onPopupVisibleChange","innerVisible","setInnerVisible","defaultInputValue","onInputChange","innerInputValue","setInnerInputValue","watch","_regeneratorRuntime","changeNodeInfo","multiple","data","treeRerender","tDisabled","computed","disabled","inputPlaceholder","label","placeholder","popupClass","dropdownInnerSize","small","medium","large","size","isObjectValue","valueType","checked","isArray","map","item","multiLimitDisabled","max","length","realLabel","isEmpty","treeProps","keys","realValue","realChildren","children","onMounted","change","valueParam","node","trigger","clear","content","onClear","e","treeNodeChange","context","current","nodeValue","getTreeNode","treeNodeActive","treeNodeExpand","treeNodeLoad","inputChange","onSearch","String","isFunction","filter","isBoolean","indexOf","tagChange","index","includes","splice","onRemove","getSingleNodeInfo","getMultipleNodeInfo","load","getItem","targetValue","i","len","result","isNil","renderTree","_withDirectives","_createVNode","_mergeProps","empty","defaultNode","_vShow","loading","renderSuffixIcon","clearable","autoWidth","borderless","readonly","filterable","minCollapsedNum","collapsedItems","overlayClassName","popupProps","inputProps","maxWidth","tagProps","onBlur","onFocus","params","onClose","state","selectInputProps","panel","loadingText"],"mappings":"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"}