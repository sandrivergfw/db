{"version":3,"file":"drawer.js","sources":["../../src/drawer/drawer.tsx"],"sourcesContent":["import { computed, defineComponent, nextTick, onUpdated, ref, watch } from 'vue';\nimport { CloseIcon as TdCloseIcon } from 'tdesign-icons-vue-next';\n\nimport { useConfig, usePrefixClass } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport { isServer, addClass, removeClass } from '../utils/dom';\nimport props from './props';\nimport { DrawerCloseContext } from './type';\nimport TransferDom from '../utils/transfer-dom';\nimport { useAction } from '../dialog/hooks';\nimport { useTNodeJSX, useContent } from '../hooks/tnode';\nimport { useDrag } from './hooks';\n\nexport default defineComponent({\n  name: 'TDrawer',\n  directives: {\n    TransferDom,\n  },\n  props,\n  emits: ['update:visible'],\n  setup(props, context) {\n    const destroyOnCloseVisible = ref(false);\n    const isVisible = ref(false);\n    const { globalConfig } = useConfig('drawer');\n    const { CloseIcon } = useGlobalIcon({ CloseIcon: TdCloseIcon });\n    const renderTNodeJSX = useTNodeJSX();\n    const renderContent = useContent();\n    const COMPONENT_NAME = usePrefixClass('drawer');\n    const LOCK_CLASS = usePrefixClass('drawer--lock');\n    const { draggedSizeValue, enableDrag, draggableLineStyles } = useDrag(props);\n\n    const confirmBtnAction = (e: MouseEvent) => {\n      props.onConfirm?.({ e });\n    };\n    const cancelBtnAction = (e: MouseEvent) => {\n      props.onCancel?.({ e });\n      closeDrawer({ trigger: 'cancel', e });\n    };\n    const { getConfirmBtn, getCancelBtn } = useAction({ confirmBtnAction, cancelBtnAction });\n    const drawerEle = ref<HTMLElement | null>(null);\n    const drawerClasses = computed(() => {\n      return [\n        COMPONENT_NAME.value,\n        `${COMPONENT_NAME.value}--${props.placement}`,\n        {\n          [`${COMPONENT_NAME.value}--open`]: isVisible.value,\n          [`${COMPONENT_NAME.value}--attach`]: props.showInAttachedElement,\n          [`${COMPONENT_NAME.value}--without-mask`]: !props.showOverlay,\n        },\n      ];\n    });\n\n    const sizeValue = computed(() => {\n      if (draggedSizeValue.value) return draggedSizeValue.value;\n\n      const size = props.size ?? globalConfig.value.size;\n      const defaultSize = isNaN(Number(size)) ? size : `${size}px`;\n      return (\n        {\n          small: '300px',\n          medium: '500px',\n          large: '760px',\n        }[size] || defaultSize\n      );\n    });\n    const wrapperStyles = computed(() => {\n      return {\n        // 用于抵消动画效果：transform: translateX(100%); 等\n        transform: isVisible.value ? 'translateX(0)' : undefined,\n        width: ['left', 'right'].includes(props.placement) ? sizeValue.value : '',\n        height: ['top', 'bottom'].includes(props.placement) ? sizeValue.value : '',\n      };\n    });\n\n    const wrapperClasses = computed(() => {\n      return [\n        `${COMPONENT_NAME.value}__content-wrapper`,\n        `${COMPONENT_NAME.value}__content-wrapper--${props.placement}`,\n      ];\n    });\n\n    const parentNode = computed<HTMLElement>(() => {\n      return drawerEle.value && (drawerEle.value.parentNode as HTMLElement);\n    });\n\n    const modeAndPlacement = computed<string>(() => {\n      return [props.mode, props.placement].join();\n    });\n\n    const footerStyle = computed(() => {\n      return {\n        display: 'flex',\n        justifyContent: props.placement === 'right' ? 'flex-start' : 'flex-end',\n      };\n    });\n    const handlePushMode = () => {\n      if (props.mode !== 'push') return;\n      nextTick(() => {\n        if (!parentNode.value) return;\n        parentNode.value.style.cssText = 'transition: margin 300ms cubic-bezier(0.7, 0.3, 0.1, 1) 0s;';\n      });\n    };\n    // push 动画效果处理\n    const updatePushMode = () => {\n      if (!parentNode.value) return;\n      if (props.mode !== 'push' || !parentNode.value) return;\n      const marginStr = {\n        left: `margin: 0 0 0 ${sizeValue.value}`,\n        right: `margin: 0 0 0 -${sizeValue.value}`,\n        top: `margin: ${sizeValue.value} 0 0 0`,\n        bottom: `margin: -${sizeValue.value} 0 0 0`,\n      }[props.placement];\n      if (isVisible.value) {\n        parentNode.value.style.cssText += marginStr;\n      } else {\n        parentNode.value.style.cssText = parentNode.value.style.cssText.replace(/margin:.+;/, '');\n      }\n    };\n\n    // locale 全局配置，插槽，props，默认值，决定了按钮最终呈现\n    const getDefaultFooter = () => {\n      // this.getConfirmBtn is a function of useAction\n      const confirmBtn = getConfirmBtn({\n        confirmBtn: props.confirmBtn,\n        globalConfirm: globalConfig.value.confirm,\n        className: `${COMPONENT_NAME.value}__confirm`,\n      });\n      // this.getCancelBtn is a function of useAction\n      const cancelBtn = getCancelBtn({\n        cancelBtn: props.cancelBtn,\n        globalCancel: globalConfig.value.cancel,\n        className: `${COMPONENT_NAME.value}__cancel`,\n      });\n      return (\n        <div style={footerStyle.value}>\n          {props.placement === 'right' ? confirmBtn : null}\n          {cancelBtn}\n          {props.placement !== 'right' ? confirmBtn : null}\n        </div>\n      );\n    };\n    watch(\n      modeAndPlacement,\n      () => {\n        handlePushMode();\n      },\n      { immediate: true },\n    );\n    watch(\n      () => props.visible,\n      (value) => {\n        if (isServer) return;\n        if (value && !props.showInAttachedElement) {\n          props.preventScrollThrough && addClass(document.body, LOCK_CLASS.value);\n        } else {\n          props.preventScrollThrough && removeClass(document.body, LOCK_CLASS.value);\n        }\n\n        // 处理显示逻辑\n        if (props.destroyOnClose) {\n          if (value) {\n            destroyOnCloseVisible.value = false;\n            setTimeout(() => {\n              isVisible.value = true;\n            });\n          } else {\n            isVisible.value = false;\n            setTimeout(() => {\n              destroyOnCloseVisible.value = true;\n            }, 200);\n          }\n        } else if (destroyOnCloseVisible.value === true && value) {\n          destroyOnCloseVisible.value = false;\n          setTimeout(() => {\n            isVisible.value = true;\n          });\n        } else {\n          isVisible.value = value;\n        }\n      },\n      { immediate: true },\n    );\n    const handleCloseBtnClick = (e: MouseEvent) => {\n      props.onCloseBtnClick?.({ e });\n      closeDrawer({ trigger: 'close-btn', e });\n    };\n    const handleWrapperClick = (e: MouseEvent) => {\n      props.onOverlayClick?.({ e });\n      if (props.closeOnOverlayClick ?? globalConfig.value.closeOnOverlayClick) {\n        closeDrawer({ trigger: 'overlay', e });\n      }\n    };\n    const onKeyDown = (e: KeyboardEvent) => {\n      // 根据closeOnEscKeydown判断按下ESC时是否触发close事件\n      if ((props.closeOnEscKeydown ?? globalConfig.value.closeOnEscKeydown) && e.key === 'Escape') {\n        props.onEscKeydown?.({ e });\n        closeDrawer({ trigger: 'esc', e });\n      }\n    };\n    const closeDrawer = (params: DrawerCloseContext) => {\n      props.onClose?.(params);\n      context.emit('update:visible', false);\n    };\n\n    onUpdated(() => {\n      updatePushMode();\n    });\n\n    return () => {\n      if (destroyOnCloseVisible.value) return;\n      const body = renderContent('body', 'default');\n      const headerContent = renderTNodeJSX('header');\n      const defaultFooter = getDefaultFooter();\n      return (\n        <div\n          ref={drawerEle}\n          class={drawerClasses.value}\n          style={{ zIndex: props.zIndex }}\n          onKeydown={onKeyDown}\n          v-transfer-dom={props.attach}\n          tabindex={0}\n        >\n          {props.showOverlay && <div class={`${COMPONENT_NAME.value}__mask`} onClick={handleWrapperClick} />}\n          <div class={wrapperClasses.value} style={wrapperStyles.value}>\n            {headerContent && <div class={`${COMPONENT_NAME.value}__header`}>{headerContent}</div>}\n            {props.closeBtn && (\n              <div class={`${COMPONENT_NAME.value}__close-btn`} onClick={handleCloseBtnClick}>\n                {renderTNodeJSX('closeBtn', <CloseIcon />)}\n              </div>\n            )}\n            <div class={[`${COMPONENT_NAME.value}__body`, 'narrow-scrollbar']}>{body}</div>\n            {props.footer && (\n              <div class={`${COMPONENT_NAME.value}__footer`}>{renderTNodeJSX('footer', defaultFooter)}</div>\n            )}\n            {props.sizeDraggable && <div style={draggableLineStyles.value} onMousedown={enableDrag}></div>}\n          </div>\n        </div>\n      );\n    };\n  },\n});\n"],"names":["defineComponent","name","directives","TransferDom","props","emits","setup","context","destroyOnCloseVisible","ref","isVisible","useConfig","globalConfig","useGlobalIcon","CloseIcon","TdCloseIcon","renderTNodeJSX","useTNodeJSX","renderContent","useContent","COMPONENT_NAME","usePrefixClass","LOCK_CLASS","useDrag","draggedSizeValue","enableDrag","draggableLineStyles","confirmBtnAction","e","onConfirm","cancelBtnAction","onCancel","closeDrawer","trigger","useAction","getConfirmBtn","getCancelBtn","drawerEle","drawerClasses","computed","value","placement","showInAttachedElement","showOverlay","sizeValue","size","defaultSize","isNaN","Number","small","medium","large","wrapperStyles","transform","width","includes","height","wrapperClasses","parentNode","modeAndPlacement","mode","join","footerStyle","display","justifyContent","handlePushMode","nextTick","style","cssText","updatePushMode","marginStr","left","right","top","bottom","replace","getDefaultFooter","confirmBtn","globalConfirm","confirm","className","cancelBtn","globalCancel","cancel","_createVNode","watch","immediate","visible","isServer","preventScrollThrough","addClass","document","body","removeClass","destroyOnClose","setTimeout","handleCloseBtnClick","onCloseBtnClick","handleWrapperClick","onOverlayClick","closeOnOverlayClick","onKeyDown","closeOnEscKeydown","key","onEscKeydown","params","onClose","emit","onUpdated","headerContent","defaultFooter","_withDirectives","zIndex","closeBtn","footer","sizeDraggable","_resolveDirective","attach"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAaA,cAAeA,eAAgB,CAAA;AAC7BC,EAAAA,IAAM,EAAA,SAAA;AACNC,EAAAA,UAAY,EAAA;AACVC,IAAAA,WAAA,EAAAA,WAAAA;GACF;AACAC,EAAAA,KAAA,EAAAA,KAAA;EACAC,KAAA,EAAO,CAAC,gBAAgB,CAAA;AACxBC,EAAAA,KAAA,EAAMF,SAAAA,KAAAA,CAAAA,QAAOG,OAAS,EAAA;AACd,IAAA,IAAAC,qBAAA,GAAwBC,IAAI,KAAK,CAAA,CAAA;AACjC,IAAA,IAAAC,SAAA,GAAYD,IAAI,KAAK,CAAA,CAAA;IAC3B,IAAyBE,UAAAA,GAAAA,SAAA,CAAU,QAAQ,CAAA;AAAnCC,MAAAA,YAAA,cAAAA,YAAA,CAAA;AACR,IAAA,IAAA,cAAA,GAAsBC,cAAc;AAAEC,QAAAA,SAAA,EAAWC,SAAAA;AAAY,OAAC,CAAA;AAAtDD,MAAAA,WAAU,kBAAVA,SAAU,CAAA;IAClB,IAAME,iBAAiBC,WAAY,EAAA,CAAA;IACnC,IAAMC,gBAAgBC,UAAW,EAAA,CAAA;AAC3B,IAAA,IAAAC,cAAA,GAAiBC,eAAe,QAAQ,CAAA,CAAA;AACxC,IAAA,IAAAC,UAAA,GAAaD,eAAe,cAAc,CAAA,CAAA;IAChD,IAA8DE,QAAAA,GAAAA,QAAQnB,MAAK,CAAA;AAAnEoB,MAAAA,gBAAkB,YAAlBA,gBAAkB;AAAAC,MAAAA,UAAA,YAAAA,UAAA;AAAYC,MAAAA,mBAAoB,YAApBA,mBAAoB,CAAA;AAEpD,IAAA,IAAAC,gBAAA,GAAmB,SAAnBA,gBAAA,CAAoBC,CAAkB,EAAA;AAAA,MAAA,IAAA,iBAAA,CAAA;AAC1CxB,MAAAA,CAAAA,iBAAAA,GAAAA,MAAM,CAAAyB,SAAA,MAANzB,IAAAA,IAAAA,iBAAAA,KAAAA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,iBAAAA,CAAAA,IAAAA,CAAAA,MAAM,EAAY;AAAEwB,QAAAA,CAAA,EAAAA,CAAAA;AAAE,OAAC,CAAA,CAAA;KACzB,CAAA;AACM,IAAA,IAAAE,eAAA,GAAkB,SAAlBA,eAAA,CAAmBF,CAAkB,EAAA;AAAA,MAAA,IAAA,gBAAA,CAAA;AACzCxB,MAAAA,CAAAA,gBAAAA,GAAAA,MAAM,CAAA2B,QAAA,MAAN3B,IAAAA,IAAAA,gBAAAA,KAAAA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,gBAAAA,CAAAA,IAAAA,CAAAA,MAAM,EAAW;AAAEwB,QAAAA,CAAA,EAAAA,CAAAA;AAAE,OAAC,CAAA,CAAA;AACtBI,MAAAA,WAAA,CAAY;AAAEC,QAAAA,OAAA,EAAS,QAAU;AAAAL,QAAAA,CAAA,EAAAA,CAAAA;AAAE,OAAC,CAAA,CAAA;KACtC,CAAA;AACM,IAAA,IAAA,UAAA,GAAkCM,UAAU;AAAEP,QAAAA,gBAAA,EAAAA,gBAAA;AAAkBG,QAAAA,iBAAAA,eAAAA;AAAgB,OAAC,CAAA;AAA/EK,MAAAA,2BAAAA;AAAeC,MAAAA,YAAa,cAAbA,YAAa,CAAA;AAC9B,IAAA,IAAAC,SAAA,GAAY5B,IAAwB,IAAI,CAAA,CAAA;AACxC,IAAA,IAAA6B,aAAA,GAAgBC,SAAS,YAAM;AAAA,MAAA,IAAA,IAAA,CAAA;AAC5B,MAAA,OAAA,CACLnB,cAAe,CAAAoB,KAAA,EAAA,EAAA,CAAA,MAAA,CACZpB,cAAe,CAAAoB,KAAA,EAAUpC,IAAAA,CAAAA,CAAAA,MAAAA,CAAAA,MAAM,CAAAqC,SAAA,CAAA,GAAA,IAAA,GAAA,EAAA,EAAA,eAAA,CAAA,IAAA,EAAA,EAAA,CAAA,MAAA,CAE5BrB,cAAe,CAAAoB,KAAA,EAAgB9B,QAAAA,CAAAA,EAAAA,SAAU,CAAA8B,KAAA,mCACzCpB,cAAe,CAAAoB,KAAA,EAAA,UAAA,CAAA,EAAkBpC,MAAM,CAAAsC,qBAAA,CACvCtB,EAAAA,eAAAA,CAAAA,IAAAA,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,cAAe,CAAAoB,KAAA,EAAA,gBAAA,CAAA,EAAwB,CAACpC,MAAM,CAAAuC,WAAA,CAEtD,EAAA,IAAA,EAAA,CAAA;AACF,KAAC,CAAA,CAAA;AAEK,IAAA,IAAAC,SAAA,GAAYL,SAAS,YAAM;AAAA,MAAA,IAAA,YAAA,CAAA;AAC/B,MAAA,IAAIf,gBAAiB,CAAAgB,KAAA,EAAO,OAAOhB,gBAAiB,CAAAgB,KAAA,CAAA;MAEpD,IAAMK,IAAOzC,GAAAA,CAAAA,YAAAA,GAAAA,MAAAA,CAAMyC,IAAQ,uDAAAjC,YAAA,CAAa4B,KAAM,CAAAK,IAAA,CAAA;AAC9C,MAAA,IAAMC,cAAcC,KAAM,CAAAC,MAAA,CAAOH,IAAI,CAAC,CAAA,GAAIA,iBAAUA,IAAA,EAAA,IAAA,CAAA,CAAA;MAElD,OAAA;AACEI,QAAAA,KAAO,EAAA,OAAA;AACPC,QAAAA,MAAQ,EAAA,OAAA;AACRC,QAAAA,KAAO,EAAA,OAAA;AACT,QAAEN,IAAS,CAAA,IAAAC,WAAA,CAAA;AAEf,KAAC,CAAA,CAAA;AACK,IAAA,IAAAM,aAAA,GAAgBb,SAAS,YAAM;MAC5B,OAAA;QAELc,SAAA,EAAW3C,SAAU,CAAA8B,KAAA,GAAQ,eAAkB,GAAA,KAAA,CAAA;AAC/Cc,QAAAA,KAAA,EAAO,CAAC,MAAA,EAAQ,OAAO,CAAA,CAAEC,SAASnD,MAAM,CAAAqC,SAAS,CAAI,GAAAG,SAAA,CAAUJ,KAAQ,GAAA,EAAA;AACvEgB,QAAAA,MAAA,EAAQ,CAAC,KAAA,EAAO,QAAQ,CAAA,CAAED,SAASnD,MAAM,CAAAqC,SAAS,CAAI,GAAAG,SAAA,CAAUJ,KAAQ,GAAA,EAAA;OAC1E,CAAA;AACF,KAAC,CAAA,CAAA;AAEK,IAAA,IAAAiB,cAAA,GAAiBlB,SAAS,YAAM;AAC7B,MAAA,OAAA,CACFnB,EAAAA,CAAAA,MAAAA,CAAAA,cAAe,CAAAoB,KAAA,EACfpB,mBAAAA,CAAAA,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,cAAe,CAAAoB,KAAA,EAA2BpC,qBAAAA,CAAAA,CAAAA,MAAAA,CAAAA,MAAM,CAAAqC,SAAA,CACrD,CAAA,CAAA;AACF,KAAC,CAAA,CAAA;AAEK,IAAA,IAAAiB,UAAA,GAAanB,SAAsB,YAAM;MACtC,OAAAF,SAAA,CAAUG,KAAU,IAAAH,SAAA,CAAUG,KAAM,CAAAkB,UAAA,CAAA;AAC7C,KAAC,CAAA,CAAA;AAEK,IAAA,IAAAC,gBAAA,GAAmBpB,SAAiB,YAAM;MAC9C,OAAO,CAACnC,MAAM,CAAAwD,IAAA,EAAMxD,MAAM,CAAAqC,SAAS,EAAEoB,IAAK,EAAA,CAAA;AAC5C,KAAC,CAAA,CAAA;AAEK,IAAA,IAAAC,WAAA,GAAcvB,SAAS,YAAM;MAC1B,OAAA;AACLwB,QAAAA,OAAS,EAAA,MAAA;QACTC,cAAgB5D,EAAAA,MAAAA,CAAMqC,SAAc,KAAA,OAAA,GAAU,YAAe,GAAA,UAAA;OAC/D,CAAA;AACF,KAAC,CAAA,CAAA;AACD,IAAA,IAAMwB,iBAAiB,SAAjBA,iBAAuB;AAC3B,MAAA,IAAI7D,OAAMwD,IAAS,KAAA,MAAA,EAAQ,OAAA;AAC3BM,MAAAA,QAAA,CAAS,YAAM;AACb,QAAA,IAAI,CAACR,UAAW,CAAAlB,KAAA,EAAO,OAAA;AACZkB,QAAAA,UAAA,CAAAlB,KAAA,CAAM2B,MAAMC,OAAU,GAAA,6DAAA,CAAA;AACnC,OAAC,CAAA,CAAA;KACH,CAAA;AAEA,IAAA,IAAMC,iBAAiB,SAAjBA,iBAAuB;AAC3B,MAAA,IAAI,CAACX,UAAW,CAAAlB,KAAA,EAAO,OAAA;MACvB,IAAIpC,MAAM,CAAAwD,IAAA,KAAS,MAAU,IAAA,CAACF,UAAW,CAAAlB,KAAA,EAAO,OAAA;AAChD,MAAA,IAAM8B,SAAY,GAAA;AAChBC,QAAAA,IAAA,EAAuB3B,gBAAAA,CAAAA,MAAAA,CAAAA,SAAU,CAAAJ,KAAA,CAAA;AACjCgC,QAAAA,KAAA,EAAyB5B,iBAAAA,CAAAA,MAAAA,CAAAA,SAAU,CAAAJ,KAAA,CAAA;AACnCiC,QAAAA,GAAA,EAAgB7B,UAAAA,CAAAA,MAAAA,CAAAA,SAAU,CAAAJ,KAAA,EAAA,QAAA,CAAA;QAC1BkC,MAAA,EAAA,WAAA,CAAA,MAAA,CAAoB9B,SAAU,CAAAJ,KAAA,EAAA,QAAA,CAAA;AAChC,QAAEpC,MAAM,CAAAqC,SAAA,CAAA,CAAA;MACR,IAAI/B,UAAU8B,KAAO,EAAA;AACRkB,QAAAA,UAAA,CAAAlB,KAAA,CAAM2B,MAAMC,OAAW,IAAAE,SAAA,CAAA;AACpC,OAAO,MAAA;QACMZ,UAAA,CAAAlB,KAAA,CAAM2B,MAAMC,OAAU,GAAAV,UAAA,CAAWlB,MAAM2B,KAAM,CAAAC,OAAA,CAAQO,OAAQ,CAAA,YAAA,EAAc,EAAE,CAAA,CAAA;AAC1F,OAAA;KACF,CAAA;AAGA,IAAA,IAAMC,mBAAmB,SAAnBA,mBAAyB;MAE7B,IAAMC,aAAa1C,aAAc,CAAA;QAC/B0C,YAAYzE,MAAM,CAAAyE,UAAA;AAClBC,QAAAA,aAAA,EAAelE,aAAa4B,KAAM,CAAAuC,OAAA;QAClCC,SAAA,EAAA,EAAA,CAAA,MAAA,CAAc5D,cAAe,CAAAoB,KAAA,EAAA,WAAA,CAAA;AAC/B,OAAC,CAAA,CAAA;MAED,IAAMyC,YAAY7C,YAAa,CAAA;QAC7B6C,WAAW7E,MAAM,CAAA6E,SAAA;AACjBC,QAAAA,YAAA,EAActE,aAAa4B,KAAM,CAAA2C,MAAA;QACjCH,SAAA,EAAA,EAAA,CAAA,MAAA,CAAc5D,cAAe,CAAAoB,KAAA,EAAA,UAAA,CAAA;AAC/B,OAAC,CAAA,CAAA;AAEC,MAAA,OAAA4C,WAAA,CAAA,KAAA,EAAA;AAAA,QAAA,OAAA,EAAYtB,WAAY,CAAAtB,KAAAA;OACrBpC,EAAAA,CAAAA,MAAAA,CAAMqC,SAAc,KAAA,OAAA,GAAUoC,UAAa,GAAA,IAAA,EAC3CI,SAAA,EACA7E,MAAAA,CAAMqC,SAAc,KAAA,OAAA,GAAUoC,UAAa,GAAA,IAAA,CAAA,CAAA,CAAA;KAGlD,CAAA;IACAQ,KAAA,CACE1B,gBAAA,EACA,YAAM;AACWM,MAAAA,cAAA,EAAA,CAAA;AACjB,KAAA,EACA;AAAEqB,MAAAA,WAAW,IAAA;AAAK,KAAA,CACpB,CAAA;AACAD,IAAAA,KAAA,CACE,YAAA;MAAA,OAAMjF,MAAM,CAAAmF,OAAA,CAAA;KACZ,EAAA,UAAC/C,KAAU,EAAA;AACL,MAAA,IAAAgD,QAAA,EAAU,OAAA;AACV,MAAA,IAAAhD,KAAA,IAAS,CAACpC,MAAAA,CAAMsC,qBAAuB,EAAA;AACzCtC,QAAAA,OAAMqF,oBAAwB,IAAAC,QAAA,CAASC,QAAS,CAAAC,IAAA,EAAMtE,WAAWkB,KAAK,CAAA,CAAA;AACxE,OAAO,MAAA;AACLpC,QAAAA,OAAMqF,oBAAwB,IAAAI,WAAA,CAAYF,QAAS,CAAAC,IAAA,EAAMtE,WAAWkB,KAAK,CAAA,CAAA;AAC3E,OAAA;MAGA,IAAIpC,OAAM0F,cAAgB,EAAA;AACxB,QAAA,IAAItD,KAAO,EAAA;UACThC,qBAAA,CAAsBgC,KAAQ,GAAA,KAAA,CAAA;AAC9BuD,UAAAA,UAAA,CAAW,YAAM;YACfrF,SAAA,CAAU8B,KAAQ,GAAA,IAAA,CAAA;AACpB,WAAC,CAAA,CAAA;AACH,SAAO,MAAA;UACL9B,SAAA,CAAU8B,KAAQ,GAAA,KAAA,CAAA;AAClBuD,UAAAA,UAAA,CAAW,YAAM;YACfvF,qBAAA,CAAsBgC,KAAQ,GAAA,IAAA,CAAA;aAC7B,GAAG,CAAA,CAAA;AACR,SAAA;OACS,MAAA,IAAAhC,qBAAA,CAAsBgC,KAAU,KAAA,IAAA,IAAQA,KAAO,EAAA;QACxDhC,qBAAA,CAAsBgC,KAAQ,GAAA,KAAA,CAAA;AAC9BuD,QAAAA,UAAA,CAAW,YAAM;UACfrF,SAAA,CAAU8B,KAAQ,GAAA,IAAA,CAAA;AACpB,SAAC,CAAA,CAAA;AACH,OAAO,MAAA;QACL9B,SAAA,CAAU8B,KAAQ,GAAAA,KAAA,CAAA;AACpB,OAAA;AACF,KAAA,EACA;AAAE8C,MAAAA,WAAW,IAAA;AAAK,KAAA,CACpB,CAAA;AACM,IAAA,IAAAU,mBAAA,GAAsB,SAAtBA,mBAAA,CAAuBpE,CAAkB,EAAA;AAAA,MAAA,IAAA,qBAAA,CAAA;AAC7CxB,MAAAA,CAAAA,qBAAAA,GAAAA,MAAM,CAAA6F,eAAA,MAAN7F,IAAAA,IAAAA,qBAAAA,KAAAA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,qBAAAA,CAAAA,IAAAA,CAAAA,MAAM,EAAkB;AAAEwB,QAAAA,CAAA,EAAAA,CAAAA;AAAE,OAAC,CAAA,CAAA;AAC7BI,MAAAA,WAAA,CAAY;AAAEC,QAAAA,OAAA,EAAS,WAAa;AAAAL,QAAAA,CAAA,EAAAA,CAAAA;AAAE,OAAC,CAAA,CAAA;KACzC,CAAA;AACM,IAAA,IAAAsE,kBAAA,GAAqB,SAArBA,kBAAA,CAAsBtE,CAAkB,EAAA;AAAA,MAAA,IAAA,qBAAA,EAAA,qBAAA,CAAA;AAC5CxB,MAAAA,CAAAA,qBAAAA,GAAAA,MAAM,CAAA+F,cAAA,MAAN/F,IAAAA,IAAAA,qBAAAA,KAAAA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,qBAAAA,CAAAA,IAAAA,CAAAA,MAAM,EAAiB;AAAEwB,QAAAA,CAAA,EAAAA,CAAAA;AAAE,OAAC,CAAA,CAAA;MAC5B,IAAIxB,CAAAA,qBAAAA,GAAAA,MAAM,CAAAgG,mBAAA,MAAA,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,qBAAA,GAAuBxF,YAAa,CAAA4B,KAAA,CAAM4D,mBAAqB,EAAA;AACvEpE,QAAAA,WAAA,CAAY;AAAEC,UAAAA,OAAA,EAAS,SAAW;AAAAL,UAAAA,CAAA,EAAAA,CAAAA;AAAE,SAAC,CAAA,CAAA;AACvC,OAAA;KACF,CAAA;AACM,IAAA,IAAAyE,SAAA,GAAY,SAAZA,SAAA,CAAazE,CAAqB,EAAA;AAAA,MAAA,IAAA,qBAAA,CAAA;AAEtC,MAAA,IAAA,0BAAKxB,OAAMkG,iBAAqB,MAAA,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,qBAAA,GAAA1F,YAAA,CAAa4B,MAAM8D,iBAAsB,KAAA1E,CAAA,CAAE2E,QAAQ,QAAU,EAAA;AAAA,QAAA,IAAA,oBAAA,CAAA;AAC3FnG,QAAAA,CAAAA,oBAAAA,GAAAA,MAAM,CAAAoG,YAAA,MAANpG,IAAAA,IAAAA,oBAAAA,KAAAA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,oBAAAA,CAAAA,IAAAA,CAAAA,MAAM,EAAe;AAAEwB,UAAAA,CAAA,EAAAA,CAAAA;AAAE,SAAC,CAAA,CAAA;AAC1BI,QAAAA,WAAA,CAAY;AAAEC,UAAAA,OAAA,EAAS,KAAO;AAAAL,UAAAA,CAAA,EAAAA,CAAAA;AAAE,SAAC,CAAA,CAAA;AACnC,OAAA;KACF,CAAA;AACM,IAAA,IAAAI,WAAA,GAAc,SAAdA,WAAA,CAAeyE,MAA+B,EAAA;AAAA,MAAA,IAAA,eAAA,CAAA;MAClDrG,CAAAA,eAAAA,GAAAA,MAAAA,CAAMsG,2DAANtG,qBAAAA,MAAAA,EAAgBqG,MAAM,CAAA,CAAA;AACdlG,MAAAA,OAAA,CAAAoG,IAAA,CAAK,kBAAkB,KAAK,CAAA,CAAA;KACtC,CAAA;AAEAC,IAAAA,SAAA,CAAU,YAAM;AACCvC,MAAAA,cAAA,EAAA,CAAA;AACjB,KAAC,CAAA,CAAA;AAED,IAAA,OAAO,YAAM;MACX,IAAI7D,qBAAsB,CAAAgC,KAAA,EAAO,OAAA;AAC3B,MAAA,IAAAoD,IAAA,GAAO1E,aAAc,CAAA,MAAA,EAAQ,SAAS,CAAA,CAAA;AACtC,MAAA,IAAA2F,aAAA,GAAgB7F,eAAe,QAAQ,CAAA,CAAA;MAC7C,IAAM8F,gBAAgBlC,gBAAiB,EAAA,CAAA;AACvC,MAAA,OAAAmC,cAAA,CAAA3B,WAAA,CAAA,KAAA,EAAA;AAAA,QAAA,KAAA,EAES/C;eACEC,EAAAA,aAAA,CAAcE;eACd,EAAA;UAAEwE,MAAQ5G,EAAAA,MAAAA,CAAM4G,MAAAA;SACvB;AAAA,QAAA,WAAA,EAAWX;kBAED,EAAA,CAAA;OAETjG,EAAAA,CAAAA,MAAAA,CAAMuC;eAA8BvB,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,cAAA,CAAeoB,KAAe,EAAA,QAAA,CAAA;QAAA,SAAS0D,EAAAA,kBAAAA;OAAoB,EAAA,IAAA,CAAA,EAAAd,WAAA,CAAA,KAAA,EAAA;QAAA,OACpF3B,EAAAA,cAAe,CAAAjB,KAAA;AAAA,QAAA,OAAA,EAAcY,aAAc,CAAAZ,KAAAA;AAAA,OAAA,EAAA,CACpDqE,aAAA,IAAAzB,WAAA,CAAA,KAAA,EAAA;QAAA,OAAgChE,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,cAAe,CAAAoB,KAAA,EAAA,UAAA,CAAA;AAAA,OAAA,EAAA,CAAkBqE,eAA/C,EAClBzG,OAAM6G,QACL,IAAA7B,WAAA,CAAA,KAAA,EAAA;QAAA,OAAehE,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,cAAe,CAAAoB,KAAA,EAAA,aAAA,CAAA;QAAA,SAA6BwD,EAAAA,mBAAAA;AAAA,OAAA,EAAA,CACxDhF,eAAe,UAAY,EAAAoE,WAAA,CAAAtE,WAAA,EAAA,IAAA,EAAA,IAAA,CAAA,EAD7B,CAAA,EAAAsE,WAAA,CAAA,KAAA,EAAA;AAAA,QAAA,OAAA,EAIS,CAAIhE,EAAAA,CAAAA,MAAAA,CAAAA,eAAeoB,KAAe,aAAA,kBAAkB,CAAA;AAAI,OAAA,EAAA,CAAAoD,IAAA,CAAA,CAAA,EACnExF,MAAM,CAAA8G,MAAA,IAAA9B,WAAA,CAAA,KAAA,EAAA;QAAA,OACUhE,EAAAA,EAAAA,CAAAA,MAAAA,CAAAA,cAAe,CAAAoB,KAAA,EAAA,UAAA,CAAA;OAAkBxB,EAAAA,CAAAA,cAAe,CAAA,QAAA,EAAU8F,aAAa,CAAA,CAArF,CAAA,EAEF1G,MAAAA,CAAM+G;eAA6BzF,EAAAA,mBAAoB,CAAAc,KAAA;QAAA,aAAoBf,EAAAA,UAAAA;OAAY,EAAA,IAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,CAAA2F,gBAAA,CAAA,cAAA,CAAA,EAf1EhH,MAAAA,CAAMiH;KAmB5B,CAAA;AACF,GAAA;AACF,CAAC,CAAA;;;;"}