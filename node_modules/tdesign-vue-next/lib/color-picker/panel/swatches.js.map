{"version":3,"file":"swatches.js","sources":["../../../src/color-picker/panel/swatches.tsx"],"sourcesContent":["import { computed, defineComponent, PropType, ref } from 'vue';\nimport { DeleteIcon as TdDeleteIcon, AddIcon as TdAddIcon } from 'tdesign-icons-vue-next';\n\nimport { Color } from '../utils';\nimport { useBaseClassName } from '../hooks';\nimport { useCommonClassName } from '../../hooks/useConfig';\nimport { useGlobalIcon } from '../../hooks/useGlobalIcon';\nimport baseProps from './base-props';\n\nexport default defineComponent({\n  name: 'SwatchesPanel',\n  props: {\n    ...baseProps,\n    colors: {\n      type: Array as PropType<string[]>,\n      default: () => [] as PropType<string[]>,\n    },\n    title: {\n      type: String,\n      default: '系统色彩',\n    },\n    editable: {\n      type: Boolean,\n      default: false,\n    },\n    onSetColor: {\n      type: Function,\n      default: () => {\n        return () => {};\n      },\n    },\n    handleAddColor: {\n      type: Function,\n      default: () => {\n        return () => {};\n      },\n    },\n  },\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const { DeleteIcon, AddIcon } = useGlobalIcon({ DeleteIcon: TdDeleteIcon, AddIcon: TdAddIcon });\n    const { STATUS } = useCommonClassName();\n    const statusClassNames = STATUS.value;\n    const visiblePopConfirm = ref<boolean>(false);\n    const setVisiblePopConfirm = (visible: boolean) => {\n      visiblePopConfirm.value = visible;\n    };\n\n    const handleClick = (color: string) => props.onSetColor(color);\n\n    const isEqualCurrentColor = (color: string) => {\n      return Color.compare(color, props.color.css);\n    };\n\n    const selectedColorIndex = computed(() => {\n      return props.colors.findIndex((color) => isEqualCurrentColor(color));\n    });\n\n    /**\n     * 移除颜色\n     */\n    const handleRemoveColor = () => {\n      const colors = [...props.colors];\n      const selectedIndex = selectedColorIndex.value;\n      if (selectedIndex > -1) {\n        colors.splice(selectedIndex, 1);\n      } else {\n        colors.length = 0;\n      }\n      props.onChange(colors);\n      setVisiblePopConfirm(false);\n    };\n\n    return {\n      baseClassName,\n      DeleteIcon,\n      AddIcon,\n      statusClassNames,\n      selectedColorIndex,\n      visiblePopConfirm,\n      setVisiblePopConfirm,\n      handleClick,\n      isEqualCurrentColor,\n      handleRemoveColor,\n    };\n  },\n  render() {\n    const { baseClassName, DeleteIcon, AddIcon, statusClassNames, title, editable } = this;\n    const swatchesClass = `${baseClassName}__swatches`;\n\n    const renderActions = () => {\n      if (!editable) {\n        return null;\n      }\n\n      return (\n        <div class={`${swatchesClass}--actions`}>\n          <span role=\"button\" class={`${baseClassName}__icon`} onClick={() => this.handleAddColor()}>\n            <AddIcon />\n          </span>\n          {this.colors.length > 0 ? (\n            <span role=\"button\" class={`${baseClassName}__icon`} onClick={() => this.handleRemoveColor()}>\n              <DeleteIcon />\n            </span>\n          ) : null}\n        </div>\n      );\n    };\n\n    return (\n      <div class={swatchesClass}>\n        <h3 class={`${swatchesClass}--title`}>\n          <span>{title}</span>\n          {renderActions()}\n        </h3>\n        <ul class={[`${swatchesClass}--items`, 'narrow-scrollbar']}>\n          {this.colors.map((color) => {\n            return (\n              <li\n                class={[\n                  `${swatchesClass}--item`,\n                  this.isEqualCurrentColor(color) && editable ? statusClassNames.active : '',\n                ]}\n                title={color}\n                key={color}\n                onClick={() => {\n                  if (this.disabled) {\n                    return;\n                  }\n                  this.handleClick(color);\n                }}\n              >\n                <div class={[`${swatchesClass}--color`, `${baseClassName}--bg-alpha`]}>\n                  <span\n                    class={`${swatchesClass}--inner`}\n                    style={{\n                      background: color,\n                    }}\n                  ></span>\n                </div>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","baseProps","colors","type","Array","title","String","editable","Boolean","onSetColor","Function","handleAddColor","setup","baseClassName","useBaseClassName","useGlobalIcon","DeleteIcon","TdDeleteIcon","AddIcon","TdAddIcon","useCommonClassName","STATUS","statusClassNames","value","visiblePopConfirm","ref","setVisiblePopConfirm","visible","handleClick","color","isEqualCurrentColor","Color","compare","css","selectedColorIndex","computed","findIndex","handleRemoveColor","selectedIndex","splice","length","onChange","render","swatchesClass","renderActions","_createVNode","map","active","disabled","background"],"mappings":"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"}