{"version":3,"file":"tag.js","sources":["../../src/tag/tag.tsx"],"sourcesContent":["import { computed, defineComponent, h, VNode } from 'vue';\nimport { CloseIcon as TdCloseIcon } from 'tdesign-icons-vue-next';\n\nimport props from './props';\nimport { useConfig, usePrefixClass, useCommonClassName } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport { useTNodeJSX, useContent } from '../hooks/tnode';\n\nexport default defineComponent({\n  name: 'TTag',\n  props,\n  setup(props) {\n    const { globalConfig: tagGlobalConfig } = useConfig('tag');\n    const COMPONENT_NAME = usePrefixClass('tag');\n    const { CloseIcon } = useGlobalIcon({ CloseIcon: TdCloseIcon });\n    const renderTNodeJSX = useTNodeJSX();\n    const renderContent = useContent();\n    const { SIZE } = useCommonClassName();\n\n    const tagClass = computed(() => {\n      return [\n        `${COMPONENT_NAME.value}`,\n        `${COMPONENT_NAME.value}--${props.theme}`,\n        `${COMPONENT_NAME.value}--${props.variant}`,\n        {\n          [`${COMPONENT_NAME.value}--ellipsis`]: props.maxWidth,\n          [`${COMPONENT_NAME.value}--close`]: props.closable,\n          [`${COMPONENT_NAME.value}--disabled`]: props.disabled,\n        },\n        SIZE.value[props.size],\n        props.shape !== 'square' && `${COMPONENT_NAME.value}--${props.shape}`,\n      ];\n    });\n\n    const tagStyle = computed<Record<string, string>>(() => {\n      return props.maxWidth ? { maxWidth: `${props.maxWidth}px` } : {};\n    });\n\n    const handleClick = (e: MouseEvent) => {\n      props.onClick?.({ e });\n    };\n\n    const getCloseIcon = () => {\n      if (!props.closable) return null;\n      const iconClassName = `${COMPONENT_NAME.value}__icon-close`;\n      if (tagGlobalConfig.value.closeIcon) {\n        return h(tagGlobalConfig.value.closeIcon(h) as VNode, { class: iconClassName });\n      }\n      return (\n        <CloseIcon\n          onClick={({ e }: { e: MouseEvent }) => {\n            e.stopPropagation();\n            props.onClose?.({ e });\n          }}\n          class={iconClassName}\n        />\n      );\n    };\n\n    return () => {\n      // 关闭按钮 自定义组件使用 nativeOnClick 绑定事件\n      const closeIcon = getCloseIcon();\n      // 标签内容\n      const tagContent = renderContent('default', 'content');\n      // 图标\n      const icon = renderTNodeJSX('icon');\n\n      return (\n        <span class={tagClass.value} style={tagStyle.value} onClick={handleClick}>\n          {icon}\n          {props.maxWidth ? (\n            <span style={tagStyle.value} class={`${COMPONENT_NAME.value}--text`}>\n              {tagContent}\n            </span>\n          ) : (\n            tagContent\n          )}\n          {closeIcon}\n        </span>\n      );\n    };\n  },\n});\n"],"names":["defineComponent","name","props","setup","useConfig","tagGlobalConfig","globalConfig","COMPONENT_NAME","usePrefixClass","useGlobalIcon","CloseIcon","TdCloseIcon","renderTNodeJSX","useTNodeJSX","renderContent","useContent","useCommonClassName","SIZE","tagClass","computed","value","theme","variant","maxWidth","closable","disabled","size","shape","tagStyle","handleClick","e","onClick","getCloseIcon","iconClassName","closeIcon","h","_createVNode","stopPropagation","onClose","tagContent","icon"],"mappings":"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"}