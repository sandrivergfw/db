{"version":3,"file":"useSliderInput.js","sources":["../../../src/slider/hooks/useSliderInput.tsx"],"sourcesContent":["import { computed, Ref } from 'vue';\nimport { TdSliderProps } from '../type';\nimport InputNumber, { InputNumberProps } from '../../input-number';\n\nconst INPUT_NUMBER_PROPS_INITIAL_STATE: InputNumberProps = {\n  decimalPlaces: 0,\n  format: undefined as InputNumberProps['format'],\n  placeholder: '',\n  theme: 'column' as InputNumberProps['theme'],\n};\n\ninterface useSliderInputProps {\n  inputNumberProps: boolean | TdSliderProps['inputNumberProps'];\n  max: number;\n  min: number;\n  step: number;\n  prefixName: string;\n  vertical: boolean;\n  disabled: boolean;\n}\n\n/**\n * 聚合管理inputNumber渲染逻辑\n */\nexport const useSliderInput = (config: Ref<useSliderInputProps>) => {\n  const name = config.value.prefixName;\n\n  /** 根据传入属性缓存计算inputNumber props */\n  const sliderInputState = computed(() => {\n    let initialState = { ...INPUT_NUMBER_PROPS_INITIAL_STATE };\n    const inputProps = config.value;\n    if (typeof inputProps.inputNumberProps !== 'boolean') {\n      const inputTheme = inputProps.inputNumberProps?.theme;\n      initialState = { ...initialState, ...inputProps.inputNumberProps };\n      if (['column', 'row', 'normal'].includes(inputTheme)) {\n        initialState.theme = inputTheme;\n      }\n    }\n    return initialState;\n  });\n\n  const sliderNumberClass = computed(() => {\n    return [\n      `${name}__input`,\n      {\n        'is-vertical': config.value.vertical,\n      },\n    ];\n  });\n\n  const renderInputNumber = (val: number, changeFn: (val: number) => void) => {\n    // if exist min or max prop, onChange callback function will pass undefined value when decrease\n    const normalizeChangeFn = (num: number | undefined) => {\n      if (num !== undefined && !isNaN(num)) {\n        changeFn(num);\n      }\n    };\n    return (\n      <InputNumber\n        {...sliderInputState.value}\n        class={sliderNumberClass.value}\n        value={val}\n        step={config.value.step}\n        onChange={normalizeChangeFn}\n        disabled={config.value.disabled}\n        min={config.value.min}\n        max={config.value.max}\n      />\n    );\n  };\n\n  return renderInputNumber;\n};\n"],"names":["INPUT_NUMBER_PROPS_INITIAL_STATE","decimalPlaces","format","placeholder","theme","useSliderInput","config","name","value","prefixName","sliderInputState","computed","initialState","inputProps","inputNumberProps","inputTheme","includes","sliderNumberClass","vertical","renderInputNumber","val","changeFn","normalizeChangeFn","num","isNaN","step","disabled","min","max"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,IAAMA,gCAAqD,GAAA;AACzDC,EAAAA,aAAe,EAAA,CAAA;EACfC,MAAQ,EAAA,KAAA,CAAA;AACRC,EAAAA,WAAa,EAAA,EAAA;AACbC,EAAAA,KAAO,EAAA,QAAA;AACT,CAAA,CAAA;IAeaC,cAAA,GAAiB,SAAjBA,cAAA,CAAkBC,MAAqC,EAAA;AAC5D,EAAA,IAAAC,IAAA,GAAOD,OAAOE,KAAM,CAAAC,UAAA,CAAA;AAGpB,EAAA,IAAAC,gBAAA,GAAmBC,SAAS,YAAM;IAClC,IAAAC,YAAA,GAAoBZ,aAAAA,CAAAA,EAAAA,EAAAA,gCAAiC,CAAA,CAAA;AACzD,IAAA,IAAMa,aAAaP,MAAO,CAAAE,KAAA,CAAA;AACtB,IAAA,IAAA,OAAOK,UAAW,CAAAC,gBAAA,KAAqB,SAAW,EAAA;AAAA,MAAA,IAAA,qBAAA,CAAA;AAC9C,MAAA,IAAAC,UAAA,GAAaF,CAAAA,qBAAAA,GAAAA,WAAWC,gBAAkB,MAAA,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAA7B,sBAA6BV,KAAA,CAAA;AAChDQ,MAAAA,YAAA,mCAAoBA,YAAc,CAAA,EAAGC,WAAWC,gBAAiB,CAAA,CAAA;AACjE,MAAA,IAAI,CAAC,QAAU,EAAA,KAAA,EAAO,QAAQ,CAAE,CAAAE,QAAA,CAASD,UAAU,CAAG,EAAA;QACpDH,YAAA,CAAaR,KAAQ,GAAAW,UAAA,CAAA;AACvB,OAAA;AACF,KAAA;AACO,IAAA,OAAAH,YAAA,CAAA;AACT,GAAC,CAAA,CAAA;AAEK,EAAA,IAAAK,iBAAA,GAAoBN,SAAS,YAAM;IAChC,OAAA,CAAA,EAAA,CAAA,MAAA,CACFJ,IAAA,EACH,SAAA,CAAA,EAAA;AACE,MAAA,aAAA,EAAeD,OAAOE,KAAM,CAAAU,QAAAA;AAC9B,KAAA,CACF,CAAA;AACF,GAAC,CAAA,CAAA;EAEK,IAAAC,iBAAA,GAAoB,SAApBA,iBAAA,CAAqBC,GAAA,EAAaC,QAAoC,EAAA;AAEpE,IAAA,IAAAC,iBAAA,GAAoB,SAApBA,iBAAA,CAAqBC,GAA4B,EAAA;MACrD,IAAIA,GAAQ,KAAA,KAAA,CAAA,IAAa,CAACC,KAAA,CAAMD,GAAG,CAAG,EAAA;QACpCF,QAAA,CAASE,GAAG,CAAA,CAAA;AACd,OAAA;KACF,CAAA;IAEE,OACMb,WAAAA,CAAAA,WAAAA,EAAAA,UAAAA,CAAAA,gBAAA,CAAiBF,KACrB,EAAA;MAAA,OAAOS,EAAAA,iBAAkB,CAAAT,KAAA;AAAA,MAAA,OAAA,EAClBY,GAAA;AAAA,MAAA,MAAA,EACDd,MAAA,CAAOE,KAAM,CAAAiB,IAAA;AAAA,MAAA,UAAA,EACTH,iBACV;AAAA,MAAA,UAAA,EAAUhB,MAAO,CAAAE,KAAA,CAAMkB,QACvB;AAAA,MAAA,KAAA,EAAKpB,MAAO,CAAAE,KAAA,CAAMmB,GAClB;MAAA,KAAKrB,EAAAA,MAAO,CAAAE,KAAA,CAAMoB,GAAAA;AACpB,KAAA,CAAA,EAAA,IAAA,CAAA,CAAA;GAEJ,CAAA;AAEO,EAAA,OAAAT,iBAAA,CAAA;AACT;;;;"}