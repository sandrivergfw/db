{"version":3,"file":"useAsyncLoading.js","sources":["../../../src/table/hooks/useAsyncLoading.tsx"],"sourcesContent":["import isString from 'lodash/isString';\nimport { computed, SetupContext } from 'vue';\nimport { useTNodeJSX } from '../../hooks/tnode';\nimport { TdPrimaryTableProps } from '../type';\nimport Loading from '../../loading';\nimport useClassName from './useClassName';\nimport { useConfig } from '../../hooks/useConfig';\n\nexport default function useAsyncLoading(props: TdPrimaryTableProps, context: SetupContext) {\n  const renderTNode = useTNodeJSX();\n  const { globalConfig } = useConfig('table');\n  const { isLoadingClass, isLoadMoreClass, asyncLoadingClass } = useClassName();\n\n  const classes = computed(() => [\n    asyncLoadingClass,\n    {\n      [isLoadingClass]: props.asyncLoading === 'loading',\n      [isLoadMoreClass]: props.asyncLoading === 'load-more',\n    },\n  ]);\n\n  function onLoadClick() {\n    if (typeof props.asyncLoading !== 'string') return;\n    props.onAsyncLoadingClick?.({ status: props.asyncLoading });\n  }\n\n  function renderAsyncLoading() {\n    const asyncLoadingNode = renderTNode('asyncLoading');\n    if (isString(asyncLoadingNode)) {\n      const { asyncLoading } = props;\n      const loadingText = {\n        'load-more': globalConfig.value.loadingMoreText,\n        loading: globalConfig.value.loadingText,\n      }[String(asyncLoading)];\n      return (\n        <div class={classes.value} onClick={onLoadClick}>\n          {<Loading loading={asyncLoading === 'loading'} size=\"small\" text={loadingText} />}\n        </div>\n      );\n    }\n    if (![null, false, undefined].includes(asyncLoadingNode)) {\n      return (\n        <div class={classes.value} onClick={onLoadClick}>\n          {asyncLoadingNode}\n        </div>\n      );\n    }\n    return null;\n  }\n  return {\n    renderAsyncLoading,\n  };\n}\n"],"names":["useAsyncLoading","props","context","renderTNode","useTNodeJSX","useConfig","globalConfig","useClassName","isLoadingClass","isLoadMoreClass","asyncLoadingClass","classes","computed","asyncLoading","onLoadClick","onAsyncLoadingClick","status","renderAsyncLoading","asyncLoadingNode","isString","loadingText","value","loadingMoreText","loading","String","_createVNode","includes"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQwB,SAAAA,eAAA,CAAgBC,OAA4BC,OAAuB,EAAA;EACzF,IAAMC,cAAcC,WAAY,EAAA,CAAA;EAChC,IAAyBC,UAAAA,GAAAA,SAAA,CAAU,OAAO,CAAA;AAAlCC,IAAAA,YAAA,cAAAA,YAAA,CAAA;AACR,EAAA,IAAA,aAAA,GAA+DC,YAAa,EAAA;AAApEC,IAAAA,cAAA,iBAAAA,cAAA;AAAgBC,IAAAA,eAAiB,iBAAjBA,eAAiB;AAAAC,IAAAA,iBAAA,iBAAAA,iBAAA,CAAA;EAEnC,IAAAC,OAAA,GAAUC,SAAS,YAAA;AAAA,IAAA,IAAA,IAAA,CAAA;AAAA,IAAA,OAAM,CAC7BF,iBAAA,GAAA,IAAA,GAAA,EAAA,EAAA,eAAA,CAAA,IAAA,EAEGF,cAAiB,EAAAP,KAAA,CAAMY,YAAiB,KAAA,SAAA,CAAA,EAAA,eAAA,CAAA,IAAA,EACxCJ,eAAkB,EAAAR,KAAA,CAAMY,YAAiB,KAAA,WAAA,CAE7C,EAAA,IAAA,EAAA,CAAA;GAAA,CAAA,CAAA;AAED,EAAA,SAASC,WAAc,GAAA;AAAA,IAAA,IAAA,qBAAA,CAAA;AACjB,IAAA,IAAA,OAAOb,MAAMY,YAAiB,KAAA,QAAA,EAAU,OAAA;AAC5C,IAAA,CAAA,qBAAA,GAAAZ,KAAA,CAAMc,mBAAsB,MAA5B,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,qBAAA,CAAA,IAAA,CAAAd,KAAA,EAA4B;MAAEe,MAAQ,EAAAf,KAAA,CAAMY,YAAAA;AAAa,KAAC,CAAA,CAAA;AAC5D,GAAA;AAEA,EAAA,SAASI,kBAAqB,GAAA;AACtB,IAAA,IAAAC,gBAAA,GAAmBf,YAAY,cAAc,CAAA,CAAA;AAC/C,IAAA,IAAAgB,QAAA,CAASD,gBAAgB,CAAG,EAAA;AACxB,MAAA,IAAEL,eAAiBZ,KAAA,CAAjBY;AACR,MAAA,IAAMO,WAAc,GAAA;AAClB,QAAA,WAAA,EAAad,aAAae,KAAM,CAAAC,eAAA;AAChCC,QAAAA,OAAA,EAASjB,aAAae,KAAM,CAAAD,WAAAA;AAC9B,OAAA,CAAEI,OAAOX,YAAY,CAAA,CAAA,CAAA;AACrB,MAAA,OAAAY,WAAA,CAAA,KAAA,EAAA;QAAA,OACcd,EAAAA,OAAQ,CAAAU,KAAA;QAAA,SAAgBP,EAAAA,WAAAA;AACjC,OAAA,EAAA,CAAAW,WAAA,CAAA,OAAA,EAAA;QAAA,SAAkBZ,EAAAA,iBAAiB,SAAW;AAAA,QAAA,MAAA,EAAK;cAAcO,EAAAA,WAAAA;AAAA,OAAA,EAAA,IAAA,CAAA,CAAA,CAAA,CAAA;AAGxE,KAAA;AACI,IAAA,IAAA,CAAC,CAAC,IAAM,EAAA,KAAA,EAAO,MAAS,CAAE,CAAAM,QAAA,CAASR,gBAAgB,CAAG,EAAA;AAEtD,MAAA,OAAAO,WAAA,CAAA,KAAA,EAAA;QAAA,OAAYd,EAAAA,OAAA,CAAQU;iBAAgBP,EAAAA,WAAAA;AAAA,OAAA,EAAA,CACjCI;AAGP,KAAA;AACO,IAAA,OAAA,IAAA,CAAA;AACT,GAAA;EACO,OAAA;AACLD,IAAAA,kBAAA,EAAAA,kBAAAA;GACF,CAAA;AACF;;;;"}