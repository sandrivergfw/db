{"version":3,"file":"dropdown-menu.js","sources":["../../src/dropdown/dropdown-menu.tsx"],"sourcesContent":["import { defineComponent } from 'vue';\nimport { ChevronRightIcon as TdChevronRightIcon, ChevronLeftIcon as TdChevronLeftIcon } from 'tdesign-icons-vue-next';\nimport DropdownItem from './dropdown-item';\n\nimport { DropdownOption } from './type';\nimport DropdownProps from './props';\nimport TDivider from '../divider';\nimport { usePrefixClass } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\n\nexport default defineComponent({\n  name: 'TDropdownMenu',\n  props: { ...DropdownProps },\n  setup(props) {\n    const dropdownClass = usePrefixClass('dropdown');\n    const dropdownMenuClass = usePrefixClass('dropdown__menu');\n\n    const { ChevronRightIcon, ChevronLeftIcon } = useGlobalIcon({\n      ChevronRightIcon: TdChevronRightIcon,\n      ChevronLeftIcon: TdChevronLeftIcon,\n    });\n\n    const handleItemClick = (options: { data: DropdownOption; context: { e: MouseEvent } }) => {\n      const { data, context } = options;\n      data?.onClick?.(data, context);\n      props.onClick?.(data, context);\n    };\n\n    // 处理options渲染的场景\n    const renderOptions = (data: Array<DropdownOption>) => {\n      const arr: Array<unknown> = [];\n      let renderContent;\n      data.forEach?.((menu, idx) => {\n        const optionItem = { ...(menu as DropdownOption) };\n\n        if (optionItem.children) {\n          optionItem.children = renderOptions(optionItem.children);\n          renderContent = (\n            <div key={idx}>\n              <DropdownItem\n                style={optionItem.style}\n                class={[`${dropdownClass.value}__item`, `${dropdownClass.value}__item--suffix`, optionItem.class]}\n                value={optionItem.value}\n                theme={optionItem.theme}\n                active={optionItem.active}\n                prefixIcon={optionItem.prefixIcon}\n                disabled={optionItem.disabled}\n                minColumnWidth={props.minColumnWidth}\n                maxColumnWidth={props.maxColumnWidth}\n                isSubmenu={true}\n              >\n                <div class={`${dropdownClass.value}__item-content`}>\n                  {props.direction === 'right' ? (\n                    <>\n                      <span class={`${dropdownClass.value}__item-text`}>{optionItem.content}</span>\n                      <ChevronRightIcon class={`${dropdownClass.value}__item-direction`} size=\"16\" />\n                    </>\n                  ) : (\n                    <>\n                      <ChevronLeftIcon class={`${dropdownClass.value}__item-direction`} size=\"16\" />\n                      <span class={`${dropdownClass.value}__item-text`}>{optionItem.content}</span>\n                    </>\n                  )}\n                </div>\n                <div\n                  class={[\n                    `${dropdownClass.value}__submenu`,\n                    {\n                      [`${dropdownClass.value}__submenu--disabled`]: optionItem.disabled,\n                      [`${dropdownClass.value}__submenu--${props.direction}`]: props.direction,\n                    },\n                  ]}\n                  style={{\n                    top: `${idx * 30}px`,\n                  }}\n                >\n                  <ul>{optionItem.children}</ul>\n                </div>\n              </DropdownItem>\n              {optionItem.divider ? <TDivider /> : null}\n            </div>\n          );\n        } else {\n          renderContent = (\n            <div key={idx}>\n              <DropdownItem\n                style={optionItem.style}\n                class={[`${dropdownClass.value}__item`, optionItem.class]}\n                value={optionItem.value}\n                theme={optionItem.theme}\n                active={optionItem.active}\n                prefixIcon={optionItem.prefixIcon}\n                disabled={optionItem.disabled}\n                minColumnWidth={props.minColumnWidth}\n                maxColumnWidth={props.maxColumnWidth}\n                onClick={\n                  optionItem.disabled || optionItem.children\n                    ? () => null\n                    : (value: string | number | { [key: string]: any }, context: { e: MouseEvent }) =>\n                        handleItemClick({ data: optionItem, context })\n                }\n              >\n                <span class={`${dropdownClass.value}__item-text`}>{optionItem.content}</span>\n              </DropdownItem>\n              {optionItem.divider ? <TDivider /> : null}\n            </div>\n          );\n        }\n        arr.push(renderContent);\n      });\n      return arr;\n    };\n\n    return () => {\n      return (\n        <div\n          class={[dropdownMenuClass.value, `${dropdownMenuClass.value}--${props.direction}`]}\n          style={{\n            maxHeight: `${props.maxHeight}px`,\n          }}\n        >\n          {renderOptions(props.options)}\n        </div>\n      );\n    };\n  },\n});\n"],"names":["defineComponent","name","props","DropdownProps","setup","dropdownClass","usePrefixClass","dropdownMenuClass","useGlobalIcon","ChevronRightIcon","TdChevronRightIcon","ChevronLeftIcon","TdChevronLeftIcon","handleItemClick","options","data","context","onClick","renderOptions","arr","renderContent","forEach","menu","idx","optionItem","children","_createVNode","DropdownItem","style","value","theme","active","prefixIcon","disabled","minColumnWidth","maxColumnWidth","direction","_Fragment","content","top","divider","TDivider","push","maxHeight"],"mappings":"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"}