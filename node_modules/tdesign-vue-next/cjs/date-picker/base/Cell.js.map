{"version":3,"file":"Cell.js","sources":["../../../src/date-picker/base/Cell.tsx"],"sourcesContent":["import { defineComponent, computed } from 'vue';\nimport { usePrefixClass } from '../../hooks/useConfig';\nimport { extractTimeObj } from '../../_common/js/date-picker/utils';\n\nexport default defineComponent({\n  name: 'TDatePickerCell',\n  props: {\n    time: String,\n    text: [String, Number],\n    value: Date,\n    active: Boolean,\n    highlight: Boolean,\n    disabled: Boolean,\n    startOfRange: Boolean,\n    endOfRange: Boolean,\n    hoverHighlight: Boolean,\n    hoverStartOfRange: Boolean,\n    hoverEndOfRange: Boolean,\n    additional: Boolean,\n    now: Boolean,\n    firstDayOfMonth: Boolean,\n    lastDayOfMonth: Boolean,\n    onClick: Function,\n    onMouseEnter: Function,\n  },\n  setup(props) {\n    const COMPONENT_NAME = usePrefixClass('date-picker__cell');\n\n    const cellClass = computed(() => [\n      COMPONENT_NAME.value,\n      {\n        [`${COMPONENT_NAME.value}--now`]: props.now,\n        [`${COMPONENT_NAME.value}--active`]: props.active,\n        [`${COMPONENT_NAME.value}--disabled`]: props.disabled,\n        [`${COMPONENT_NAME.value}--highlight`]: props.highlight,\n        [`${COMPONENT_NAME.value}--hover-highlight`]: props.hoverHighlight,\n        [`${COMPONENT_NAME.value}--active-start`]: props.startOfRange,\n        [`${COMPONENT_NAME.value}--active-end`]: props.endOfRange,\n        [`${COMPONENT_NAME.value}--hover-start`]: props.hoverStartOfRange,\n        [`${COMPONENT_NAME.value}--hover-end`]: props.hoverEndOfRange,\n        [`${COMPONENT_NAME.value}--additional`]: props.additional,\n        [`${COMPONENT_NAME.value}--first-day-of-month`]: props.firstDayOfMonth,\n        [`${COMPONENT_NAME.value}--last-day-of-month`]: props.lastDayOfMonth,\n      },\n    ]);\n\n    function handleClick(e: MouseEvent) {\n      if (props.disabled) return;\n      if (props.time) {\n        const { hours, minutes, seconds, milliseconds, meridiem } = extractTimeObj(props.time);\n        // am pm 12小时制转化 24小时制\n        let nextHours = hours;\n        if (/am/i.test(meridiem) && nextHours === 12) nextHours -= 12;\n        if (/pm/i.test(meridiem) && nextHours < 12) nextHours += 12;\n        props.value.setHours(nextHours);\n        props.value.setMinutes(minutes);\n        props.value.setSeconds(seconds);\n        props.value.setMilliseconds(milliseconds);\n      }\n      props.onClick?.(props.value, { e });\n    }\n\n    function handleMouseEnter() {\n      if (props.disabled) return;\n      if (props.time) {\n        const { hours, minutes, seconds, milliseconds, meridiem } = extractTimeObj(props.time);\n        // am pm 12小时制转化 24小时制\n        let nextHours = hours;\n        if (/am/i.test(meridiem) && nextHours === 12) nextHours -= 12;\n        if (/pm/i.test(meridiem) && nextHours < 12) nextHours += 12;\n        props.value.setHours(nextHours);\n        props.value.setMinutes(minutes);\n        props.value.setSeconds(seconds);\n        props.value.setMilliseconds(milliseconds);\n      }\n      props.onMouseEnter?.(props.value);\n    }\n\n    return () => (\n      <td class={cellClass.value} onClick={handleClick} onMouseenter={handleMouseEnter}>\n        <div class={`${COMPONENT_NAME.value}-inner`}>{props.text}</div>\n      </td>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","time","String","text","Number","value","Date","active","Boolean","highlight","disabled","startOfRange","endOfRange","hoverHighlight","hoverStartOfRange","hoverEndOfRange","additional","now","firstDayOfMonth","lastDayOfMonth","onClick","Function","onMouseEnter","setup","COMPONENT_NAME","usePrefixClass","cellClass","computed","_defineProperty","handleClick","e","extractTimeObj","hours","minutes","seconds","milliseconds","meridiem","nextHours","test","setHours","setMinutes","setSeconds","setMilliseconds","handleMouseEnter","_createVNode"],"mappings":"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"}