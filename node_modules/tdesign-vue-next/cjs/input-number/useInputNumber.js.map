{"version":3,"file":"useInputNumber.js","sources":["../../src/input-number/useInputNumber.tsx"],"sourcesContent":["import { computed, onMounted, ref, toRefs, watch } from 'vue';\nimport useCommonClassName from '../hooks/useCommonClassName';\nimport useVModel from '../hooks/useVModel';\nimport { InputNumberValue, TdInputNumberProps } from './type';\n// 计算逻辑，统一到 common 中，方便各框架复用（如超过 16 位的大数处理）\nimport {\n  canAddNumber,\n  canInputNumber,\n  canReduceNumber,\n  formatToNumber,\n  getMaxOrMinValidateResult,\n  getStepValue,\n} from '../_common/js/input-number/number';\nimport { useFormDisabled } from '../form/hooks';\n\nexport const specialCode = ['-', '.', 'e', 'E'];\n\n/**\n * 独立一个组件 Hook 方便用户直接使用相关逻辑 自定义任何样式的数字输入框\n */\nexport default function useInputNumber(props: TdInputNumberProps) {\n  const { classPrefix, sizeClassNames, statusClassNames } = useCommonClassName();\n  const { value, modelValue, max, min } = toRefs(props);\n  // 统一处理受控、非受控、语法糖 v-model 等\n  const [tValue, setTValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n  const inputRef = ref();\n  const userInput = ref('');\n\n  const tDisabled = useFormDisabled();\n\n  const isError = ref<'exceed-maximum' | 'below-minimum'>();\n\n  const disabledReduce = computed(\n    () => tDisabled.value || !canReduceNumber(tValue.value, props.min, props.largeNumber),\n  );\n\n  const disabledAdd = computed(() => tDisabled.value || !canAddNumber(tValue.value, props.max, props.largeNumber));\n\n  const wrapClasses = computed(() => [\n    `${classPrefix.value}-input-number`,\n    sizeClassNames[props.size],\n    {\n      [statusClassNames.disabled]: tDisabled.value,\n      [`${classPrefix.value}-is-controls-right`]: props.theme === 'column',\n      [`${classPrefix.value}-input-number--${props.theme}`]: props.theme,\n      [`${classPrefix.value}-input-number--auto-width`]: props.autoWidth,\n    },\n  ]);\n\n  const reduceClasses = computed(() => [\n    `${classPrefix.value}-input-number__decrease`,\n    { [statusClassNames.disabled]: disabledReduce.value },\n  ]);\n\n  const addClasses = computed(() => [\n    `${classPrefix.value}-input-number__increase`,\n    { [statusClassNames.disabled]: disabledAdd.value },\n  ]);\n\n  const getUserInput = (value: InputNumberValue) => {\n    if (!value && value !== 0) return '';\n    let inputStr = value || value === 0 ? String(value) : '';\n    if (!inputRef.value?.inputRef?.contains(document.activeElement)) {\n      const num = formatToNumber(inputStr, {\n        decimalPlaces: props.decimalPlaces,\n        largeNumber: props.largeNumber,\n      });\n      inputStr = num || num === 0 ? String(num) : '';\n      if (props.format) {\n        inputStr = String(props.format(value, { fixedNumber: inputStr }));\n      }\n    }\n    return inputStr;\n  };\n\n  watch(\n    tValue,\n    (val) => {\n      const inputValue = [undefined, null].includes(val) ? '' : String(val);\n      userInput.value = getUserInput(inputValue);\n    },\n    { immediate: true },\n  );\n\n  onMounted(() => {\n    userInput.value = getUserInput(tValue.value);\n  });\n\n  watch(\n    [tValue, max, min],\n    () => {\n      // @ts-ignore 没有输入完成，则无需校验\n      if ([undefined, '', null].includes(tValue.value)) return;\n      const { max, min, largeNumber } = props;\n      const error = getMaxOrMinValidateResult({\n        value: tValue.value,\n        largeNumber,\n        max,\n        min,\n      });\n      isError.value = error;\n      props.onValidate?.({ error });\n    },\n    { immediate: true },\n  );\n\n  const handleStepValue = (op: 'add' | 'reduce') => {\n    const newValue = getStepValue({\n      op,\n      step: props.step,\n      max: props.max,\n      min: props.min,\n      lastValue: tValue.value,\n      largeNumber: props.largeNumber,\n    });\n    const { largeNumber, max, min } = props;\n    const overLimit = getMaxOrMinValidateResult({\n      value: newValue,\n      largeNumber,\n      max,\n      min,\n    });\n    return {\n      overLimit,\n      newValue,\n    };\n  };\n\n  const handleReduce = (e: KeyboardEvent | MouseEvent) => {\n    if (disabledReduce.value || props.readonly) return;\n    const r = handleStepValue('reduce');\n    if (r.overLimit && !props.allowInputOverLimit) return;\n    setTValue(r.newValue, { type: 'reduce', e });\n  };\n\n  const handleAdd = (e: KeyboardEvent | MouseEvent) => {\n    if (disabledAdd.value || props.readonly) return;\n    const r = handleStepValue('add');\n    if (r.overLimit && !props.allowInputOverLimit) return;\n    setTValue(r.newValue, { type: 'add', e });\n  };\n\n  const onInnerInputChange = (val: string, { e }: { e: InputEvent }) => {\n    if (!canInputNumber(val, props.largeNumber)) return;\n    if (props.largeNumber) {\n      setTValue(val, { type: 'input', e });\n      return;\n    }\n    // specialCode 新增或删除这些字符时不触发 change 事件\n    const isDelete = e.inputType === 'deleteContentBackward';\n    const inputSpecialCode = specialCode.includes(val.slice(-1));\n    const deleteSpecialCode = isDelete && specialCode.includes(String(userInput.value).slice(-1));\n    if ((!isNaN(Number(val)) && !inputSpecialCode) || deleteSpecialCode) {\n      const newVal = val === '' ? undefined : Number(val);\n      setTValue(newVal, { type: 'input', e });\n    }\n    if (inputSpecialCode || deleteSpecialCode) {\n      userInput.value = val;\n    }\n  };\n\n  const handleBlur = (value: string, ctx: { e: FocusEvent }) => {\n    const { largeNumber, max, min, decimalPlaces } = props;\n    if (!props.allowInputOverLimit) {\n      const r = getMaxOrMinValidateResult({ value: tValue.value, largeNumber, max, min });\n      if (r === 'below-minimum') {\n        setTValue(min, { type: 'blur', e: ctx.e });\n      } else if (r === 'exceed-maximum') {\n        setTValue(max, { type: 'blur', e: ctx.e });\n      }\n      return;\n    }\n    userInput.value = getUserInput(tValue.value);\n    const newValue = formatToNumber(value, {\n      decimalPlaces,\n      largeNumber,\n    });\n    if (newValue !== value && String(newValue) !== value) {\n      setTValue(newValue, { type: 'blur', e: ctx.e });\n    }\n    props.onBlur?.(newValue, ctx);\n  };\n\n  const handleFocus = (value: string, ctx: { e: FocusEvent }) => {\n    userInput.value = tValue.value || tValue.value === 0 ? String(tValue.value) : '';\n    props.onFocus?.(value, ctx);\n  };\n\n  const handleKeydown = (value: string, ctx: { e: KeyboardEvent }) => {\n    const { e } = ctx;\n    const keyEvent = {\n      ArrowUp: handleAdd,\n      ArrowDown: handleReduce,\n    };\n    const code = e.code || e.key;\n    if (keyEvent[code] !== undefined) {\n      keyEvent[code](e);\n    }\n    props.onKeydown?.(value, ctx);\n  };\n\n  const handleKeyup = (value: string, ctx: { e: KeyboardEvent }) => {\n    props.onKeyup?.(value, ctx);\n  };\n\n  const handleKeypress = (value: string, ctx: { e: KeyboardEvent }) => {\n    props.onKeypress?.(value, ctx);\n  };\n\n  const handleEnter = (value: string, ctx: { e: KeyboardEvent }) => {\n    userInput.value = getUserInput(value);\n    const newValue = formatToNumber(value, {\n      decimalPlaces: props.decimalPlaces,\n      largeNumber: props.largeNumber,\n    });\n    if (newValue !== value && String(newValue) !== value) {\n      setTValue(newValue, { type: 'enter', e: ctx.e });\n    }\n    props.onEnter?.(newValue, ctx);\n  };\n\n  const focus = () => {\n    (inputRef.value as any).focus();\n  };\n\n  const blur = () => {\n    (inputRef.value as any).blur();\n  };\n\n  const listeners = {\n    onBlur: handleBlur,\n    onFocus: handleFocus,\n    onKeydown: handleKeydown,\n    onKeyup: handleKeyup,\n    onKeypress: handleKeypress,\n    onEnter: handleEnter,\n    onClick: focus,\n  };\n\n  return {\n    classPrefix,\n    wrapClasses,\n    reduceClasses,\n    addClasses,\n    tDisabled,\n    isError,\n    listeners,\n    userInput,\n    tValue,\n    inputRef,\n    focus,\n    blur,\n    handleReduce,\n    handleAdd,\n    onInnerInputChange,\n  };\n}\n"],"names":["specialCode","useInputNumber","props","useCommonClassName","classPrefix","sizeClassNames","statusClassNames","toRefs","value","modelValue","max","min","useVModel","defaultValue","onChange","_slicedToArray","tValue","setTValue","inputRef","ref","userInput","tDisabled","useFormDisabled","isError","disabledReduce","computed","canReduceNumber","largeNumber","disabledAdd","canAddNumber","wrapClasses","size","disabled","_defineProperty","theme","autoWidth","reduceClasses","addClasses","getUserInput","inputStr","String","contains","document","activeElement","num","formatToNumber","decimalPlaces","format","fixedNumber","watch","val","inputValue","includes","immediate","onMounted","error","getMaxOrMinValidateResult","onValidate","handleStepValue","op","newValue","getStepValue","step","lastValue","overLimit","handleReduce","e","readonly","r","allowInputOverLimit","type","handleAdd","onInnerInputChange","canInputNumber","isDelete","inputType","inputSpecialCode","slice","deleteSpecialCode","isNaN","Number","newVal","handleBlur","ctx","onBlur","handleFocus","onFocus","handleKeydown","keyEvent","ArrowUp","ArrowDown","code","key","onKeydown","handleKeyup","onKeyup","handleKeypress","onKeypress","handleEnter","onEnter","focus","blur","listeners","onClick"],"mappings":"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"}