{"version":3,"file":"anchor-target.js","sources":["../../src/anchor/anchor-target.tsx"],"sourcesContent":["import { defineComponent } from 'vue';\nimport { FileCopyIcon as TdFileCopyIcon } from 'tdesign-icons-vue-next';\nimport { copyText } from '../utils/clipboard';\nimport Message from '../message/plugin';\nimport props from './anchor-target-props';\nimport Popup from '../popup';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport { useConfig, usePrefixClass } from '../hooks/useConfig';\n\nexport default defineComponent({\n  name: 'TAnchorTarget',\n  props,\n  setup(props, { slots }) {\n    const { globalConfig, classPrefix } = useConfig('anchor');\n    const { FileCopyIcon } = useGlobalIcon({ FileCopyIcon: TdFileCopyIcon });\n    const COMPONENT_NAME = usePrefixClass('anchor');\n    /**\n     * 复制当前target的链接\n     *\n     */\n    const toCopyText = () => {\n      // 通过构造一个a标签, 自动拼接好传入的id为href\n      const a = document.createElement('a');\n      a.href = `#${props.id}`;\n      copyText(a.href);\n      Message.success(globalConfig.value.copySuccessText, 1000);\n    };\n    return () => {\n      const { default: children } = slots;\n      const { tag: TAG, id } = props;\n      const className = [`${COMPONENT_NAME.value}__target`];\n      const iconClassName = `${classPrefix.value}-copy`;\n      return (\n        <TAG id={id} class={className}>\n          {children && children(null)}\n          <Popup content={globalConfig.value.copyText} placement=\"top\" showArrow class={iconClassName}>\n            <FileCopyIcon onClick={toCopyText} />\n          </Popup>\n        </TAG>\n      );\n    };\n  },\n});\n"],"names":["defineComponent","name","props","setup","slots","useConfig","globalConfig","classPrefix","useGlobalIcon","FileCopyIcon","TdFileCopyIcon","COMPONENT_NAME","usePrefixClass","toCopyText","a","document","createElement","href","id","copyText","Message","success","value","copySuccessText","children","TAG","tag","className","iconClassName","_createVNode","Popup"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,oBAAeA,mBAAgB,CAAA;AAC7BC,EAAAA,IAAM,EAAA,eAAA;AACNC,EAAAA,KAAA,EAAAA,mCAAA;EACAC,KAAMD,EAAAA,SAAAA,KAAAA,CAAAA,MAAAA,EAAkB,IAAA,EAAA;IAAA,IAATE,KAAA,QAAAA,KAAA,CAAA;IACb,IAAsCC,UAAAA,GAAAA,mCAAU,QAAQ,CAAA;AAAhDC,MAAAA,YAAA,cAAAA,YAAA;AAAcC,MAAAA,WAAY,cAAZA,WAAY,CAAA;AAClC,IAAA,IAAA,cAAA,GAAyBC,kCAAc;AAAEC,QAAAA,YAAA,EAAcC,gCAAAA;AAAe,OAAC,CAAA;AAA/DD,MAAAA,YAAa,kBAAbA,YAAa,CAAA;AACf,IAAA,IAAAE,cAAA,GAAiBC,+BAAe,QAAQ,CAAA,CAAA;AAK9C,IAAA,IAAMC,aAAa,SAAbA,aAAmB;AAEjB,MAAA,IAAAC,CAAA,GAAIC,QAAS,CAAAC,aAAA,CAAc,GAAG,CAAA,CAAA;AAClCF,MAAAA,CAAA,CAAAG,IAAA,GAAA,GAAA,CAAA,MAAA,CAAWf,MAAM,CAAAgB,EAAA,CAAA,CAAA;AACnBC,MAAAA,wBAAA,CAASL,EAAEG,IAAI,CAAA,CAAA;MACfG,yBAAA,CAAQC,OAAQ,CAAAf,YAAA,CAAagB,KAAM,CAAAC,eAAA,EAAiB,GAAI,CAAA,CAAA;KAC1D,CAAA;AACA,IAAA,OAAO,YAAM;MACL,IAAWC,QAAA,GAAapB,KAAA,CAAA,SAAA,CAAA,CAAA;AAC9B,MAAA,IAAaqB,GAAK,GAAOvB,MAAAA,CAAjBwB,GAAA;QAAUR,EAAA,GAAOhB,MAAAA,CAAPgB,EAAA,CAAA;AAClB,MAAA,IAAMS,SAAY,GAAA,CAAA,EAAA,CAAA,MAAA,CAAIhB,cAAA,CAAeW,KAAe,EAAA,UAAA,CAAA,CAAA,CAAA;AAC9C,MAAA,IAAAM,aAAA,GAAA,EAAA,CAAA,MAAA,CAAmBrB,WAAY,CAAAe,KAAA,EAAA,OAAA,CAAA,CAAA;AACrC,MAAA,OAAAO,eAAA,CAAA,GAAA,EAAA;AAAA,QAAA,IAAA,EACWX,EAAA;QAAA,OAAWS,EAAAA,SAAAA;AAAA,OAAA,EAAA;AAAA,QAAA,SAAA,EAAA,SAAA,QAAA,GAAA;AAAA,UAAA,OAAA,CACjBH,QAAA,IAAYA,SAAS,IAAI,CAAA,EAAAK,eAAA,CAAAC,iBAAA,EAAA;AAAA,YAAA,SAAA,EACVxB,YAAa,CAAAgB,KAAA,CAAMH;yBAAoB,KAAA;AAAA,YAAA,WAAA,EAAA,IAAA;YAAA,OAAuBS,EAAAA,aAAAA;;;;yBACrDf,EAAAA,UAAAA;AAAA,eAAA,EAAA,IAAA,CAAA,CAAA,CAAA;AAAA,aAAA;AAAA,WAAA,CAAA,CAAA,CAAA;AAAA,SAAA;AAAA,OAAA,CAAA,CAAA;KAI/B,CAAA;AACF,GAAA;AACF,CAAC,CAAA;;;;"}