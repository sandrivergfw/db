{"version":3,"file":"popconfirm.js","sources":["../../src/popconfirm/popconfirm.tsx"],"sourcesContent":["import { defineComponent, computed, toRefs } from 'vue';\nimport {\n  InfoCircleFilledIcon as TdInfoCircleFilledIcon,\n  ErrorCircleFilledIcon as TdErrorCircleFilledIcon,\n} from 'tdesign-icons-vue-next';\n\nimport { useConfig, usePrefixClass } from '../hooks/useConfig';\nimport { useGlobalIcon } from '../hooks/useGlobalIcon';\nimport Popup, { PopupProps, PopupVisibleChangeContext } from '../popup/index';\nimport props from './props';\nimport { PopconfirmVisibleChangeContext } from './type';\nimport { useAction } from '../dialog/hooks';\nimport { useContent, useTNodeJSX, useTNodeDefault } from '../hooks/tnode';\nimport useVModel from '../hooks/useVModel';\n\nexport default defineComponent({\n  name: 'TPopconfirm',\n  props,\n\n  setup(props) {\n    const { globalConfig } = useConfig('popconfirm');\n    const COMPONENT_NAME = usePrefixClass('popconfirm');\n    const { InfoCircleFilledIcon, ErrorCircleFilledIcon } = useGlobalIcon({\n      InfoCircleFilledIcon: TdInfoCircleFilledIcon,\n      ErrorCircleFilledIcon: TdErrorCircleFilledIcon,\n    });\n\n    const { visible, modelValue } = toRefs(props);\n    const [innerVisible, setInnerVisible] = useVModel(\n      visible,\n      modelValue,\n      props.defaultVisible,\n      props.onVisibleChange,\n      'visible',\n    );\n\n    const confirmBtnAction = (e: MouseEvent) => {\n      props.onConfirm?.({ e });\n      setInnerVisible(false, { e });\n    };\n\n    const cancelBtnAction = (e: MouseEvent) => {\n      props.onCancel?.({ e });\n      setInnerVisible(false, { e });\n    };\n\n    const { getConfirmBtn, getCancelBtn } = useAction({ confirmBtnAction, cancelBtnAction });\n\n    const renderTNodeJSX = useTNodeJSX();\n    const innerPopupProps = computed(() => {\n      return {\n        showArrow: props.showArrow,\n        overlayClassName: COMPONENT_NAME.value,\n        trigger: 'click' as PopupProps['trigger'],\n        destroyOnClose: props.destroyOnClose,\n        placement: props.placement,\n        ...(props.popupProps as PopupProps),\n      };\n    });\n\n    const renderTNodeDefault = useTNodeDefault();\n    const renderContent = () => {\n      const cancelBtn = getCancelBtn({\n        cancelBtn: props.cancelBtn,\n        globalCancel: globalConfig.value.cancel,\n        className: `${COMPONENT_NAME.value}__cancel`,\n        size: 'small',\n      });\n\n      const confirmBtn = getConfirmBtn({\n        theme: props.theme,\n        confirmBtn: props.confirmBtn,\n        globalConfirm: globalConfig.value.confirm,\n        globalConfirmBtnTheme: globalConfig.value.confirmBtnTheme,\n        className: `${COMPONENT_NAME.value}__confirm`,\n        size: 'small',\n      });\n\n      const renderIcon = () => {\n        const Icon = {\n          default: InfoCircleFilledIcon,\n          warning: ErrorCircleFilledIcon,\n          danger: ErrorCircleFilledIcon,\n        }[props.theme];\n        const theme = props.theme || 'default';\n        return renderTNodeDefault('icon', <Icon class={`${COMPONENT_NAME.value}__icon--${theme}`} />);\n      };\n\n      return (\n        <div class={`${COMPONENT_NAME.value}__content`}>\n          <div class={`${COMPONENT_NAME.value}__body`}>\n            {renderIcon()}\n            <div class={`${COMPONENT_NAME.value}__inner`}>{renderTNodeJSX('content')}</div>\n          </div>\n          {Boolean(cancelBtn || confirmBtn) && (\n            <div class={`${COMPONENT_NAME.value}__buttons`}>\n              {cancelBtn}\n              {confirmBtn}\n            </div>\n          )}\n        </div>\n      );\n    };\n\n    const onPopupVisibleChange = (val: boolean, context: PopupVisibleChangeContext) => {\n      setInnerVisible(val, context as PopconfirmVisibleChangeContext);\n    };\n\n    const renderTNodeContent = useContent();\n\n    return () => (\n      <Popup\n        visible={innerVisible.value}\n        {...innerPopupProps.value}\n        onVisibleChange={onPopupVisibleChange}\n        v-slots={{\n          content: renderContent,\n        }}\n      >\n        {renderTNodeContent('default', 'triggerElement')}\n      </Popup>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","setup","useConfig","globalConfig","COMPONENT_NAME","usePrefixClass","useGlobalIcon","InfoCircleFilledIcon","TdInfoCircleFilledIcon","ErrorCircleFilledIcon","TdErrorCircleFilledIcon","toRefs","visible","modelValue","useVModel","defaultVisible","onVisibleChange","_slicedToArray","innerVisible","setInnerVisible","confirmBtnAction","e","onConfirm","cancelBtnAction","onCancel","useAction","getConfirmBtn","getCancelBtn","renderTNodeJSX","useTNodeJSX","innerPopupProps","computed","showArrow","overlayClassName","value","trigger","destroyOnClose","placement","popupProps","renderTNodeDefault","useTNodeDefault","renderContent","cancelBtn","globalCancel","cancel","className","size","confirmBtn","theme","globalConfirm","confirm","globalConfirmBtnTheme","confirmBtnTheme","renderIcon","Icon","warning","danger","_createVNode","Boolean","onPopupVisibleChange","val","context","renderTNodeContent","useContent","Popup","_mergeProps","content"],"mappings":"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"}