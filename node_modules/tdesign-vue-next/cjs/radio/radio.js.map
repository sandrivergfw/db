{"version":3,"file":"radio.js","sources":["../../src/radio/radio.tsx"],"sourcesContent":["import { defineComponent, inject, toRefs, computed } from 'vue';\nimport { usePrefixClass, useCommonClassName } from '../hooks/useConfig';\nimport { omit } from '../utils/helper';\nimport props from './props';\nimport { RadioGroupInjectionKey, RadioButtonInjectionKey } from './constants';\n\n// hooks\nimport { useFormDisabled } from '../form/hooks';\nimport useVModel from '../hooks/useVModel';\nimport { useContent } from '../hooks/tnode';\n\nfunction getValidAttrs(obj: Record<string, any>): Record<string, any> {\n  const newObj = {};\n  Object.keys(obj).forEach((key) => {\n    if (typeof obj[key] !== 'undefined') {\n      newObj[key] = obj[key];\n    }\n  });\n  return newObj;\n}\n\nexport default defineComponent({\n  name: 'TRadio',\n  inheritAttrs: false,\n  props: { ...props },\n\n  setup(props, { attrs }) {\n    const { checked, modelValue } = toRefs(props);\n    const [innerChecked, setInnerChecked] = useVModel(\n      checked,\n      modelValue,\n      props.defaultChecked,\n      props.onChange,\n      'checked',\n    );\n    const radioChecked = computed(() => (radioGroup ? props.value === radioGroup.value : innerChecked.value));\n\n    const radioGroup = inject(RadioGroupInjectionKey, undefined);\n\n    /** Event */\n    const handleChange = (e: Event) => {\n      if (radioGroup?.setValue) {\n        radioGroup.setValue(props.value, { e });\n      } else {\n        const { checked } = e.target as HTMLInputElement;\n        setInnerChecked(checked, { e });\n      }\n    };\n    const handleClick = (e: MouseEvent) => {\n      e.stopPropagation();\n      props.onClick?.({ e });\n      if (!radioChecked.value || !props.allowUncheck) return;\n      if (radioGroup) {\n        radioGroup.setValue(undefined, { e });\n      } else {\n        setInnerChecked(false, { e });\n      }\n    };\n    const inputEvents = computed(() =>\n      getValidAttrs({\n        focus: attrs.onFocus,\n        blur: attrs.onBlur,\n        keydown: attrs.onKeydown,\n        keyup: attrs.onKeyup,\n        keypresss: attrs.onKeypresss,\n      }),\n    );\n    const wrapperAttrs = computed(() => {\n      const events = [...Object.keys(inputEvents.value), 'input', 'change'].map(\n        (str) => `on${str[0].toUpperCase()}${str.slice(1)}`,\n      );\n      return omit(attrs, events);\n    });\n    /** Event END */\n\n    // extend radioGroup disabled props\n    const groupDisabled = computed(() => radioGroup?.disabled);\n    const disabled = useFormDisabled(groupDisabled);\n\n    // attribute\n    const inputProps = computed(() => ({\n      name: radioGroup ? radioGroup.name : props.name,\n      checked: radioChecked.value,\n      disabled: disabled.value,\n      value: props.value,\n    }));\n\n    /** Style */\n    const { STATUS } = useCommonClassName();\n    const radioButton = inject(RadioButtonInjectionKey, undefined);\n    const radioBtnName = usePrefixClass('radio-button');\n    const COMPONENT_NAME = usePrefixClass('radio');\n    const prefixCls = computed(() => (radioButton ? radioBtnName.value : COMPONENT_NAME.value));\n    const inputClass = computed(() => [\n      `${prefixCls.value}`,\n      {\n        [STATUS.value.checked]: inputProps.value.checked,\n        [STATUS.value.disabled]: inputProps.value.disabled,\n      },\n    ]);\n    /** Style END */\n\n    const renderContent = useContent();\n\n    return () => (\n      <label class={inputClass.value} {...wrapperAttrs.value}>\n        <input\n          type=\"radio\"\n          class={`${prefixCls.value}__former`}\n          {...inputEvents.value}\n          {...inputProps.value}\n          onChange={handleChange}\n          onClick={handleClick}\n        />\n        <span class={`${prefixCls.value}__input`}></span>\n        <span class={`${prefixCls.value}__label`}>{renderContent('default', 'label')}</span>\n      </label>\n    );\n  },\n});\n"],"names":["getValidAttrs","obj","newObj","Object","keys","forEach","key","defineComponent","name","inheritAttrs","props","setup","attrs","toRefs","checked","modelValue","useVModel","defaultChecked","onChange","_slicedToArray","innerChecked","setInnerChecked","radioChecked","computed","radioGroup","value","inject","RadioGroupInjectionKey","handleChange","e","setValue","target","handleClick","stopPropagation","onClick","allowUncheck","inputEvents","focus","onFocus","blur","onBlur","keydown","onKeydown","keyup","onKeyup","keypresss","onKeypresss","wrapperAttrs","events","_toConsumableArray","map","str","toUpperCase","slice","omit","groupDisabled","disabled","useFormDisabled","inputProps","useCommonClassName","STATUS","radioButton","RadioButtonInjectionKey","radioBtnName","usePrefixClass","COMPONENT_NAME","prefixCls","inputClass","renderContent","useContent","_createVNode","_mergeProps"],"mappings":"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"}