{"version":3,"file":"color-picker.js","sources":["../../src/color-picker/color-picker.tsx"],"sourcesContent":["import { defineComponent, ref, toRefs } from 'vue';\nimport useVModel from '../hooks/useVModel';\nimport { renderTNodeJSXDefault } from '../utils/render-tnode';\nimport props from './props';\nimport { Popup as TPopup } from '../popup';\nimport ColorPanel from './panel';\nimport DefaultTrigger from './trigger';\nimport { TdColorContext } from './interfaces';\nimport { useBaseClassName } from './hooks';\n\nexport default defineComponent({\n  name: 'TColorPicker',\n  props: {\n    ...props,\n  },\n  setup(props) {\n    const baseClassName = useBaseClassName();\n    const visible = ref(false);\n    const setVisible = (value: boolean) => (visible.value = value);\n\n    const { value: inputValue, modelValue } = toRefs(props);\n    const [innerValue, setInnerValue] = useVModel(inputValue, modelValue, props.defaultValue, props.onChange);\n\n    const refTrigger = ref<HTMLElement>();\n\n    const renderPopupContent = () => {\n      if (props.disabled) {\n        return null;\n      }\n      const newProps = { ...props };\n      delete newProps.onChange;\n      return (\n        <ColorPanel\n          {...newProps}\n          disabled={props.disabled}\n          value={innerValue.value}\n          togglePopup={setVisible}\n          onChange={(value: string, context: TdColorContext) => setInnerValue(value, context)}\n        />\n      );\n    };\n\n    return {\n      baseClassName,\n      innerValue,\n      visible,\n      refTrigger,\n      renderPopupContent,\n      setVisible,\n      setInnerValue,\n    };\n  },\n  render() {\n    const { popupProps, disabled, baseClassName } = this;\n    const popProps = {\n      placement: 'bottom-left',\n      ...((popupProps as any) || {}),\n      trigger: 'click',\n      attach: 'body',\n      overlayClassName: [baseClassName],\n      visible: this.visible,\n      overlayInnerStyle: {\n        padding: 0,\n      },\n      onVisibleChange: (\n        visible: boolean,\n        context: {\n          trigger: string;\n        },\n      ) => {\n        if (context.trigger === 'document') {\n          this.setVisible(false);\n        }\n      },\n    };\n    return (\n      <TPopup {...popProps} content={this.renderPopupContent}>\n        <div class={`${baseClassName}__trigger`} onClick={() => this.setVisible(!this.visible)} ref=\"refTrigger\">\n          {renderTNodeJSXDefault(\n            this,\n            'default',\n            <DefaultTrigger\n              color={this.innerValue}\n              disabled={disabled}\n              input-props={this.inputProps}\n              onTriggerChange={this.setInnerValue}\n            />,\n          )}\n        </div>\n      </TPopup>\n    );\n  },\n});\n"],"names":["defineComponent","name","props","setup","baseClassName","useBaseClassName","visible","ref","setVisible","value","toRefs","inputValue","modelValue","useVModel","defaultValue","onChange","_slicedToArray","innerValue","setInnerValue","refTrigger","renderPopupContent","disabled","newProps","_createVNode","ColorPanel","_mergeProps","context","render","popupProps","popProps","placement","trigger","attach","overlayClassName","overlayInnerStyle","padding","onVisibleChange","TPopup","renderTNodeJSXDefault","DefaultTrigger","inputProps"],"mappings":"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"}