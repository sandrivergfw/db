{"version":3,"file":"select.js","sources":["../../src/select/select.tsx"],"sourcesContent":["import { defineComponent, provide, computed, toRefs, watch, ref, nextTick } from 'vue';\nimport picker from 'lodash/pick';\nimport isArray from 'lodash/isArray';\nimport isFunction from 'lodash/isFunction';\nimport debounce from 'lodash/debounce';\nimport cloneDeep from 'lodash/cloneDeep';\nimport get from 'lodash/get';\nimport intersection from 'lodash/intersection';\n\nimport FakeArrow from '../common-components/fake-arrow';\nimport SelectInput from '../select-input';\nimport SelectPanel from './select-panel';\n\nimport props from './props';\nimport { TdSelectProps, SelectValue } from './type';\nimport { PopupVisibleChangeContext } from '../popup';\n\n// hooks\nimport { useFormDisabled } from '../form/hooks';\nimport useDefaultValue from '../hooks/useDefaultValue';\nimport useVModel from '../hooks/useVModel';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { useConfig, usePrefixClass } from '../hooks/useConfig';\nimport { selectInjectKey, getSingleContent, getMultipleContent, getNewMultipleValue } from './helper';\nimport { useSelectOptions } from './hooks/useSelectOptions';\n\nexport default defineComponent({\n  name: 'TSelect',\n  props: { ...props },\n  setup(props: TdSelectProps, { slots, expose, ...res }) {\n    const classPrefix = usePrefixClass();\n    const disabled = useFormDisabled();\n    const renderTNodeJSX = useTNodeJSX();\n    const COMPONENT_NAME = usePrefixClass('select');\n    const { globalConfig, t } = useConfig('select');\n    const { popupVisible, inputValue, modelValue, value } = toRefs(props);\n    const [orgValue, setOrgValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n    const selectPanelRef = ref(null);\n    const selectInputRef = ref(null);\n    const keys = computed(() => ({\n      label: props.keys?.label || 'label',\n      value: props.keys?.value || 'value',\n    }));\n    const { options, optionsMap, optionsList, optionsCache } = useSelectOptions(props, keys);\n\n    // 内部数据,格式化过的\n    const innerValue = computed(() => {\n      if (props.valueType === 'object') {\n        return !props.multiple\n          ? orgValue.value[keys.value.value]\n          : (orgValue.value as SelectValue[]).map((option) => option[keys.value.value]);\n      }\n      // 处理多选情况下值为非迭代器的情况\n      if (props.multiple && !orgValue.value) {\n        return [];\n      }\n      return orgValue.value;\n    });\n    const setInnerValue: TdSelectProps['onChange'] = (newVal: SelectValue | SelectValue[], e) => {\n      if (props.valueType === 'object') {\n        const { value, label } = keys.value;\n        const getOption = (val: SelectValue) => {\n          const option = optionsMap.value.get(val);\n          return {\n            [value]: get(option, value),\n            [label]: get(option, label),\n          };\n        };\n        newVal = props.multiple ? (newVal as SelectValue[]).map((val) => getOption(val)) : getOption(newVal);\n      }\n      if (newVal === orgValue.value) return;\n      setOrgValue(newVal, { selectedOptions: getSelectedOptions(newVal), trigger: e.trigger, e: e.e });\n    };\n\n    const [innerInputValue, setInputValue] = useDefaultValue(\n      inputValue,\n      props.defaultInputValue,\n      props.onInputChange,\n      'inputValue',\n    );\n    const [innerPopupVisible, setInnerPopupVisible] = useDefaultValue(\n      popupVisible,\n      false,\n      (visible: boolean, context: PopupVisibleChangeContext) => {\n        props.onPopupVisibleChange?.(visible, context);\n        props.onVisibleChange?.(visible);\n      },\n      'popupVisible',\n    );\n\n    const placeholderText = computed(\n      () =>\n        ((!props.multiple && innerPopupVisible.value && getSingleContent(innerValue.value, optionsMap)) ||\n          props.placeholder) ??\n        t(globalConfig.value.placeholder),\n    );\n\n    // selectInput 展示值\n    const displayText = computed(() =>\n      props.multiple\n        ? getMultipleContent(innerValue.value as SelectValue[], optionsMap)\n        : getSingleContent(innerValue.value, optionsMap),\n    );\n\n    // valueDisplayParams参数\n    const valueDisplayParams = computed(() => {\n      return props.multiple && isArray(innerValue.value)\n        ? (innerValue.value as SelectValue[]).map((value) => ({\n            value,\n            label: optionsMap.value.get(value)?.label,\n          }))\n        : innerValue.value;\n    });\n\n    const isFilterable = computed(() => {\n      return Boolean(props.filterable || globalConfig.value.filterable || isFunction(props.filter));\n    });\n\n    // 移除tag\n    const removeTag = (index: number, e?: MouseEvent) => {\n      e && e.stopPropagation();\n      const selectValue = cloneDeep(innerValue.value) as SelectValue[];\n      const value = selectValue[index];\n      selectValue.splice(index, 1);\n      setInnerValue(selectValue, { selectedOptions: getSelectedOptions(selectValue), trigger: 'tag-remove', e });\n      props.onRemove?.({\n        value: value as string | number,\n        data: optionsMap.value.get(value),\n        e,\n      });\n    };\n\n    const handleCreate = () => {\n      if (!innerInputValue.value) return;\n      props.onCreate?.(innerInputValue.value);\n      setInputValue('');\n    };\n\n    // 键盘操作逻辑\n    const hoverIndex = ref(-1);\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const optionsListLength = optionsList.value.length;\n      let newIndex = hoverIndex.value;\n      switch (e.code) {\n        case 'ArrowUp':\n          e.preventDefault();\n          if (hoverIndex.value === -1) {\n            newIndex = 0;\n          } else if (hoverIndex.value === 0) {\n            newIndex = optionsListLength - 1;\n          } else {\n            newIndex--;\n          }\n          if (optionsList.value[newIndex]?.disabled) {\n            newIndex--;\n          }\n          hoverIndex.value = newIndex;\n          break;\n        case 'ArrowDown':\n          e.preventDefault();\n          if (hoverIndex.value === -1 || hoverIndex.value === optionsListLength - 1) {\n            newIndex = 0;\n          } else {\n            newIndex++;\n          }\n          if (optionsList.value[newIndex]?.disabled) {\n            newIndex++;\n          }\n          hoverIndex.value = newIndex;\n          break;\n        case 'Enter':\n          if (hoverIndex.value === -1) break;\n          if (!innerPopupVisible.value) {\n            setInnerPopupVisible(true, { e });\n            break;\n          }\n          if (!props.multiple) {\n            setInnerValue(optionsList.value[hoverIndex.value].value, {\n              selectedOptions: getSelectedOptions(optionsList.value[hoverIndex.value].value),\n              trigger: 'check',\n              e,\n            });\n            setInnerPopupVisible(false, { e });\n          } else {\n            if (hoverIndex.value === -1) return;\n            const optionValue = optionsList.value[hoverIndex.value]?.value;\n            if (!optionValue) return;\n            const newValue = getNewMultipleValue(innerValue.value, optionValue);\n            setInnerValue(newValue.value, {\n              selectedOptions: getSelectedOptions(newValue.value),\n              trigger: newValue.isCheck ? 'check' : 'uncheck',\n              e,\n            });\n          }\n          break;\n        case 'Escape':\n          setInnerPopupVisible(false, { e });\n          break;\n      }\n    };\n\n    const popupContentRef = computed(() => selectInputRef.value?.selectInputRef.getOverlay() as HTMLElement);\n\n    /**\n     * 可选选项的列表\n     * 排除已禁用和全选的选项\n     */\n    const optionalList = computed(() =>\n      optionsList.value.filter((item) => {\n        return !item.disabled && !item['check-all'] && !item.checkAll;\n      }),\n    );\n\n    const getSelectedOptions = (selectValue: SelectValue[] | SelectValue = innerValue.value) => {\n      return optionsList.value.filter((option) => {\n        if (option.checkAll) return;\n        if (Array.isArray(selectValue)) return selectValue.includes(option.value);\n        return selectValue === option.value;\n      });\n    };\n\n    const onCheckAllChange = (checked: boolean) => {\n      if (!props.multiple) return;\n      const value = checked ? optionalList.value.map((option) => option.value) : [];\n      setInnerValue(value, { selectedOptions: getSelectedOptions(value), trigger: checked ? 'check' : 'clear' });\n    };\n\n    // 已选的长度\n    const intersectionLen = computed<number>(() => {\n      const values = optionalList.value.map((item) => item.value);\n      const n = intersection(innerValue.value, values);\n      return n.length;\n    });\n\n    // 全选\n    const isCheckAll = computed<boolean>(() => {\n      return intersectionLen.value === optionalList.value.length;\n    });\n\n    // 半选\n    const indeterminate = computed<boolean>(() => !isCheckAll.value && intersectionLen.value !== 0);\n\n    const SelectProvide = computed(() => ({\n      max: props.max,\n      multiple: props.multiple,\n      hoverIndex: hoverIndex.value,\n      selectValue: innerValue.value,\n      reserveKeyword: props.reserveKeyword,\n      handleValueChange: setInnerValue,\n      handlerInputChange: setInputValue,\n      handlePopupVisibleChange: setInnerPopupVisible,\n      handleCreate,\n      size: props.size,\n      popupContentRef,\n      indeterminate: indeterminate.value,\n      isCheckAll: isCheckAll.value,\n      onCheckAllChange,\n      getSelectedOptions,\n    }));\n\n    provide(selectInjectKey, SelectProvide);\n\n    const checkValueInvalid = () => {\n      // 参数类型检测与修复\n      if (!props.multiple && isArray(orgValue.value)) {\n        setOrgValue(undefined);\n      }\n      if (props.multiple && !isArray(orgValue.value)) {\n        setOrgValue([]);\n      }\n    };\n    const handleSearch = debounce((value: string) => {\n      props.onSearch?.(`${value}`);\n    }, 300);\n\n    const addCache = (val: SelectValue) => {\n      if (props.multiple) {\n        const newCache = [];\n        for (const item of (val as SelectValue[]) || []) {\n          const option = optionsMap.value.get(item);\n          if (option) {\n            newCache.push(option);\n          }\n        }\n        optionsCache.value = Array.from(new Set([...newCache, ...optionsCache.value]));\n      } else {\n        const option = optionsMap.value.get(val);\n        if (option) {\n          optionsCache.value = Array.from(new Set([option, ...optionsCache.value]));\n        }\n      }\n    };\n\n    watch(\n      orgValue,\n      (val) => {\n        checkValueInvalid();\n        nextTick(() => {\n          addCache(val);\n        });\n      },\n      {\n        immediate: true,\n      },\n    );\n    watch(\n      () => props.multiple,\n      () => {\n        checkValueInvalid();\n      },\n    );\n    watch(innerPopupVisible, (value) => {\n      if (value) {\n        // 显示\n        hoverIndex.value = -1;\n      } else {\n        // 隐藏\n        // eslint-disable-next-line no-lonely-if\n        if (innerInputValue.value) {\n          setInputValue('');\n        }\n      }\n    });\n\n    // 列表展开时定位置选中项\n    const updateScrollTop = (content: HTMLDivElement) => {\n      if (!selectPanelRef.value) {\n        return;\n      }\n      const firstSelectedNode: HTMLDivElement = (selectPanelRef.value?.innerRef as HTMLDivElement)?.querySelector(\n        `.${classPrefix.value}-is-selected`,\n      );\n      // 此处需要等待渲染后进行计算\n      nextTick(() => {\n        if (firstSelectedNode && content) {\n          const { paddingBottom } = getComputedStyle(firstSelectedNode);\n          const { marginBottom } = getComputedStyle(content);\n          const elementBottomHeight = parseInt(paddingBottom, 10) + parseInt(marginBottom, 10);\n          // 小于0时不需要特殊处理，会被设为0\n          const updateValue =\n            firstSelectedNode.offsetTop -\n            content.offsetTop -\n            (content.clientHeight - firstSelectedNode.clientHeight) +\n            elementBottomHeight;\n          // eslint-disable-next-line no-param-reassign\n          content.scrollTop = updateValue;\n        }\n      });\n    };\n    provide('updateScrollTop', updateScrollTop);\n\n    return () => {\n      const { overlayClassName, ...restPopupProps } = (props.popupProps || {}) as TdSelectProps['popupProps'];\n      return (\n        <div class={`${COMPONENT_NAME.value}__wrap`}>\n          <SelectInput\n            {...{\n              autoWidth: props.autoWidth,\n              readonly: props.readonly,\n              borderless: props.borderless || !props.bordered,\n              multiple: props.multiple,\n              clearable: props.clearable,\n              loading: props.loading,\n              status: props.status,\n              tips: props.tips,\n              minCollapsedNum: props.minCollapsedNum,\n            }}\n            ref={selectInputRef}\n            class={COMPONENT_NAME.value}\n            value={displayText.value}\n            disabled={disabled.value}\n            popupVisible={innerPopupVisible.value}\n            inputValue={innerPopupVisible.value ? innerInputValue.value : ''}\n            placeholder={`${placeholderText.value}`}\n            allowInput={isFilterable.value}\n            collapsed-items={props.collapsedItems}\n            inputProps={{\n              size: props.size,\n              ...(props.inputProps as TdSelectProps['inputProps']),\n              onkeydown: handleKeyDown,\n            }}\n            tagInputProps={{\n              size: props.size,\n              ...(props.tagInputProps as TdSelectProps['tagInputProps']),\n            }}\n            onTagChange={(val, ctx) => {\n              removeTag(ctx.index);\n            }}\n            tagProps={{ ...(props.tagProps as TdSelectProps['tagProps']) }}\n            popupProps={{\n              overlayClassName: [`${COMPONENT_NAME.value}__dropdown`, overlayClassName],\n              ...restPopupProps,\n            }}\n            label={() => renderTNodeJSX('prefixIcon')}\n            suffixIcon={() =>\n              props.showArrow && (\n                <FakeArrow\n                  overlayClassName={`${COMPONENT_NAME.value}__right-icon`}\n                  isActive={innerPopupVisible.value}\n                />\n              )\n            }\n            valueDisplay={() =>\n              renderTNodeJSX('valueDisplay', {\n                params: { value: valueDisplayParams.value, onClose: (index: number) => removeTag(index) },\n              })\n            }\n            onPopupVisibleChange={(val: boolean, context) => {\n              setInnerPopupVisible(val, context);\n            }}\n            onInputChange={(value) => {\n              if (!innerPopupVisible.value) return;\n              setInputValue(value);\n              handleSearch(`${value}`);\n            }}\n            onClear={({ e }) => {\n              setInnerValue(props.multiple ? [] : undefined, {\n                selectedOptions: getSelectedOptions(props.multiple ? [] : undefined),\n                trigger: 'clear',\n                e,\n              });\n              props.onClear?.({ e });\n            }}\n            onEnter={(inputValue, { e }) => {\n              props.onEnter?.({ inputValue: `${innerInputValue.value}`, e, value: innerValue.value });\n              handleCreate();\n            }}\n            onBlur={(inputValue, { e }) => {\n              props.onBlur?.({ e, value: innerValue.value });\n            }}\n            onFocus={(inputValue, { e }) => {\n              props.onFocus?.({ e, value: innerValue.value });\n            }}\n            {...(props.selectInputProps as TdSelectProps['selectInputProps'])}\n            v-slots={{\n              panel: () => (\n                <SelectPanel\n                  ref={selectPanelRef}\n                  {...picker(props, [\n                    'size',\n                    'multiple',\n                    'empty',\n                    'loading',\n                    'loadingText',\n                    'filterable',\n                    'creatable',\n                    'panelTopContent',\n                    'panelBottomContent',\n                    'filter',\n                    'scroll',\n                  ])}\n                  options={options.value}\n                  inputValue={innerInputValue.value}\n                  v-slots={slots}\n                />\n              ),\n              collapsedItems: slots.collapsedItems,\n            }}\n          />\n        </div>\n      );\n    };\n  },\n});\n"],"names":["defineComponent","name","props","setup","slots","expose","classPrefix","usePrefixClass","disabled","useFormDisabled","renderTNodeJSX","useTNodeJSX","COMPONENT_NAME","useConfig","globalConfig","t","toRefs","popupVisible","inputValue","modelValue","value","useVModel","defaultValue","onChange","_slicedToArray","orgValue","setOrgValue","selectPanelRef","ref","selectInputRef","keys","computed","label","useSelectOptions","options","optionsMap","optionsList","optionsCache","innerValue","valueType","multiple","map","option","setInnerValue","newVal","e","getOption","val","get","_defineProperty","selectedOptions","getSelectedOptions","trigger","useDefaultValue","defaultInputValue","onInputChange","innerInputValue","setInputValue","visible","context","onPopupVisibleChange","onVisibleChange","innerPopupVisible","setInnerPopupVisible","placeholderText","getSingleContent","placeholder","displayText","getMultipleContent","valueDisplayParams","isArray","isFilterable","Boolean","filterable","isFunction","filter","removeTag","index","stopPropagation","selectValue","cloneDeep","splice","onRemove","data","handleCreate","onCreate","hoverIndex","handleKeyDown","optionsListLength","length","newIndex","code","preventDefault","optionValue","newValue","getNewMultipleValue","isCheck","popupContentRef","getOverlay","optionalList","item","checkAll","Array","includes","onCheckAllChange","checked","intersectionLen","values","n","intersection","isCheckAll","indeterminate","SelectProvide","max","reserveKeyword","handleValueChange","handlerInputChange","handlePopupVisibleChange","size","provide","selectInjectKey","checkValueInvalid","handleSearch","debounce","onSearch","addCache","newCache","push","from","Set","_toConsumableArray","watch","nextTick","immediate","updateScrollTop","content","firstSelectedNode","innerRef","querySelector","getComputedStyle","paddingBottom","marginBottom","elementBottomHeight","parseInt","updateValue","offsetTop","clientHeight","scrollTop","popupProps","overlayClassName","restPopupProps","_objectWithoutProperties","_createVNode","SelectInput","_mergeProps","autoWidth","readonly","borderless","bordered","clearable","loading","status","tips","minCollapsedNum","collapsedItems","inputProps","onkeydown","tagInputProps","ctx","tagProps","showArrow","FakeArrow","params","onClose","onClear","onEnter","onBlur","onFocus","selectInputProps","panel","SelectPanel","picker"],"mappings":"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"}