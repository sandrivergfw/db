{"version":3,"file":"head-menu.js","sources":["../../src/menu/head-menu.tsx"],"sourcesContent":["import { defineComponent, computed, provide, ref, reactive, watch, onMounted, watchEffect, toRefs, h } from 'vue';\nimport { EllipsisIcon } from 'tdesign-icons-vue-next';\nimport log from '../_common/js/log/log';\nimport props from './head-menu-props';\nimport { MenuValue } from './type';\nimport { TdMenuInterface, TdOpenType } from './const';\nimport { Tabs, TabPanel } from '../tabs';\n\nimport Submenu from './submenu';\nimport VMenu from './v-menu';\nimport { usePrefixClass } from '../hooks/useConfig';\nimport useVModel from '../hooks/useVModel';\nimport useDefaultValue from '../hooks/useDefaultValue';\n\nexport default defineComponent({\n  name: 'THeadMenu',\n  props: { ...props },\n  setup(props, ctx) {\n    const classPrefix = usePrefixClass();\n    watchEffect(() => {\n      if (ctx.slots.options) {\n        log.warnOnce('TMenu', '`options` slot is going to be deprecated, please use `operations` for slot instead.');\n      }\n    });\n    const { value, modelValue, expanded } = toRefs(props);\n    const [activeValue, setActiveValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n    const [expandValues, setExpanded] = useDefaultValue(expanded, props.defaultExpanded, props.onExpand, 'expanded');\n    const activeValues = ref([]);\n    const theme = computed(() => props.theme);\n    const menuClass = computed(() => [\n      `${classPrefix.value}-menu`,\n      `${classPrefix.value}-head-menu`,\n      `${classPrefix.value}-menu--${props.theme}`,\n    ]);\n    const mode = ref(props.expandType);\n    const submenu = reactive([]);\n    const vMenu = new VMenu({ isMutex: true, expandValues: expandValues.value });\n\n    provide<TdMenuInterface>('TdMenu', {\n      mode,\n      theme,\n      vMenu,\n      isHead: true,\n      expandValues,\n      activeValue,\n      activeValues,\n      select: (value: MenuValue) => {\n        setActiveValue(value);\n      },\n      open: (value: MenuValue, type: TdOpenType) => {\n        const expanded = [...expandValues.value];\n        const index = expanded.indexOf(value);\n\n        if (mode.value === 'popup') {\n          if (type === 'add') {\n            if (index === -1) {\n              // 可能初始expanded里包含了该value\n              expanded.push(value);\n            }\n          } else if (type === 'remove') {\n            expanded.splice(index, 1);\n          }\n        } else if (mode.value === 'normal' && value !== undefined) {\n          expanded.splice(0, 1);\n          if (index === -1) {\n            expanded.push(value);\n          }\n        }\n        setExpanded(expanded);\n      },\n    });\n\n    // methods\n    const handleTabChange = (value: MenuValue) => {\n      setActiveValue(value);\n    };\n\n    const handleSubmenuExpand = (value: MenuValue) => {\n      const ans = vMenu.getChild(value);\n      submenu.length = 0;\n      submenu.push(...ans);\n    };\n\n    // watch\n    watch(expandValues, (value) => {\n      if (mode.value === 'normal') {\n        handleSubmenuExpand(value[0]);\n      }\n    });\n    const updateActiveValues = (value: MenuValue) => {\n      activeValues.value = vMenu.select(value);\n    };\n    watch(activeValue, updateActiveValues);\n    watch(\n      () => props.expandType,\n      (value) => {\n        mode.value = value;\n      },\n    );\n\n    onMounted(() => {\n      activeValues.value = vMenu.select(activeValue.value);\n      if (expandValues.value?.length > 0) {\n        handleSubmenuExpand(expandValues.value[0]); // 顶部导航只能同时展开一个子菜单\n      }\n    });\n    // setup返回的render函数中无法访问methods属性中的类容，移动此方法到setup中\n    const renderNormalSubmenu = () => {\n      if (submenu.length === 0) return null;\n      return (\n        <ul class={[`${classPrefix.value}-head-menu__submenu`, `${classPrefix.value}-submenu`]}>\n          {\n            <Tabs value={activeValue.value} onChange={handleTabChange}>\n              {submenu.map((item) => (\n                <TabPanel value={item.value} label={item.vnode()[0]?.children} />\n              ))}\n            </Tabs>\n          }\n        </ul>\n      );\n    };\n\n    const menuContainerRef = ref<HTMLDivElement>();\n    const menuRef = ref<HTMLUListElement>();\n    const innerRef = ref<HTMLDivElement>();\n    const logoRef = ref<HTMLDivElement>();\n    const operationRef = ref<HTMLDivElement>();\n\n    const getComputedCss = (el: Element, cssProperty: keyof CSSStyleDeclaration) =>\n      getComputedStyle(el)[cssProperty] ?? '';\n\n    const getComputedCssValue = (el: Element, cssProperty: keyof CSSStyleDeclaration) =>\n      Number.parseInt(String(getComputedCss(el, cssProperty)), 10);\n\n    const calcMenuWidth = () => {\n      const menuPaddingLeft = getComputedCssValue(menuContainerRef.value, 'paddingLeft');\n      const menuPaddingRight = getComputedCssValue(menuContainerRef.value, 'paddingRight');\n      let totalWidth = innerRef.value.clientWidth;\n      if (logoRef.value) {\n        const logoMarginLeft = getComputedCssValue(logoRef.value, 'marginLeft');\n        const logoMarginRight = getComputedCssValue(logoRef.value, 'marginRight');\n        totalWidth = totalWidth - logoRef.value.offsetWidth - logoMarginLeft - logoMarginRight;\n      }\n\n      if (operationRef.value) {\n        const operationMarginLeft = getComputedCssValue(operationRef.value, 'marginLeft');\n        const operationMarginRight = getComputedCssValue(operationRef.value, 'marginRight');\n        totalWidth = totalWidth - operationRef.value.offsetWidth - operationMarginLeft - operationMarginRight;\n      }\n\n      return totalWidth - menuPaddingLeft - menuPaddingRight;\n    };\n\n    const formatContent = () => {\n      let slot = ctx.slots.default?.() || ctx.slots.content?.() || [];\n\n      if (menuRef.value && innerRef.value) {\n        const validNodes = Array.from(menuRef.value.childNodes ?? []).filter(\n          (item) => item.nodeName !== '#text' || item.nodeValue,\n        ) as HTMLElement[];\n\n        const menuWidth = calcMenuWidth();\n        const menuItemMinWidth = 104;\n\n        let remainWidth = menuWidth;\n        let sliceIndex = validNodes.length;\n\n        for (let index = 0; index < validNodes.length; index++) {\n          const element = validNodes[index];\n          remainWidth -= element.offsetWidth || 0;\n          if (remainWidth < menuItemMinWidth) {\n            sliceIndex = index;\n            break;\n          }\n        }\n\n        const defaultSlot = slot.slice(0, sliceIndex);\n        const subMore = slot.slice(sliceIndex);\n\n        if (subMore.length) {\n          slot = defaultSlot.concat(\n            <Submenu expandType=\"popup\" title={() => <EllipsisIcon />}>\n              {subMore}\n            </Submenu>,\n          );\n        }\n      }\n      return slot;\n    };\n\n    return () => {\n      const logo = props.logo?.(h) || ctx.slots.logo?.();\n      const operations = props.operations?.(h) || ctx.slots.operations?.() || ctx.slots.options?.();\n      const content = formatContent();\n\n      return (\n        <div class={menuClass.value}>\n          <div class={`${classPrefix.value}-head-menu__inner`} ref={innerRef}>\n            {logo && (\n              <div class={`${classPrefix.value}-menu__logo`} ref={logoRef}>\n                {logo}\n              </div>\n            )}\n            <div class={`${classPrefix.value}-menu__container`} ref={menuContainerRef}>\n              <ul class={`${classPrefix.value}-menu`} ref={menuRef}>\n                {content}\n              </ul>\n            </div>\n            {operations && (\n              <div class={`${classPrefix.value}-menu__operations`} ref={operationRef}>\n                {operations}\n              </div>\n            )}\n          </div>\n          {mode.value === 'normal' && renderNormalSubmenu()}\n        </div>\n      );\n    };\n  },\n});\n"],"names":["_isVNode","defineComponent","name","props","setup","ctx","classPrefix","usePrefixClass","watchEffect","slots","options","log","warnOnce","toRefs","value","modelValue","expanded","useVModel","defaultValue","onChange","_slicedToArray","activeValue","setActiveValue","useDefaultValue","defaultExpanded","onExpand","expandValues","setExpanded","activeValues","ref","theme","computed","menuClass","mode","expandType","submenu","reactive","vMenu","VMenu","isMutex","provide","isHead","select","open","type","_toConsumableArray","index","indexOf","push","splice","handleTabChange","handleSubmenuExpand","ans","getChild","length","watch","updateActiveValues","onMounted","renderNormalSubmenu","_createVNode","map","item","TabPanel","vnode","children","menuContainerRef","menuRef","innerRef","logoRef","operationRef","getComputedCss","el","cssProperty","getComputedStyle","getComputedCssValue","Number","parseInt","String","calcMenuWidth","menuPaddingLeft","menuPaddingRight","totalWidth","clientWidth","logoMarginLeft","logoMarginRight","offsetWidth","operationMarginLeft","operationMarginRight","formatContent","slot","content","validNodes","Array","from","childNodes","filter","nodeName","nodeValue","menuWidth","menuItemMinWidth","remainWidth","sliceIndex","element","defaultSlot","slice","subMore","concat","Submenu","EllipsisIcon","logo","h","operations"],"mappings":"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"}