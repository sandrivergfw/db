{"version":3,"file":"collapse.js","sources":["../../src/collapse/collapse.tsx"],"sourcesContent":["import { defineComponent, toRefs, provide, computed } from 'vue';\nimport props from './props';\nimport { CollapseValue, TdCollapseProps, CollapsePanelValue } from './type';\nimport useVModel from '../hooks/useVModel';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { usePrefixClass } from '../hooks/useConfig';\n\nexport default defineComponent({\n  name: 'TCollapse',\n  props,\n\n  setup(props: TdCollapseProps, context) {\n    const componentName = usePrefixClass('collapse');\n    const borderlessClass = usePrefixClass('-border-less');\n    const renderTNodeJSX = useTNodeJSX();\n    const { value, expandMutex, borderless, modelValue } = toRefs(props);\n    const [collapseValue, setCollapseValue] = useVModel(value, modelValue, props.defaultValue, props.onChange);\n    const updateCollapseValue = (value: CollapsePanelValue) => {\n      let newValue: CollapseValue = [].concat(collapseValue.value || []);\n      const index = newValue.indexOf(value);\n      if (index >= 0) {\n        newValue.splice(index, 1);\n      } else if (expandMutex.value) {\n        newValue = [value];\n      } else {\n        newValue.push(value);\n      }\n      setCollapseValue(newValue);\n    };\n    const classes = computed(() => {\n      return [\n        componentName.value,\n        {\n          [borderlessClass.value]: !!borderless.value,\n        },\n      ];\n    });\n    const getUniqId = (() => {\n      let index = 0;\n      return () => index++;\n    })();\n    provide('collapseValue', collapseValue);\n    provide('updateCollapseValue', updateCollapseValue);\n    provide('collapseProps', toRefs(props));\n    provide('getUniqId', getUniqId);\n    provide('renderParentTNode', renderTNodeJSX);\n    return () => {\n      const nodes = renderTNodeJSX('default');\n      return <div class={classes.value}>{nodes}</div>;\n    };\n  },\n});\n"],"names":["defineComponent","name","props","setup","context","componentName","usePrefixClass","borderlessClass","renderTNodeJSX","useTNodeJSX","toRefs","value","expandMutex","borderless","modelValue","useVModel","defaultValue","onChange","_slicedToArray","collapseValue","setCollapseValue","updateCollapseValue","newValue","concat","index","indexOf","splice","push","classes","computed","getUniqId","provide","nodes","_createVNode"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA,gBAAeA,mBAAgB,CAAA;AAC7BC,EAAAA,IAAM,EAAA,WAAA;AACNC,EAAAA,KAAA,EAAAA,yBAAA;AAEAC,EAAAA,KAAA,EAAMD,SAAAA,KAAAA,CAAAA,QAAwBE,OAAS,EAAA;AAC/B,IAAA,IAAAC,aAAA,GAAgBC,+BAAe,UAAU,CAAA,CAAA;AACzC,IAAA,IAAAC,eAAA,GAAkBD,+BAAe,cAAc,CAAA,CAAA;IACrD,IAAME,iBAAiBC,uBAAY,EAAA,CAAA;IACnC,IAAuDC,OAAAA,GAAAA,WAAOR,MAAK,CAAA;AAA3DS,MAAAA,KAAO,WAAPA,KAAO;AAAAC,MAAAA,WAAA,WAAAA,WAAA;AAAaC,MAAAA,qBAAAA;AAAYC,MAAAA,UAAW,WAAXA,UAAW,CAAA;AAC7C,IAAA,IAAA,UAAA,GAAoCC,0BAAA,CAAUJ,OAAOG,UAAYZ,EAAAA,MAAAA,CAAMc,YAAcd,EAAAA,MAAAA,CAAMe,QAAQ,CAAA;AAAA,MAAA,WAAA,GAAAC,kCAAA,CAAA,UAAA,EAAA,CAAA,CAAA;MAAlGC,aAAe,GAAA,WAAA,CAAA,CAAA,CAAA;MAAAC,gBAAgB,GAAA,WAAA,CAAA,CAAA,CAAA,CAAA;AAChC,IAAA,IAAAC,mBAAA,GAAsB,SAAtBA,mBAAA,CAAuBV,MAA8B,EAAA;MACzD,IAAIW,WAA0B,EAAC,CAAEC,OAAOJ,aAAc,CAAAR,KAAA,IAAS,EAAE,CAAA,CAAA;AAC3D,MAAA,IAAAa,KAAA,GAAQF,QAAS,CAAAG,OAAA,CAAQd,MAAK,CAAA,CAAA;MACpC,IAAIa,SAAS,CAAG,EAAA;AACLF,QAAAA,QAAA,CAAAI,MAAA,CAAOF,OAAO,CAAC,CAAA,CAAA;AAC1B,OAAA,MAAA,IAAWZ,YAAYD,KAAO,EAAA;QAC5BW,QAAA,GAAW,CAACX,MAAK,CAAA,CAAA;AACnB,OAAO,MAAA;AACLW,QAAAA,QAAA,CAASK,KAAKhB,MAAK,CAAA,CAAA;AACrB,OAAA;MACAS,gBAAA,CAAiBE,QAAQ,CAAA,CAAA;KAC3B,CAAA;AACM,IAAA,IAAAM,OAAA,GAAUC,aAAS,YAAM;AACtB,MAAA,OAAA,CACLxB,aAAc,CAAAM,KAAA,0CAEXJ,eAAA,CAAgBI,KAAQ,EAAA,CAAC,CAACE,UAAW,CAAAF,KAAA,CAE1C,CAAA,CAAA;AACF,KAAC,CAAA,CAAA;IACD,IAAMmB,YAAa,YAAM;MACvB,IAAIN,KAAQ,GAAA,CAAA,CAAA;MACZ,OAAO,YAAA;AAAA,QAAA,OAAMA,KAAA,EAAA,CAAA;AAAA,OAAA,CAAA;AACf,KAAG,EAAA,CAAA;AACHO,IAAAA,WAAA,CAAQ,iBAAiBZ,aAAa,CAAA,CAAA;AACtCY,IAAAA,WAAA,CAAQ,uBAAuBV,mBAAmB,CAAA,CAAA;AAC1CU,IAAAA,WAAA,CAAA,eAAA,EAAiBrB,UAAOR,CAAAA,MAAK,CAAC,CAAA,CAAA;AACtC6B,IAAAA,WAAA,CAAQ,aAAaD,SAAS,CAAA,CAAA;AAC9BC,IAAAA,WAAA,CAAQ,qBAAqBvB,cAAc,CAAA,CAAA;AAC3C,IAAA,OAAO,YAAM;AACL,MAAA,IAAAwB,KAAA,GAAQxB,eAAe,SAAS,CAAA,CAAA;AACtC,MAAA,OAAAyB,eAAA,CAAA,KAAA,EAAA;AAAA,QAAA,OAAA,EAAmBL,OAAQ,CAAAjB,KAAAA;AAAA,OAAA,EAAA,CAAQqB;KACrC,CAAA;AACF,GAAA;AACF,CAAC,CAAA;;;;"}