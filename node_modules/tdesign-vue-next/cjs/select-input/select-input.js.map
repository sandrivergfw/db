{"version":3,"file":"select-input.js","sources":["../../src/select-input/select-input.tsx"],"sourcesContent":["import { computed, defineComponent, ref, SetupContext, toRefs } from 'vue';\nimport Popup from '../popup';\nimport props from './props';\nimport { TdSelectInputProps } from './type';\n\nimport useSingle from './useSingle';\nimport useMultiple from './useMultiple';\nimport useOverlayInnerStyle from './useOverlayInnerStyle';\nimport { usePrefixClass } from '../hooks/useConfig';\n\nconst useComponentClassName = () => {\n  return {\n    NAME_CLASS: usePrefixClass('select-input'),\n    BASE_CLASS_BORDERLESS: usePrefixClass('select-input--borderless'),\n    BASE_CLASS_MULTIPLE: usePrefixClass('select-input--multiple'),\n    BASE_CLASS_POPUP_VISIBLE: usePrefixClass('select-input--popup-visible'),\n    BASE_CLASS_EMPTY: usePrefixClass('select-input--empty'),\n  };\n};\n\nexport default defineComponent({\n  name: 'TSelectInput',\n\n  props: { ...props },\n\n  setup(props: TdSelectInputProps, context: SetupContext) {\n    const { NAME_CLASS, BASE_CLASS_BORDERLESS, BASE_CLASS_MULTIPLE, BASE_CLASS_POPUP_VISIBLE, BASE_CLASS_EMPTY } =\n      useComponentClassName();\n    const classPrefix = usePrefixClass();\n\n    const selectInputRef = ref();\n    const selectInputWrapRef = ref();\n    const { multiple, value, popupVisible, borderless } = toRefs(props);\n    const { commonInputProps, onInnerClear, renderSelectSingle } = useSingle(props, context);\n    const { renderSelectMultiple } = useMultiple(props, context);\n    const { tOverlayInnerStyle, innerPopupVisible, onInnerPopupVisibleChange } = useOverlayInnerStyle(props);\n\n    const popupClasses = computed(() => [\n      NAME_CLASS.value,\n      {\n        [BASE_CLASS_BORDERLESS.value]: borderless.value,\n        [BASE_CLASS_MULTIPLE.value]: multiple.value,\n        [BASE_CLASS_POPUP_VISIBLE.value]: popupVisible.value ?? innerPopupVisible.value,\n        [BASE_CLASS_EMPTY.value]: value.value instanceof Array ? !value.value.length : !value.value,\n      },\n    ]);\n\n    return {\n      classPrefix,\n      NAME_CLASS,\n      selectInputWrapRef,\n      innerPopupVisible,\n      commonInputProps,\n      tOverlayInnerStyle,\n      selectInputRef,\n      popupClasses,\n      onInnerClear,\n      renderSelectSingle,\n      renderSelectMultiple,\n      onInnerPopupVisibleChange,\n    };\n  },\n\n  render() {\n    // 浮层显示的受控与非受控\n    const visibleProps = { visible: this.popupVisible ?? this.innerPopupVisible };\n\n    const mainContent = (\n      <Popup\n        ref=\"selectInputRef\"\n        class={this.popupClasses}\n        trigger={(this.popupProps as TdSelectInputProps['popupProps'])?.trigger || 'click'}\n        placement=\"bottom-left\"\n        {...visibleProps}\n        content={this.panel}\n        v-slots={{ ...this.$slots, content: this.$slots.panel }}\n        hideEmptyPopup={true}\n        {...{\n          onVisibleChange: this.onInnerPopupVisibleChange,\n          ...(this.popupProps as TdSelectInputProps['popupProps']),\n          overlayInnerStyle: this.tOverlayInnerStyle,\n        }}\n      >\n        {this.multiple\n          ? this.renderSelectMultiple({\n              commonInputProps: this.commonInputProps,\n              onInnerClear: this.onInnerClear,\n              popupVisible: visibleProps.visible,\n            })\n          : this.renderSelectSingle(visibleProps.visible)}\n      </Popup>\n    );\n\n    if (!this.tips) return mainContent;\n\n    return (\n      <div ref=\"selectInputWrapRef\" class={`${this.NAME_CLASS}__wrap`}>\n        {mainContent}\n        <div class={`${this.classPrefix}-input__tips ${this.classPrefix}-input__tips--${this.status || 'normal'}`}>\n          {this.tips}\n        </div>\n      </div>\n    );\n  },\n});\n"],"names":["useComponentClassName","NAME_CLASS","usePrefixClass","BASE_CLASS_BORDERLESS","BASE_CLASS_MULTIPLE","BASE_CLASS_POPUP_VISIBLE","BASE_CLASS_EMPTY","defineComponent","name","props","setup","context","classPrefix","selectInputRef","ref","selectInputWrapRef","toRefs","multiple","value","popupVisible","borderless","useSingle","commonInputProps","onInnerClear","renderSelectSingle","useMultiple","renderSelectMultiple","useOverlayInnerStyle","tOverlayInnerStyle","innerPopupVisible","onInnerPopupVisibleChange","popupClasses","computed","_defineProperty","Array","length","render","visibleProps","visible","mainContent","_createVNode","Popup","_mergeProps","popupProps","trigger","panel","onVisibleChange","overlayInnerStyle","$slots","content","tips","status"],"mappings":"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"}